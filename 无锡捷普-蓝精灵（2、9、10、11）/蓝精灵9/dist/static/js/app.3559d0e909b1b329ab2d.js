webpackJsonp([1],{"15OP":function(t,e){},"1onw":function(t,e){},"67cn":function(t,e){},"7n6D":function(t,e){},"9URi":function(t,e){},AF44:function(t,e){},Cx9D:function(t,e){},Gb1B:function(t,e){},Hf66:function(t,e){},ITPp:function(t,e,a){"use strict";e.b=function(){return new i.a(function(t,e){l.a.topic.mapTopic.subscribe(function(e){var a=new ROS2D.ImageMap({image:e.data,message:e.info});n.a.commit("base64MapData",e.data),console.log(e),l.a.mapMsg=e,l.a.imgMapStage&&l.c.scene.removeAllChildren(),l.a.imgMapStage=a,l.c.scene.addChild(a);var o=l.a.mapInfo.windowWidth/a.width;l.c.width=l.a.mapInfo.windowWidth,l.c.height=a.height*o,"gmapping"!==n.a.state.rosMode?(l.c.scaleToDimensions(a.width,a.height),l.c.shift(a.pose.position.x,a.pose.position.y)):!1===n.a.state.mappingFlag&&(l.c.scaleToDimensions(a.width,a.height),l.c.scene.x=l.a.mapInfo.windowWidth/2,l.c.scene.y=l.a.mapInfo.windowHeight/2,n.a.commit("mappingFlag",!0));var i={x:l.c.scene.x,y:l.c.scene.y};l.a.mapXY=i,Object(u.c)(),t("display map")})})},e.k=function(t){var e=Number(n.a.state.scale);if(n.a.commit("zoomDisabled",2),"zoomIn"===t){if(n.a.commit("setScale",e*=1.2),e>2.5)return void n.a.commit("zoomDisabled",0);Object(d.f)(),Object(u.c)(),l.d.startZoom(l.c.scene.x+l.a.robotStage.x,l.c.scene.y+l.a.robotStage.y),l.d.zoom(1.2)}else{if(n.a.commit("setScale",e*=.8),e<.32)return void n.a.commit("zoomDisabled",1);Object(d.f)(),Object(u.c)(),l.d.startZoom(l.c.scene.x+l.a.robotStage.x,l.c.scene.y+l.a.robotStage.y),l.d.zoom(.8)}},e.e=m,e.c=function(){r.Loading.service({text:s.default.$t("loading")});var t=new ROSLIB.Message({seq:1,frame_id:"slam"});l.a.topic.taskSwitchTopic.publish(t),console.log("[INFO]Start mapping"),r.Loading.service().close()},e.a=function(){if(n.a.state.rosMode===c.a.rosMode.gmapping)return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.nowMapping"),type:"warning",position:"top-left",offset:100});r.Loading.service({text:s.default.$t("loading")});var t=new ROSLIB.Message({seq:2,frame_id:"slam"});l.a.topic.taskSwitchTopic.publish(t),console.log("[INFO]continue mapping"),r.Loading.service().close()},e.i=function(t){var e="";if(t){if(!Object(p.c)(t))return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.theNameUnavailable"),type:"warning",position:"top-left",offset:100});e="_"+t}else e="";r.Loading.service({text:s.default.$t("inTheSave")});var a={seq:1,frame_id:"save_map"+e};l.a.topic.taskSwitchTopic.publish(new ROSLIB.Message(a)),setTimeout(function(){r.Loading.service().close(),Object(r.Notification)({title:s.default.$t("titles.success"),message:s.default.$t("messages.saveSuccess"),type:"success",position:"top-left",offset:100})},2e3)},e.h=function(t){var e="";if(t){if(!Object(p.c)(t))return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.theNameUnavailable"),type:"warning",position:"top-left",offset:100});e="_"+t}else e="";window.localStorage.setItem("guideName","map"),r.Loading.service({text:s.default.$t("inTheSave")});var a={seq:1,frame_id:"save_map"+e},o={seq:0,frame_id:"slam"};l.a.topic.taskSwitchTopic.publish(new ROSLIB.Message(a)),setTimeout(function(){var t=new ROSLIB.Message(o);l.a.topic.taskSwitchTopic.publish(t),setTimeout(function(){window.localStorage.setItem("guideName","map"),m(!1),r.Loading.service().close(),m(!1);var t=window.localStorage.getItem("guide");t||Object(d.g)(!0),Object(r.Notification)({title:s.default.$t("titles.success"),message:s.default.$t("messages.saveSuccess"),type:"success",position:"top-left",offset:100})},8e3)},1e3)},e.f=function(t){t?n.a.commit("switchUploadMap",!0):n.a.commit("switchUploadMap",!1)},e.d=function(t){t?n.a.commit("switchDownloadMap",!0):n.a.commit("switchDownloadMap",!1)},e.j=function(t){var e=new ROSLIB.Message({header:{frame_id:"map"},info:{resolution:l.a.mapMsg.info.resolution,width:l.a.mapMsg.info.width,height:l.a.mapMsg.info.height,origin:{orientation:{x:l.a.mapMsg.info.origin.orientation.x,y:l.a.mapMsg.info.origin.orientation.y,z:l.a.mapMsg.info.origin.orientation.z,w:l.a.mapMsg.info.origin.orientation.w},position:{x:l.a.mapMsg.info.origin.position.x,y:l.a.mapMsg.info.origin.position.y,z:l.a.mapMsg.info.origin.position.z}}},data:t.base64});console.log(t.base64),"map"==t.type?l.a.topic.uploadMapTopic.publish(e):"map_edit"==t.type&&l.a.topic.uploadMapEditTopic.publish(e)},e.g=function(){return new i.a(function(t,e){l.a.topic.mapEditTopic.subscribe(function(e){return t("display map_edit"),l.a.topic.mapTopic.unsubscribe(),console.log(e),e.data})})};var o=a("//Fk"),i=a.n(o),s=a("NHnr"),n=a("IcnI"),r=a("zL8q"),l=(a.n(r),a("dmop")),c=a("djuq"),d=a("xrs3"),u=a("pDaU"),p=a("RjI4");function m(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=window.localStorage.getItem("guide");t?(n.a.commit("switchEditMapBtns",!0),e||n.a.commit("guideIndex",1)):n.a.commit("switchEditMapBtns",!1)}},IcnI:function(t,e,a){"use strict";var o,i=a("bOdI"),s=a.n(i),n=a("7+uW"),r=a("NYxO");n.default.use(r.a),e.a=new r.a.Store({state:(o={guideIndex:0,guideEndModule:!1,guideModule:!1,mapList:[],wayPointMsg:"",stationList:[],stationName:"",showWhiteMask:!1,showBlackMask:!1,robotPosition:"",waypointsModule:!1,showAddStation:!1,showWaypointDetail:!1,trajectoryList:[],trajectoryModule:!1,showTrajectory:!1,trackDetail:"",delTrackName:"",deleteTrack:!1,showAddTrack:!1,uploadMap:!1,downloadMap:!1,scale:1,zoomDisabled:2,rosMode:"",navControlStatus:null,mappingFlag:!1,chargeStatus:null,showBattery:!1,battery:100,authorization:!1,authorizationPassword:"6022",developAuthorization:"343",role:"",userRole:null,batteryStatus:null,batteryState:null,edipMapModule:!1,wifiInfos:"",showWifiSetting:!1,addMap:!1,showUpdate:!1,showVolume:!1,showBranch:!1,nowMapName:"MAP",delMap:!1,delMapName:"",disabledMoveMap:!1},s()(o,"stationName",""),s()(o,"stationEdit",!1),s()(o,"showMoreBtns",!1),s()(o,"showDragModule",!1),s()(o,"base64MapData",""),o),mutations:{guideIndex:function(t,e){t.guideIndex=e},guideEndModule:function(t,e){t.guideEndModule=e},guideModule:function(t,e){t.guideModule=e},mapList:function(t,e){t.mapList=e},wayPointMsg:function(t,e){t.wayPointMsg=e},stationList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.stationList=e},switchWaypointList:function(t,e){t.waypointsModule=e},switchAddStation:function(t,e){t.showAddStation=e},switchWaypointDetail:function(t,e){t.showWaypointDetail=e},switchWhiteMask:function(t,e){t.showWhiteMask=e},switchBlackMask:function(t,e){t.showBlackMask=e},setRobotPosition:function(t,e){t.robotPosition=e},setStationName:function(t,e){t.stationName=e},trajectoryList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.trajectoryList=e},switchTrackList:function(t,e){t.trajectoryModule=e},switchTrackModule:function(t,e){t.showTrajectory=e},delTrackName:function(t,e){t.delTrackName=e},switchDeleteTrack:function(t,e){t.deleteTrack=e},switchAddTrack:function(t,e){t.showAddTrack=e},setScale:function(t,e){t.scale=e},zoomDisabled:function(t,e){t.zoomDisabled=e},setRosMode:function(t,e){t.rosMode=e},setNavControlStatus:function(t,e){t.navControlStatus=e},mappingFlag:function(t,e){t.mappingFlag=e},chargeStatus:function(t,e){t.chargeStatus=e},showBattery:function(t,e){t.showBattery=e},switchBatteryStatus:function(t,e){t.batteryStatus=e},switchEditMapBtns:function(t,e){t.edipMapModule=e},switchAutherModule:function(t,e){t.authorization=e},userRole:function(t,e){t.userRole=e},subButtery:function(t,e){t.battery=e},batteryState:function(t,e){t.batteryState=e},setWifiInfos:function(t,e){t.wifiInfos=e},switchWifiSetting:function(t,e){t.showWifiSetting=e},switchBranch:function(t,e){t.showBranch=e},switchAddMap:function(t,e){t.addMap=e},switchUpdate:function(t,e){t.showUpdate=e},switchvolume:function(t,e){t.showVolume=e},setNowMapName:function(t,e){t.nowMapName=e},switchDelMap:function(t,e){t.delMap=e},switchUploadMap:function(t,e){t.uploadMap=e},switchDownloadMap:function(t,e){t.downloadMap=e},setDelMapName:function(t,e){t.delMapName=e},switchMoveMap:function(t,e){t.disabledMoveMap=e},switchStationEdit:function(t,e){t.stationEdit=e},setTrackDetail:function(t,e){t.trackDetail=e},switchMoreBtns:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.showMoreBtns=e},switchDragModule:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.showDragModule=e},mapScale:function(t,e){t.scale=e},base64MapData:function(t,e){t.base64MapData=e}}})},JYMg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("qrRd"),i=a("Lf+Q"),s={name:"collection",components:{electricity:o.a},data:function(){return{disabledBtn:!1}},watch:{"$store.state.navControlStatus":function(t){this.disabledBtn=0!=t&&4!=t}},mounted:function(){},methods:{dispatchAGV:function(){Object(i.c)("Collection_Path_120s"),this.$notify({title:"成功",message:"任务派发成功",type:"success"})}}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"collectionBox"},[e("div",{staticClass:"head"},[this._v("点击图标派发任务")]),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.showBattery,expression:"this.$store.state.showBattery"}]},[e("electricity")],1),this._v(" "),e("div",{staticClass:"colBody flex"},[e("el-button",{staticClass:"collBtn",attrs:{type:"primary",icon:"el-icon-truck",circle:"",disabled:this.disabledBtn},on:{click:this.dispatchAGV}})],1)])},staticRenderFns:[]};var r=a("VU/8")(s,n,!1,function(t){a("kXP9")},"data-v-28e1448a",null);e.default=r.exports},"Lf+Q":function(t,e,a){"use strict";e.f=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.a.commit("switchTrackList",!0):n.a.commit("switchTrackList",!1)},e.d=p,e.e=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments[1];if(t){var a=m(e);if(console.log("[INFO]:"+i()(a)),!a)return Object(r.Notification)({title:s.default.$t("titles.error"),message:s.default.$t("messages.notFindTrajectory")+e,type:"error",position:"top-left",offset:100}),void console.warn("[WARN]Can not find waypoint "+e);n.a.commit("setTrackDetail",a),n.a.commit("switchTrackModule",!0)}else n.a.commit("switchTrackModule",!1)},e.c=function(t){var e=m(t);Object(u.c)(e.name,1)},e.a=function(t){var e=m(t),a=new ROSLIB.Message(e);console.log("delete Trajectory Name:"+t),l.a.topic.delTrajTopic.publish(a),Object(r.Notification)({title:s.default.$t("titles.success"),message:s.default.$t("messages.trajectoryDelSuccess"),type:"success",position:"top-left",offset:100})},e.g=function(t){if(""===t.name)return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.refineTrajecName"),type:"warning",position:"top-left",offset:100});if(!Object(c.c)(t.name))return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.theNameUnavailable"),type:"warning",position:"top-left",offset:100});if(0===t.stations.length)return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.minSelectWaypoint"),type:"warning",position:"top-left",offset:100});if(h(t.name))return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.trajectoryExists"),type:"warning",position:"top-left",offset:100});if(Object(d.d)(t.name))return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.trajectoryWithWaypointExists"),type:"warning",position:"top-left",offset:100});window.localStorage.setItem("guideName","trajectory");for(var e=t.stations,a=[],o=0;o<e.length;o++){var i=e[o];a.push(Object(d.c)(i))}var n=new ROSLIB.Message({name:t.name,waypoints:a});l.a.topic.addTrajectoryTopic.publish(n),Object(r.Notification)({title:s.default.$t("titles.success"),message:s.default.$t("messages.trajectoryAddSuccess"),type:"success",position:"top-left",offset:100}),p(!1),window.localStorage.getItem("guide")||Object(c.o)(!0)},e.b=h;var o=a("mvHQ"),i=a.n(o),s=a("NHnr"),n=a("IcnI"),r=a("zL8q"),l=(a.n(r),a("dmop")),c=a("RjI4"),d=a("xrs3"),u=a("rFWt");function p(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=window.localStorage.getItem("guide");t?(n.a.commit("switchAddTrack",!0),e||n.a.commit("guideIndex",3)):n.a.commit("switchAddTrack",!1)}function m(t){for(var e,a=0;a<n.a.state.trajectoryList.length&&(e=n.a.state.trajectoryList[a]).name!==t;a++);return e}function h(t){if(n.a.state.trajectoryList)for(var e=0;e<n.a.state.trajectoryList.length;e++)if(n.a.state.trajectoryList[e].name===t)return!0;return!1}},Mgr3:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("7+uW"),i=a("zL8q"),s=a.n(i),n=a("TXmL"),r=(a("tvR6"),{name:"App",components:{Home:a("wUZA").default}}),l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view",[e("Home")],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("Hf66")},null,null).exports,d=a("/ocq"),u=function(t){t(a("wUZA"))};o.default.use(d.a);var p=new d.a({mode:"hash",routes:[{path:"*",component:u},{path:"/home",name:"home",component:u,meta:{keepAlive:!1}},{path:"/collection",name:"collection",component:function(t){t(a("JYMg"))}}]}),m=a("IcnI"),h=a("v5o6"),v=a.n(h);a("jcZh"),a("dmop");v.a.attach(document.body),o.default.filter("numFilter",function(t){var e=Number(t).toFixed(2);return Number(e)}),o.default.config.productionTip=!1,o.default.use(s.a),o.default.use(n.a);var w=new n.a({locale:"cn",messages:{cn:a("Tjut"),en:a("p9le")}}),f=new o.default({el:"#app",router:p,store:m.a,i18n:w,components:{App:c},template:"<App/>"});e.default=f},OwSL:function(t,e){},Pqsl:function(t,e){t.exports={ip:window.location.hostname}},Q1jy:function(t,e){},Q2pe:function(t,e){},QQG7:function(t,e){},Qjgw:function(t,e){},Qxng:function(t,e){},RjI4:function(t,e,a){"use strict";e.k=function(){return new i.a(function(t,e){var a=new ROSLIB.TFClient({ros:l.b,fixedFrame:"map",angularThres:.01,transThres:.01});a.subscribe("odom",function(t){l.a.tfMsg.map2odom={header:{stamp:null},transform:t}}),a.subscribe("base_footprint",function(t){l.a.tfMsg.map2base_footprint={header:{stamp:null},transform:t}}),a.subscribe("base_laser",function(t){l.a.tfMsg.map2base_laser={header:{stamp:null},transform:t}});var o=new ROSLIB.TFClient({ros:l.b,fixedFrame:"base_link",angularThres:.01,transThres:.01});o.subscribe("base_laser",function(t){l.a.tfMsg.base_link2base_laser={header:{stamp:null},transform:t}}),t("tfClient")})},e.i=function(){return new i.a(function(t,e){var a=window.localStorage.getItem("guide"),o=window.localStorage.getItem("guideName");if(a)r.a.commit("guideModule",!1);else switch(r.a.commit("guideModule",!0),o){case null:m(!0);break;case"author":Object(c.e)(!0);break;case"map":Object(d.g)(!0);break;case"waypoint":Object(u.d)(!0);break;case"trajectory":h(!0);break;case"more":v(!0)}t("guide")})},e.n=m,e.p=function(t){if(t===r.a.state.authorizationPassword){r.a.commit("switchAutherModule",!1),r.a.commit("userRole","Administrator");var e=window.localStorage;e.setItem("authorizationPassword",t),e.setItem("role","Administrator"),e.setItem("guideName","author"),m(!1);var a=window.localStorage.getItem("guide");return a||Object(c.e)(!0),!0}if(t===r.a.state.developAuthorization){r.a.commit("switchAutherModule",!1),r.a.commit("userRole","developer");var e=window.localStorage;e.setItem("authorizationPassword",t),e.setItem("role","developer"),e.setItem("guideName","author"),m(!1);var o=window.localStorage.getItem("guide");return o||Object(c.e)(!0),!0}Object(n.Notification)({title:s.default.$t("titles.error"),message:s.default.$t("messages.pswError"),type:"error",position:"top-left",offset:100});var e=window.localStorage;return e.removeItem("authorizationPassword"),!1},e.o=h,e.d=function(){r.a.commit("switchMoreBtns",!0),window.localStorage.setItem("guide",!0),v(!1)},e.h=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new i.a(function(e,a){if(t){var o=null;l.a.topic.globalPathTopic.subscribe(function(t){null!=o&&l.c.scene.removeChild(o),t.poses.length>0&&(o=new ROS2D.PathShape({path:t,strokeSize:.17,strokeColor:createjs.Graphics.getRGB(69,182,69,.9)}),l.a.globalPlanStage=o,l.c.scene.addChild(o))})}else l.a.topic.globalPathTopic.unsubscribe(),l.c.scene.removeChild(l.a.globalPlanStage);e()})},e.q=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new i.a(function(e,a){if(t){var o=null;l.a.topic.tabLocalPathTopic.subscribe(function(t){null!=o&&l.c.scene.removeChild(o),t.poses.length>0&&(o=new ROS2D.PathShape({path:t,strokeSize:.17,strokeColor:createjs.Graphics.getRGB(245,108,108,.9)}),l.a.tabLocalPlanStage=o,l.c.scene.addChild(o))})}else l.a.topic.tabLocalPathTopic.unsubscribe(),l.c.scene.removeChild(l.a.tabLocalPlanStage);e("local plan")})},e.g=function(t,e){t?l.a.topic.laserScanTopic.subscribe(function(t){l.a.laserScanMsg=t,l.a.laserScanStage&&l.c.scene.removeChild(l.a.laserScanStage);var e={x:l.a.tfMsg.map2base_laser.transform.translation.x,y:-l.a.tfMsg.map2base_laser.transform.translation.y,rotation:l.c.scene.rosQuaternionToGlobalTheta(l.a.tfMsg.map2base_laser.transform.rotation)};l.a.laserScanPose=e;for(var a=[],o=0;o<t.ranges.length;o+=10)if(!("inf"===t.ranges[o]||"nan"===t.ranges[o]||t.ranges[o]<t.range_min||t.ranges[o]>t.range_max)){var i=t.angle_min+t.angle_increment*o,s=e.rotation/180*Math.PI,n=-i+s,r=Math.cos(n)*t.ranges[o],c=Math.sin(n)*t.ranges[o],d=e.x+r,u=e.y+c;a.push({x:d,y:u})}l.a.laserScanStage=function(t,e){var a=new createjs.Container,o=createjs.Graphics.getRGB(255,153,0,1),i=new createjs.Graphics;i.beginFill(o);for(var s=0;s<t.length;s++){var n=t[s];i.moveTo(n.x,n.y),i.drawCircle(n.x,n.y,.05)}i.endFill();var r=new createjs.Shape(i);return a.addChild(r),a}(a),l.c.scene.addChild(l.a.laserScanStage)}):(l.a.topic.laserScanTopic.unsubscribe(),l.c.scene.removeChild(l.a.laserScanStage))},e.f=function(t){t?l.a.topic.footprintTopic.subscribe(function(t){l.a.footprintStage&&l.c.scene.removeChild(l.a.footprintStage),l.a.footprintStage=function(t,e){var a=new createjs.Container;if(t.polygon.points.length<3)return a;var o=e.strokeSize||.05,i=e.strokeColor||createjs.Graphics.getRGB(0,255,0,1),s=new createjs.Graphics;s.setStrokeStyle(o),s.beginStroke(i);var n=t.polygon.points[0],r=n;s.moveTo(n.x,-n.y);for(var l=1;l<t.polygon.points.length;l++)n=t.polygon.points[l],s.lineTo(n.x,-n.y),s.moveTo(n.x,-n.y);s.lineTo(r.x,-r.y),s.endStroke();var c=new createjs.Shape(s);return a.addChild(c),a}(t,{strokeColor:"#8bc34a"}),l.c.scene.addChild(l.a.footprintStage)}):(l.a.topic.footprintTopic.unsubscribe(),l.c.scene.removeChild(l.a.footprintStage))},e.b=function(){if(r.a.state.batteryState==PARAMS.butteryStatus.charging)return PARAMS.butteryStatus.chargingFlag=!0,void clearInterval(PARAMS.butteryStatus.timeoutObj);if(r.a.state.batteryState==PARAMS.butteryStatus.warning){if(PARAMS.butteryStatus.chargingFlag)return;PARAMS.butteryStatus.chargingFlag=!0,PARAMS.butteryStatus.timeoutObj=setInterval(function(){Object(n.Notification)({title:"警告",message:"电池电量过低，请及时充电。",type:"warning",position:"top-left",offset:100,duration:0})},PARAMS.butteryStatus.timeout)}},e.e=function(t,e){var a=null;return function(){var o=this,i=arguments;a&&(clearTimeout(a),a=null),a=setTimeout(function(){t.apply(o,i)},e)}},e.l=function(t){"success"==t.type&&Object(p.d)();Object(n.Notification)({title:t.title,message:t.message,type:t.type,position:"top-left",offset:100}),Object(n.Message)({message:t.message,type:t.type,center:!0,duration:0,showClose:!1,customClass:"bottomTaskStatus"})},e.c=function(t){return!/[`~!@#$%^&*()\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘'， 。、]/im.test(t)},e.a=function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},e.m=function(t,e){var a,o,i=t;e?(a=2*i.w*i.z,o=1-2*Math.pow(i.z,2)):(a=2*(i.w*i.z+i.x*i.y),o=1-2*(Math.pow(i.y,2)+Math.pow(i.z,2)));return Math.atan2(a,o)},e.j=function(t,e){var e=e||1e-4,a=0;for(var o in t)t.hasOwnProperty(o)&&(a+=t[o]*t[o]);return Math.abs(a-1)<e},e.r=function(t){return{x:0,y:0,z:Math.sin(t/2),w:Math.cos(t/2)}};var o=a("//Fk"),i=a.n(o),s=a("NHnr"),n=a("zL8q"),r=(a.n(n),a("IcnI")),l=a("dmop"),c=a("ITPp"),d=a("xrs3"),u=a("Lf+Q"),p=a("TSWK");function m(t){var e=window.localStorage.getItem("guide");t?(r.a.commit("switchAutherModule",!0),e||r.a.commit("guideIndex",0)):r.a.commit("switchAutherModule",!1)}function h(t){var e=window.localStorage.getItem("guide");t?(r.a.commit("guideEndModule",!0),e||r.a.commit("guideIndex",4)):r.a.commit("guideEndModule",!1)}function v(t){t||(h(!1),r.a.commit("guideModule",!1))}},TSWK:function(t,e,a){"use strict";e.e=function(t){t?n.a.commit("switchBranch",!0):n.a.commit("switchBranch",!1)},e.d=function(){var t=new ROSLIB.Message({seq:1,frame_id:i()({op:"dbparam",topic:"query",name:""})});l.a.topic.taskSwitchTopic.publish(t)},e.c=function(t){if(""==t)return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.nonEmpty"),type:"warning",position:"top-left",offset:100});if(!Object(d.c)(t))return void Object(r.Notification)({title:s.default.$t("titles.warning"),message:s.default.$t("messages.theNameUnavailable"),type:"warning",position:"top-left",offset:100});r.Loading.service({text:s.default.$t("loading")});var e={op:"dbparam",topic:"add",name:t},a=new ROSLIB.Message({seq:1,frame_id:i()(e)});return l.a.topic.taskSwitchTopic.publish(a),r.Loading.service().close(),!0},e.f=function(t){r.Loading.service({text:s.default.$t("inTheSwitch")});var e={op:"dbparam",topic:"select",name:t},a=new ROSLIB.Message({seq:1,frame_id:i()(e)});console.log(a),l.a.topic.taskSwitchTopic.publish(a),r.Loading.service().close()},e.a=function(t){r.Loading.service({text:s.default.$t("deleting")});var e={op:"dbparam",topic:"remove",name:t},a=new ROSLIB.Message({seq:1,frame_id:i()(e)});console.log(a),l.a.topic.taskSwitchTopic.publish(a),r.Loading.service().close()},e.b=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];var o=e[0],i=o.hardware_id,r=o.level,l=o.message;switch(console.log(e),i){case c.a.gitMethods.add:0===r?Object(d.l)({title:s.default.$t("titles.success"),message:s.default.$t("messages.addSuccess"),type:"success"}):1===r&&Object(d.l)({title:s.default.$t("titles.success"),message:l,type:"error"});break;case c.a.gitMethods.remove:0===r?Object(d.l)({title:s.default.$t("titles.success"),message:s.default.$t("messages.removeSuccess"),type:"success"}):1===r&&Object(d.l)({title:s.default.$t("titles.error"),message:l,type:"error"});break;case c.a.gitMethods.select:0===r?Object(d.l)({title:s.default.$t("titles.success"),message:s.default.$t("messages.checkoutSuccess"),type:"success"}):1===r&&Object(d.l)({title:s.default.$t("titles.error"),message:l,type:"error"});break;case c.a.gitMethods.query:if(0===r){var u=l.split(":");n.a.commit("mapList",u),n.a.commit("setNowMapName",u[0])}else 1===r&&Object(d.l)({title:s.default.$t("titles.error"),message:l,type:"error"})}};var o=a("mvHQ"),i=a.n(o),s=a("NHnr"),n=a("IcnI"),r=a("zL8q"),l=(a.n(r),a("dmop")),c=a("djuq"),d=a("RjI4")},Tjut:function(t,e){t.exports={language:{name:"english"},loading:"Loading...",inTheSave:"Saving...",inTheSwitch:"Switching...",deleting:"Deleting...",buttons:{continueMapping:"Continue Mapping",newMapping:"Mapping",newBranch:"New Branch",waypoint:"Waypoint",trajectory:"Trajectory",initialPose:"Itial Pose",plc:"PLC",wifi:"wifi",positionEstimate:"Position Estimate",laserScan:"Laser Scan",footprint:"Footprint",pathGlobal:"Path Global",pathLocal:"Path Local",volume:"Volume",update:"Update",help:"Help",uploadMap:"Upload map",downloadMap:"Download map",submit:"Submit",SaveAndContinue:"Save and continue",SaveAndClose:"Save and close",cancel:"Cancel",delete:"Delete",addWaypoint:"Add Waypoint",addTrajectory:"Add Trajectory",updateNow:"Update Now",restoration:"Restoration",joystick:"Joystick",permissions:"Permissions",confirm:"Confirm",guide:"Guide"},taskState:{taskState:"Task State",error:"The equipment is out of order. Please fix it first",exec:"Currently executable tasks",running:"Executing the current mission",pause:"The current mission has been suspended",completed:"The current mission is complete",canceled:"The current task has been cancelled"},titles:{volume:"Volume Control",authorization:"Set Authorization",map:"MAP",more:"More",waypointList:"waypoints",waypointDetail:"Waypoint Detail",waypointType:"Waypoint Type",waypointMode:"Waypoint Mode",scope:"Scope",timeout:"Timeout",position:"Position",pose:"Pose",success:"success",info:"info",warning:"warning",error:"error",addWaypoint:"Add Waypoint",waypointName:"Waypoint Name",pubSubVal:"The publish subscriber receives the value",deleteWaypoint:"Delete Waypoint",trajectoryList:"trajectorys",addTrajectory:"Add Trajectory",trajectoryName:"Trajectory Name",selectWaypoints:"Select Waypoints",trajectoryDetail:"Trajectory Detail",deleteTrajectory:"Delete Trajectory",softwareUpdate:"Software Update",networkSettings:"Network Settings",wifiName:"WIFI Name",wifiPsw:"Wifi Password",ipMask:"Submask",gateway:"Gateway",saveSettings:"Save Settings",update:"Software Update",branch:"Branch"},placeholder:{authorizationPsw:"Please enter the authorization password",mapName:"Please enter map name (optional)",waypointName:"Please enter a waypoint name",waypointType:"Please enter a waypoint type",waypointMode:"Select waypoint mode",frame_id:"Please enter a frame_id",pubSubVal:"Please enter the receive value",scope:"Please enter waypoint scope",timeout:"Please enter timeout",yaw:"Please enter yaw",content:"Please enter content",trajectoryName:"Please enter trajectory name",selectWaypoints:"Select Waypoints",wifiName:"Please enter wifi name",wifiPsw:"Please enter wifi password",wifiIP:"Please enter ip",ipMask:"Please enter Submask",gateway:"Please enter ip gateway"},messages:{cantDeleteMap:"The current map is in display status and cannot be deleted",navWaypoint:"Now navigate to the waypoint",QuaternionsNotLegal:"Quaternions are not legal",deleteWaypoint:"Whether to delete this site",navTrajectory:"Now navigate to the trajectory",deleteTrajectory:"Whether to delete this trajectory",connectNetwork:"Please confirm that the navigation board can connect to the network!",selectUpdateType:"Please select the update type",offline:"First place the dbparam-***.zip file in the PKG folder and then run the update script!",usbWill2:"Please insert the dbparam-***. Zip file in the u-root directory and insert it into the navigation board!",usbTransfer:"Please insert the openssh-***.zip file into the navigation board in the u-root directory first!",rosbridgeClosed:"Connection to websocket server closed.",rosbridgeError:"Error connecting to websocket server.",nowMapping:"The current state is the mapping state, please click save",saveSuccess:"Save successfully",notFindWaypoint:"Not found waypoint ",taskCanceled:"The current task has been canceled",tasksBeing:"Other tasks are being performed and the current command will be ignored",waypointUnavailable:"Waypoint unavailable",robotPoseUnavailable:"Unable to obtain current robot posture",waypointNotValid:"The waypoint name is not valid",theNameUnavailable:"The name is not valid",waypointExists:"The waypoint name already exists",waypointWithTrajectoryExists:"This name repeats with the trace name",frame_id:"Please enter a frame_id",waypointModeNotValid:"Waypoint mode is not valid",waypointAddSuccess:"Waypoint add success",WaypointDelSuccess:"Waypoint deletion successful",noTrajectory:"No track, please add track first",trajectoryDelSuccess:"Track deletion successful",refineTrajecName:"Please refine the track name",minSelectWaypoint:"Please select at least one site",trajectoryExists:"The trace name already exists",notFindTrajectory:"Not Find trajectory",trajectoryWithWaypointExists:"This name repeats with the trajectory name",trajectoryAddSuccess:"Track added successfully",pswError:"Password error, please reenter",wifiNameOrPswUnavailable:"Wifi name or password is not valid",ipUnavailable:"IP unavailable",ipUnavailableIos:"IOS IP last bit is between 2 and 20",ipMaskUnavailable:"Submask is not valid",gatewayUnavailable:"Gateway is not valid",beingDeveloped:"Being developed...",notPermission:"No operation permission, please enter the authorization password",updateSuccess:"Update successfully",updateError:"Update failed",addSuccess:"Added successfully",checkoutSuccess:"Checkout successfully",removeSuccess:"Remove successfully",initialPoseTios:"Please click the map and drag the dots to locate the robot",nonEmpty:"None-Empty"},waypointsType:{goal:"目标站点",dock:"充电桩",timer:"计时器",publisher:"发布器",subscriber:"订阅器",looper:"循环",pubsuber:"发布-订阅器",maximumSpeedSetting:"最大速度设置",speedPublisher:"速度发布器",commandPublisher:"命令发布器",soundPlay:"声音播放",initialPose:"初始位置",chargingPosition:"充电桩定位",shellCommand:"Shell命令",once:"单次",repeatedly:"多次",play:"播放",stop:"停止",playOnce:"播放一次"},updates:{online:"Automatic online update",offline:"Offline local update",usbWill2:"Usb flash drive will 2 upgrade pack",usbTransfer:"Usb flash drive installation file transfer package"},butteryStatus:{charging:"charging",lowPower:"low power"}}},UdFO:function(t,e){},XfkG:function(t,e){},Z6Zb:function(t,e){},blFy:function(t,e){},djuq:function(t,e,a){"use strict";a.d(e,"a",function(){return o});var o={NavCtrl:{stop:0,start:1,pause:2},NavCtrlStatus:{error:-1,idling:0,running:1,paused:2,completed:3,cancelled:4},rosMode:{navigation:"navigation",gmapping:"gmapping"},NetworkMode:{ap:"ap",wifi:"wifi"},gitMethods:{add:"add",remove:"remove",select:"select",query:"query"},POSE:{poseStartPoint:null,editContainer:null,poseStartPointShape:null},butteryStatus:{charging:"charging",success:"success",warning:"warning",timeout:6e4,timeoutObj:null,chargingFlag:!1},joystickObj:{up:!1,down:!1,left:!1,right:!1,upTimeout:null,downTimeout:null,leftTimeout:null,rightTimeout:null,upTime:0,downTime:0,leftTime:0,rightTime:0,maxSpeed:.4},connecting:!1,connectFlg:!1,reconnectSettimeout:null,timeout:3e3}},dmop:function(t,e,a){"use strict";a.d(e,"b",function(){return o}),a.d(e,"c",function(){return i}),a.d(e,"d",function(){return s}),a.d(e,"a",function(){return M});var o,i,s,n=a("Xxa5"),r=a.n(n),l=a("exGp"),c=a.n(l),d=a("woOf"),u=a.n(d),p=a("//Fk"),m=a.n(p),h=a("C4MV"),v=a.n(h),w=a("NHnr"),f=a("IcnI"),g=a("zL8q"),b=(a.n(g),a("RjI4")),y=a("djuq"),_=a("TSWK"),S=a("ITPp"),C=a("xrs3"),j=a("Pqsl"),M=(a.n(j),new x);function x(){}function k(){return new m.a(function(t,e){(o=new ROSLIB.Ros({url:"ws://"+j.ip+":9090",groovyCompatibility:!0})).on("connection",function(){console.log("[INFO]Connected to rosbridge "+j.ip+"."),t("ros Connected"),y.a.connecting=!0,clearTimeout(y.a.reconnectSettimeout),y.a.connectFlg&&window.location.reload()}),o.on("close",function(){console.log("[INFO]Rosbridge server "+j.ip+" closed."),Object(g.Notification)({title:w.default.$t("titles.error"),message:w.default.$t("messages.rosbridgeClosed"),type:"error",position:"top-left",offset:100}),e("Rosbridge连接已关闭"),y.a.connecting=!1,T()}),o.on("error",function(){Object(g.Notification)({title:w.default.$t("titles.error"),message:w.default.$t("messages.rosbridgeError"),type:"error",position:"top-left",offset:100}),console.log("[INFO] rosbridge error"),e("Rosbridge连接失败"),y.a.connecting=!1,T()}),"developer"===window.localStorage.getItem("role")&&f.a.commit("userRole","developer"),"Administrator"===window.localStorage.getItem("role")&&f.a.commit("userRole","Administrator")})}function T(){y.a.connectFlg=!0,y.a.connecting||(y.a.reconnectSettimeout&&clearTimeout(y.a.reconnectSettimeout),y.a.reconnectSettimeout=setTimeout(function(){k()},y.a.timeout))}function O(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];console.log(e),g.Loading.service().close()}x.prototype.register=function(t,e,a){if(!this.hasOwnProperty(t)){var o=a.fnGet||function(){return e},i=a.fnSet||function(){};v()(this,t,{get:o,set:function(t){!function(t){t!==e&&(e=t.hasOwnProperty("property")?t.value:t)}(t),i(t)}})}},x.prototype.syncToLocalStorage=function(){},$(function(){var t,e=(t=c()(r.a.mark(function t(){var e,a,n,l,c,d,p,h,v;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new m.a(function(t,e){M.register("topic",{},{}),M.register("tfMsg",{},{}),M.register("cmdStringTopic",{},{}),M.register("mapMsg",{},{}),M.register("mapInfo",null,{}),M.register("navCtrlStatus",null,{}),M.register("mapStage",null,{}),M.register("wayPointsMsg",{},{}),M.register("robotPoseMsg",{},{}),M.register("robotStage",{},{}),M.register("waypointsMessage",{},{}),M.register("waypointsStage",{},{}),M.register("mapXY",{},{}),M.register("imgMapStage",{},{}),M.register("laserScanStage",{},{}),M.register("laserScanPose",{},{}),M.register("footprintStage",{},{}),M.register("globalPlanStage",{},{}),M.register("tabLocalPlanStage",{},{}),M.register("taskState",{},{}),M.register("initialPoseStage",{},{}),t("register OBJ")});case 3:return e=t.sent,t.next=6,k();case 6:return a=t.sent,t.next=9,Object(b.k)();case 9:return n=t.sent,t.next=12,new m.a(function(t,e){var a=new ROSLIB.Topic({ros:o,name:"/nav_ctrl_status",messageType:"yocs_msgs/NavigationControlStatus"});M.topic.navCtrlStatusTopic=a;var i="info",s="";a.subscribe(function(t){M.navCtrlStatus=t,f.a.commit("setNavControlStatus",t.status),-1===t.status?(i="error",s=w.default.$t("taskState.error")):0===t.status?(i="info",s=w.default.$t("taskState.exec")):1===t.status?(i="info",s=w.default.$t("taskState.running")+t.waypoint_name):2===t.status?(i="info",s=w.default.$t("taskState.pause")+t.waypoint_name):3===t.status?(i="success",s=w.default.$t("taskState.completed")+t.waypoint_name):4===t.status&&(i="success",s=w.default.$t("taskState.canceled")+t.waypoint_name),Object(g.Message)({message:s,type:i,center:!0,duration:0,showClose:!1,customClass:"bottomTaskStatus"})});var n=new ROSLIB.Topic({ros:o,name:"/map_stream",messageType:"scheduling_msgs/MapStream"});M.topic.mapTopic=n;var r=new ROSLIB.Topic({ros:o,name:"/map_edit_stream",messageType:"scheduling_msgs/MapStream"});M.topic.mapEditTopic=r;var l=new ROSLIB.Topic({ros:o,name:"/map_stream_new",messageType:"scheduling_msgs/MapStream"});M.topic.uploadMapTopic=l;var c=new ROSLIB.Topic({ros:o,name:"/map_edit_stream_new",messageType:"scheduling_msgs/MapStream"});M.topic.uploadMapEditTopic=c;var d=new ROSLIB.Topic({ros:o,name:"/map_metadata",messageType:"nav_msgs/MapMetaData"});M.topic.MapMetaDataTopic=d;var p=new ROSLIB.Topic({ros:o,name:"/waypoints",messageType:"yocs_msgs/WaypointList"});M.topic.wpTopic=p;var m=new ROSLIB.Topic({ros:o,name:"/robot_pose",messageType:"geometry_msgs/Pose",throttle_rate:100});M.topic.robotPoseTopic=m,m.subscribe(function(t){M.robotPoseMsg=t});var h=new ROSLIB.Topic({ros:o,name:"/initialpose",messageType:"geometry_msgs/PoseWithCovarianceStamped"});M.topic.initialPoseTopic=h;var v=new ROSLIB.Topic({ros:o,name:"/trajectories",messageType:"yocs_msgs/TrajectoryList"});M.topic.trajectoriesTopic=v,v.subscribe(function(t){f.a.commit("trajectoryList",t.trajectories)});var S=new ROSLIB.Topic({ros:o,name:"/move_base/GlobalPlanner/plan",messageType:"nav_msgs/Path"});M.topic.globalPathTopic=S;var C=new ROSLIB.Topic({ros:o,name:"/move_base/TebLocalPlannerROS/local_plan",messageType:"nav_msgs/Path"});M.topic.tabLocalPathTopic=C;var j=new ROSLIB.Topic({ros:o,name:"/task_state",messageType:"diagnostic_msgs/DiagnosticStatus"});M.topic.rosModeTopic=j,j.subscribe(function(t){t.values.map(function(t,e){if("auto_charge"===t.key)switch(f.a.commit("chargeStatus",t.value),t.value){case"0":f.a.commit("switchBatteryStatus",!1);break;case"1":f.a.commit("switchBatteryStatus",!0)}else"cartographer"===t.key&&(M.taskState=t.value,"0"===t.value?f.a.commit("setRosMode",y.a.rosMode.navigation):"1"===t.value&&f.a.commit("setRosMode",y.a.rosMode.gmapping))})});var x=new ROSLIB.Topic({ros:o,name:"/battery",messageType:"sensor_msgs/BatteryState"});M.topic.butteryTopic=x,x.subscribe(function(t){if(t.percentage){var e=Math.round(100*t.percentage);0<=e<=100&&(e<=15?f.a.state.batteryStatus?(f.a.commit("batteryState",y.a.butteryStatus.charging),Object(b.b)()):(f.a.commit("batteryState",y.a.butteryStatus.warning),Object(b.b)()):f.a.state.batteryStatus?f.a.commit("batteryState",y.a.butteryStatus.charging):f.a.commit("batteryState",y.a.butteryStatus.success),f.a.commit("subButtery",e),f.a.commit("showBattery",!0))}});var k=new ROSLIB.Topic({ros:o,name:"/scan_rectified",messageType:"sensor_msgs/LaserScan",throttle_rate:200});M.topic.laserScanTopic=k;var T=new ROSLIB.Topic({ros:o,name:"/move_base/global_costmap/footprint",messageType:"geometry_msgs/PolygonStamped"});M.topic.footprintTopic=T;var O=new ROSLIB.Topic({ros:o,name:"/nav_ctrl",messageType:"yocs_msgs/NavigationControl"});M.topic.navCtrlTopic=O;var $=new ROSLIB.Topic({ros:o,name:"/waypoint_add",messageType:"yocs_msgs/Waypoint"});M.topic.addWaypointTopic=$;var F=new ROSLIB.Topic({ros:o,name:"/waypoint_remove",messageType:"yocs_msgs/Waypoint"});M.topic.delWaypointTopic=F;var I=new ROSLIB.Topic({ros:o,name:"/trajectory_add",messageType:"yocs_msgs/Trajectory"});M.topic.addTrajectoryTopic=I;var N=new ROSLIB.Topic({ros:o,name:"/trajectory_remove",messageType:"yocs_msgs/Trajectory"});M.topic.delTrajTopic=N;var P=new ROSLIB.Topic({ros:o,name:"/task_switch",messageType:"std_msgs/Header"});M.topic.taskSwitchTopic=P,P.subscribe(function(t){if(t.frame_id.startsWith("update_response"))switch(t.seq){case 1:g.Loading.service().close(),Object(g.Notification)({title:w.default.$t("titles.success"),message:w.default.$t("messages.updateSuccess")+",请重启系统",type:"success",position:"top-left",offset:100}),Object(g.Message)({message:w.default.$t("messages.updateSuccess"),type:"success",center:!0,duration:0,showClose:!1,customClass:"bottomTaskStatus"});break;case 0:g.Loading.service().close(),Object(g.Notification)({title:w.default.$t("titles.error"),message:t.frame_id.replace(/update_response_/,""),type:"error",position:"top-left",offset:100}),Object(g.Message)({message:w.default.$t("messages.updateError")+"失败原因："+t.frame_id.replace(/update_response_/,""),type:"error",center:!0,duration:0,showClose:!1,customClass:"bottomTaskStatus"})}}),Object(_.d)();var B={};new ROSLIB.Topic({ros:o,name:"/diagnostics_agg",messageType:"diagnostic_msgs/DiagnosticArray"}).subscribe(function(t){t.status.map(function(e,a){switch(e.name){case"/GIT/dbparam":u()(B,{ALGORITHM:t.status[a]}),Object(_.b)(e)}})});var L=new ROSLIB.Topic({ros:o,name:"/cmd_string",messageType:"std_msgs/String"});M.topic.cmdTopic=L;var R=new ROSLIB.Topic({ros:o,name:"/cmd_vel",messageType:"geometry_msgs/Twist"});M.topic.cmdVelTopic=R;var D=new ROSLIB.Topic({ros:o,name:"/cmd_string",messageType:"std_msgs/String"});M.topic.updateTopic=D;var W=new ROSLIB.Topic({ros:o,name:"/shell_string",messageType:"std_msgs/String"});M.topic.netWorkTopic=W,t("init topics")});case 12:return l=t.sent,t.next=15,new m.a(function(t,e){var a=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,o=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,n=a/o,r=a,l=o;a>o?(r=o*n,l=o):(r=a,l=a/n),M.mapInfo={windowWidth:r,windowHeight:l},i=new ROS2D.Viewer({divID:"mapNavDiv",width:M.mapInfo.windowWidth,height:M.mapInfo.windowHeight}),s=new ROS2D.ZoomView({rootObject:i.scene});var c=i.scene;createjs.Touch.enable(c),createjs.Ticker.setFPS(25),c.enableMouseOver(10),createjs.Touch.enable(c),c.mouseMoveOutside=!0,c.on("mousedown",function(t){f.a.state.disabledMoveMap||(t.currentTarget.offset={x:this.x-t.stageX,y:this.y-t.stageY})}),c.on("pressmove",function(t){f.a.state.disabledMoveMap||(t.currentTarget.x=t.stageX+t.currentTarget.offset.x,t.currentTarget.y=t.stageY+t.currentTarget.offset.y,c.update())}),c.update(),createjs.Ticker.addEventListener("tick",function(){c.update()}),t("initStage success")});case 15:return c=t.sent,t.next=18,Object(S.b)();case 18:return d=t.sent,t.next=21,Object(C.e)();case 21:return p=t.sent,t.next=24,Object(b.q)();case 24:return h=t.sent,t.next=27,Object(b.i)();case 27:v=t.sent,O(e,a,n,l,c,d,p,h,v),t.next=35;break;case 31:t.prev=31,t.t0=t.catch(0),g.Loading.service().close(),console.log(t.t0);case 35:case"end":return t.stop()}},t,this,[[0,31]])})),function(){return t.apply(this,arguments)});g.Loading.service({text:w.default.$t("loading")}),e()})},eMBl:function(t,e){},iLdF:function(t,e){},jcZh:function(t,e){},kXP9:function(t,e){},p9le:function(t,e){t.exports={language:{name:"中文"},loading:"加载中...",inTheSave:"保存中...",inTheSwitch:"切换中...",deleting:"删除中...",buttons:{continueMapping:"继续建图",newMapping:"建图",newBranch:"新建分支",waypoint:"站点",trajectory:"轨迹",laserScan:"激光",initialPose:"手动定位",plc:"PLC",wifi:"WIFI设置",positionEstimate:"位置估计",footprint:"机器轮廓",pathGlobal:"全局路径",pathLocal:"局部路径",volume:"音量",update:"更新",help:"帮助",uploadMap:"上传地图",downloadMap:"下载地图",submit:"提交",SaveAndContinue:"保存并继续",SaveAndClose:"保存并关闭",cancel:"取消",delete:"删除",addWaypoint:"添加站点",addTrajectory:"添加轨迹",updateNow:"立即更新",restoration:"复位",joystick:"操纵杆",permissions:"设置权限",confirm:"确认",guide:"引导"},taskState:{taskState:"任务状态",error:"设备故障，请先排除故障",exec:"当前可执行任务",running:"正在执行当前任务",pause:"已暂停当前任务",completed:"当前任务已完成",canceled:"当前任务已取消"},titles:{volume:"音量调节",authorization:"设置权限",map:"地图",more:"更多",waypointList:"站点列表",waypointDetail:"站点详情",waypointType:"站点类型",waypointMode:"站点模式",scope:"范围",timeout:"超时时间",position:"位置",pose:"姿态",success:"成功",info:"提示",warning:"警告",error:"错误",addWaypoint:"添加站点",waypointName:"站点名称",pubSubVal:"发布-订阅器接收值",deleteWaypoint:"删除站点",trajectoryList:"轨迹列表",addTrajectory:"添加轨迹",trajectoryName:"轨迹名称",selectWaypoints:"选择站点",trajectoryDetail:"轨迹详情",deleteTrajectory:"删除轨迹",softwareUpdate:"软件更新",networkSettings:"网络设置",wifiName:"Wifi名称",wifiPsw:"Wifi密码",ipMask:"子掩码",gateway:"网关",saveSettings:"保存设置",update:"软件更新",branch:"分支"},placeholder:{authorizationPsw:"请输入授权密码",mapName:"请输入地图名称（可选）",waypointName:"请输入站点名称",waypointType:"请选择站点类型",waypointMode:"请选择站点模式",frame_id:"请输入frame_id",pubSubVal:"请输入接收值",scope:"请输入站点范围",timeout:"请输入超时时间",yaw:"请输入Yaw",content:"请输入内容",trajectoryName:"请输入轨迹名称",selectWaypoints:"请选择站点",wifiName:"请输入WIFI名称",wifiPsw:"请输入Wifi密码",wifiIP:"请输入IP",ipMask:"请输入子掩码",gateway:"请输入网关"},messages:{cantDeleteMap:"当前地图为显示状态，不能删除",navWaypoint:"现在开始导航至站点",QuaternionsNotLegal:"四元数不合法",deleteWaypoint:"是否删除这个站点",navTrajectory:"现在开始导航至轨迹",deleteTrajectory:"是否删除这个轨迹",connectNetwork:"请确认导航板可以连接网络！",selectUpdateType:"请选择更新类型",offline:"请先把dbparam-***.zip文件放置在pkg文件夹中，然后运行update脚本！",usbWill2:"请先把dbparam-***.zip文件放置在U盘根目录下插入导航板！",usbTransfer:"请先把openssh-***.zip文件放置在U盘根目录下插入导航板！",rosbridgeClosed:"Rosbridge连接已关闭",rosbridgeError:"Rosbridge连接失败",nowMapping:"当前状态为建图状态，请点击保存",saveSuccess:"保存成功",notFindWaypoint:"没有找到站点 ",taskCanceled:"已取消当前任务",tasksBeing:"正在执行其他任务，当前命令将被忽略",waypointUnavailable:"站点不可用",robotPoseUnavailable:"无法获取当前机器人姿态",waypointNotValid:"站点名称不合法",theNameUnavailable:"该名称不合法",waypointExists:"该站点名称已存在",waypointWithTrajectoryExists:"该名称与轨迹名称重复",frame_id:"请输入frame_id",waypointModeNotValid:"站点模式不合法",waypointAddSuccess:"站点添加成功",WaypointDelSuccess:"站点删除成功",noTrajectory:"暂无轨迹，请先添加轨迹",trajectoryDelSuccess:"轨迹删除成功",refineTrajecName:"请完善轨迹名称",minSelectWaypoint:"请至少选择一个站点",trajectoryExists:"该轨迹名称已存在",notFindTrajectory:"没有找到轨迹",trajectoryWithWaypointExists:"该名称与站点名称重复",trajectoryAddSuccess:"轨迹添加成功",pswError:"密码错误，请重新输入",wifiNameOrPswUnavailable:"wifi名称或密码不合法",ipUnavailable:"ip不合法",ipUnavailableIos:"IOS IP最后一位取值在2~20之间",ipMaskUnavailable:"子掩码不合法",gatewayUnavailable:"网关不合法",beingDeveloped:"正在开发中...",notPermission:"暂无操作权限，请输入授权密码",updateSuccess:"更新成功",updateError:"更新失败",addSuccess:"添加成功",checkoutSuccess:"切换成功",removeSuccess:"删除成功",initialPoseTios:"请点击地图并拖动圆点对机器人进行定位",nonEmpty:"内容不能为空"},waypointsType:{goal:"目标站点",dock:"充电桩",timer:"计时器",publisher:"发布器",subscriber:"订阅器",looper:"循环",pubsuber:"发布-订阅器",maximumSpeedSetting:"最大速度设置",speedPublisher:"速度发布器",commandPublisher:"命令发布器",soundPlay:"声音播放",initialPose:"初始位置",chargingPosition:"充电桩定位",shellCommand:"Shell命令",once:"单次",repeatedly:"多次",play:"播放",stop:"停止",playOnce:"播放一次"},updates:{online:"在线自动更新",offline:"离线本地更新",usbWill2:"U盘威尔2升级包",usbTransfer:"U盘安装文件传输包"},butteryStatus:{charging:"充电中",lowPower:"电量低"}}},pDaU:function(t,e,a){"use strict";e.c=function(){return new i.a(function(t,e){l.a.robotStage&&l.c.scene.removeChild(l.a.robotStage);var a=new ROS2D.NavigationArrow({size:20,strokeSize:1,fillColor:createjs.Graphics.getRGB(255,255,153,.66),pulse:!0});a.visible=!1,l.c.scene.addChild(a);var o=!1;l.a.topic.robotPoseTopic.subscribe(function(e){l.a.robotPose=e,a.x=e.position.x,a.y=-e.position.y,o||(a.scaleX=1/l.c.scene.scaleX,a.scaleY=1/l.c.scene.scaleY,o=!0),a.rotation=l.c.scene.rosQuaternionToGlobalTheta(e.orientation),a.visible=!0,l.a.robotStage=a,t()})})},e.a=function(){l.c.scene.x=l.a.mapXY.x+l.a.robotStage.x,l.c.scene.y=l.a.mapXY.y+l.a.robotStage.y},e.b=function(){Object(r.Notification)({title:s.default.$t("titles.info"),message:s.default.$t("messages.initialPoseTios"),type:"info",position:"top-left",offset:100}),n.a.commit("switchMoveMap",!0);var t=null,e=null,a=!1,o=null,i=new ROS2D.PolygonMarker({lineColor:createjs.Graphics.getRGB(100,100,255,1),lineSize:.1,pointSize:.2,pointCallBack:function(t,e,s){"mousedown"===t&&(!0===e.nativeEvent.shiftKey?i.remPoint(s):o=s);a=!0},lineCallBack:function(t,e,o){"mousedown"===t&&!0===e.nativeEvent.ctrlKey&&i.splitLine(o);a=!0}});l.c.scene.addChild(i),l.c.scene.mouseMoveOutside=!1,l.c.scene.addEventListener("stagemousemove",function(a){if(null!==o){var s=l.c.scene.globalToRos(a.stageX,a.stageY);i.movePoint(o,s),0==o?t=l.c.scene.globalToRos(a.stageX,a.stageY):1==o&&(e=l.c.scene.globalToRos(a.stageX,a.stageY)),d({startPose:t,endPose:e,polygon:i})}}),l.c.scene.addEventListener("stagemouseup",function(s){var n=i.pointContainer.getNumChildren()+1;if(null!==o&&(o=null),!0===l.c.scene.mouseInBounds&&!1===a){if(1==n)t=l.c.scene.globalToRos(s.stageX,s.stageY);else{if(2!=n)return;e=l.c.scene.globalToRos(s.stageX,s.stageY),d({startPose:t,endPose:e,polygon:i})}var r=l.c.scene.globalToRos(s.stageX,s.stageY);i.addPoint(r)}a=!1})};var o=a("//Fk"),i=a.n(o),s=a("NHnr"),n=a("IcnI"),r=a("zL8q"),l=(a.n(r),a("dmop")),c=a("RjI4");var d=Object(c.e)(function(t){var e=t.startPose,a=t.endPose,o=t.polygon;l.a.initialPoseStage=o;var i=e.x-a.x,s=e.y-a.y,n=Math.atan2(i,s);n>=0&&n<=Math.PI?n+=3*Math.PI/2:n-=Math.PI/2,n+=Math.PI;for(var r=Math.sin(-n/2),c=Math.cos(-n/2),d=new ROSLIB.Quaternion({x:0,y:0,z:r,w:c}),p=[],m=0;m<36;m++)p[m]=0;p[0]=.25,p[7]=.25,p[35]=Math.pow(Math.PI/12,2);var h=new ROSLIB.Message({header:{seq:0,frame_id:"map"},pose:{pose:{position:e,orientation:d},covariance:p}});l.a.topic.initialPoseTopic.publish(h),u()},500),u=Object(c.e)(function(){l.c.scene.removeChild(l.a.initialPoseStage),n.a.commit("switchMoveMap",!1)},5e3)},qrRd:function(t,e,a){"use strict";var o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"electricityBox flex"},[e("div",{staticClass:"progressBox"},[e("el-progress",{attrs:{percentage:this.percentage,color:this.customColor}})],1)])},staticRenderFns:[]};var i=a("VU/8")({name:"electricity",components:{},data:function(){return{percentage:this.$store.state.battery,customColor:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}]}},mounted:function(){},methods:{},watch:{"$store.state.battery":function(t){this.percentage=t}}},o,!1,function(t){a("Q2pe")},"data-v-38efa67b",null);e.a=i.exports},rFWt:function(t,e,a){"use strict";e.f=function(){l({linear:0,angular:0}),r("",0),Object(i.Notification)({title:o.default.$t("titles.success"),message:o.default.$t("messages.taskCanceled"),type:"success",position:"top-left",offset:100})},e.d=function(t){r(t,1)},e.c=r,e.b=function(t){switch(t){case"up":if(n.a.joystickObj.up=!0,n.a.joystickObj.up&&n.a.joystickObj.down)return void l({linear:0,angular:0});n.a.joystickObj.upTimeout=setInterval(function(){n.a.joystickObj.upTime+=.05,n.a.joystickObj.upTime>=n.a.joystickObj.maxSpeed&&(n.a.joystickObj.upTime=n.a.joystickObj.maxSpeed),n.a.joystickObj.left?l({linear:n.a.joystickObj.upTime,angular:n.a.joystickObj.leftTime}):n.a.joystickObj.right?l({linear:n.a.joystickObj.upTime,angular:-n.a.joystickObj.rightTime}):l({linear:n.a.joystickObj.upTime})},400);break;case"down":if(n.a.joystickObj.down=!0,n.a.joystickObj.up&&n.a.joystickObj.down)return void l({linear:0,angular:0});n.a.joystickObj.downTimeout=setInterval(function(){n.a.joystickObj.downTime+=.05,n.a.joystickObj.downTime>=n.a.joystickObj.maxSpeed&&(n.a.joystickObj.downTime=n.a.joystickObj.maxSpeed),n.a.joystickObj.left?l({linear:-n.a.joystickObj.downTime,angular:n.a.joystickObj.leftTime}):n.a.joystickObj.right?l({linear:-n.a.joystickObj.downTime,angular:-n.a.joystickObj.rightTime}):l({linear:-n.a.joystickObj.downTime})},400);break;case"left":if(n.a.joystickObj.left=!0,n.a.joystickObj.left&&n.a.joystickObj.right)return void l({linear:0,angular:0});n.a.joystickObj.leftTimeout=setInterval(function(){n.a.joystickObj.leftTime+=.05,n.a.joystickObj.leftTime>=n.a.joystickObj.maxSpeed&&(n.a.joystickObj.leftTime=n.a.joystickObj.maxSpeed),n.a.joystickObj.up?l({linear:n.a.joystickObj.upTime,angular:n.a.joystickObj.leftTime}):n.a.joystickObj.down?l({linear:-n.a.joystickObj.downTime,angular:n.a.joystickObj.leftTime}):l({angular:n.a.joystickObj.leftTime})},400);break;case"right":if(n.a.joystickObj.right=!0,n.a.joystickObj.left&&n.a.joystickObj.right)return void l({linear:0,angular:0});n.a.joystickObj.rightTimeout=setInterval(function(){n.a.joystickObj.rightTime+=.05,n.a.joystickObj.rightTime>=n.a.joystickObj.maxSpeed&&(n.a.joystickObj.rightTime=n.a.joystickObj.maxSpeed),n.a.joystickObj.up?l({linear:n.a.joystickObj.upTime,angular:-n.a.joystickObj.rightTime}):n.a.joystickObj.down?l({linear:-n.a.joystickObj.downTime,angular:-n.a.joystickObj.rightTime}):l({angular:-n.a.joystickObj.rightTime})},400)}},e.e=function(t){switch(t){case"up":n.a.joystickObj.upTime=0,n.a.joystickObj.up=!1,clearInterval(n.a.joystickObj.upTimeout),l({linear:n.a.joystickObj.upTime});break;case"down":n.a.joystickObj.downTime=0,n.a.joystickObj.down=!1,clearInterval(n.a.joystickObj.downTimeout),l({linear:n.a.joystickObj.downTime});break;case"left":n.a.joystickObj.leftTime=0,n.a.joystickObj.left=!1,clearInterval(n.a.joystickObj.leftTimeout),l({linear:n.a.joystickObj.leftTime});break;case"right":n.a.joystickObj.rightTime=0,n.a.joystickObj.right=!1,clearInterval(n.a.joystickObj.rightTimeout),l({linear:n.a.joystickObj.rightTime})}},e.a=l;var o=a("NHnr"),i=a("zL8q"),s=(a.n(i),a("dmop")),n=a("djuq");function r(t,e){var a=!1;if(!0===(arguments.length<=2?void 0:arguments[2])&&(a=!0),console.log("[INFO] navstatus "+s.a.navCtrlStatus.status),a||s.a.navCtrlStatus.status===n.a.NavCtrlStatus.idling||s.a.navCtrlStatus.status===n.a.NavCtrlStatus.cancelled||e!==n.a.NavCtrl.start){var r=new ROSLIB.Message({goal_name:t,control:e});s.a.topic.navCtrlTopic.publish(r)}else Object(i.Notification)({title:o.default.$t("titles.warning"),message:o.default.$t("messages.tasksBeing"),type:"warning",position:"top-left",offset:100})}function l(t){var e=t.linear||0,a=t.angular||0;console.log("linear_:"+e),console.log("angular_:"+a);var o=new ROSLIB.Message({linear:{x:e,y:0,z:0},angular:{x:0,y:0,z:a}});s.a.topic.cmdVelTopic.publish(o)}},tvR6:function(t,e){},vDjg:function(t,e){},wUZA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("qrRd"),i=a("IcnI"),s=a("RjI4"),n={name:"guide",components:{},data:function(){return{active:i.a.state.guideIndex}},mounted:function(){},methods:{next:function(){}},watch:{"$store.state.guideIndex":function(t){this.active=t}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topGuideBox"},[a("div",{staticClass:"guideBox flex"},[a("div",{staticClass:"guideItem",class:t.active>0?"userSel":"userNor"}),t._v(" "),a("div",{staticClass:"guideItem",class:t.active>1?"mapSel":"mapNor"}),t._v(" "),a("div",{staticClass:"guideItem",class:t.active>2?"waypointsSel":"waypointsNor"}),t._v(" "),a("div",{staticClass:"guideItem",class:t.active>3?"trcksSel":"trcksNor"}),t._v(" "),a("div",{staticClass:"guideItem",class:t.active>4?"moreSel":"moreNor"})]),t._v(" "),a("div",{staticClass:"stepsBox"},[a("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"权限"}}),t._v(" "),a("el-step",{attrs:{title:"地图"}}),t._v(" "),a("el-step",{attrs:{title:"站点"}}),t._v(" "),a("el-step",{attrs:{title:"轨迹"}}),t._v(" "),a("el-step",{attrs:{title:"更多"}})],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(n,r,!1,function(t){a("15OP")},"data-v-e1d8f124",null).exports,c=a("ITPp"),d=a("xrs3"),u=a("Lf+Q"),p={name:"previous",components:{},props:["param"],data:function(){return{name:""}},mounted:function(){},methods:{next:function(){switch(this.$store.commit("switchAutherModule",!1),this.$store.commit("switchEditMapBtns",!1),this.$store.commit("switchAddStation",!1),this.$store.commit("switchAddTrack",!1),this.param){case"authorization":Object(c.e)(!0);break;case"map":Object(d.g)(!0);break;case"waypoint":Object(u.d)(!0);break;case"trajectory":Object(s.o)(!0)}}},watch:{}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("el-button",{staticClass:"next",attrs:{type:"primary",size:"mini",icon:"el-icon-right"},on:{click:this.next}})],1)},staticRenderFns:[]};var h=a("VU/8")(p,m,!1,function(t){a("QQG7")},"data-v-1c5c3d5b",null).exports,v={name:"previous",components:{},data:function(){return{name:""}},props:["param"],mounted:function(){},methods:{previous:function(){this.$store.commit("switchAutherModule",!1),this.$store.commit("switchEditMapBtns",!1),this.$store.commit("switchAddStation",!1),this.$store.commit("switchAddTrack",!1);var t=this.param;"map"==t?Object(s.n)(!0):"waypoint"==t?Object(c.e)(!0):"trajectory"==t?Object(d.g)(!0):"end"==t&&Object(u.d)(!0)}},watch:{}},w={render:function(){var t=this.$createElement;return(this._self._c||t)("el-button",{staticClass:"previous",attrs:{type:"primary",size:"mini",icon:"el-icon-back"},on:{click:this.previous}})},staticRenderFns:[]};var f=a("VU/8")(v,w,!1,function(t){a("UdFO")},"data-v-064fd537",null).exports,g={name:"mapping",components:{next:h,previous:f},data:function(){return{drawer:this.$store.state.edipMapModule,direction:"btt",closable:!1,showClose:!1,mapName:null,mappingEnd:!0,name:"map"}},mounted:function(){window.localStorage.getItem("guide")},methods:{skipGuide:function(){this.drawer=!1,Object(s.d)()},newMappingBtn:function(){Object(c.c)(),this.mappingEnd=!1},continueMappingBtn:function(){Object(c.a)(),this.mappingEnd=!1},saveMapContinue:function(){Object(c.i)(this.mapName)},saveMapClose:function(){Object(c.h)(this.mapName)},closeDrawer:function(){this.$store.commit("switchEditMapBtns",!1),this.mappingEnd=!0}},watch:{"$store.state.edipMapModule":function(t){this.drawer=t},"$store.state.guideModule":function(t){}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.map"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"mappingBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.closable,expression:"!closable"}],staticClass:"flex skip",on:{click:t.skipGuide}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("跳过")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.closable,expression:"!closable"}]},[a("previous",{attrs:{param:t.name}}),t._v(" "),a("next",{attrs:{param:t.name}})],1),t._v(" "),a("div",{staticClass:"authorCom"},[t.mappingEnd?a("div",[a("div",{staticClass:"editItem flex"},[a("el-button",{staticClass:"editMapBtn",attrs:{"native-type":"button"},on:{click:t.newMappingBtn}},[t._v("新建地图")])],1),t._v(" "),a("div",{staticClass:"editItem flex"},[a("el-button",{staticClass:"editMapBtn",attrs:{"native-type":"button"},on:{click:t.continueMappingBtn}},[t._v("继续建图")])],1)]):a("div",[a("div",{staticClass:"tipBox"},[a("p",[t._v("请缓慢移动机器人增加地图数据，建图完成后先点击"),a("span",[t._v("“保存地图”")]),t._v("再点击"),a("span",[t._v("“关闭建图”")])]),t._v(" "),a("p",[t._v("建图结束之后请重启程序/小车")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"developer"===this.$store.state.userRole,expression:"this.$store.state.userRole === 'developer'"}],staticClass:" flex"},[a("el-input",{staticClass:"mapNameInp",attrs:{placeholder:this.$t("placeholder.mapName"),size:"medium",clearable:""},model:{value:t.mapName,callback:function(e){t.mapName=e},expression:"mapName"}})],1),t._v(" "),a("div",{staticClass:"editItem flex"},[a("el-button",{staticClass:"editMapBtn",attrs:{"native-type":"button"},on:{click:t.saveMapContinue}},[t._v(t._s(this.$t("buttons.SaveAndContinue")))])],1),t._v(" "),a("div",{staticClass:"editItem flex"},[a("el-button",{staticClass:"editMapBtn",attrs:{"native-type":"button"},on:{click:t.saveMapClose}},[t._v(t._s(this.$t("buttons.SaveAndClose")))])],1)])])])},staticRenderFns:[]};var y=a("VU/8")(g,b,!1,function(t){a("eMBl")},"data-v-0fdbc736",null).exports,_={name:"authorization",components:{},data:function(){return{drawer:this.$store.state.authorization,direction:"btt",closable:!1,showClose:!1,authorPassword:""}},mounted:function(){window.localStorage.getItem("guide")&&(this.closable=!0)},methods:{submitForm:function(t){Object(s.p)(this.authorPassword)},closeDrawer:function(){this.$store.commit("switchAutherModule",!1)}},watch:{"$store.state.authorization":function(t){this.drawer=t},"$store.state.guideModule":function(t){this.closable=!t}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("el-drawer",{attrs:{title:this.$t("titles.authorization"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.closable,expression:"!closable"}]}),t._v(" "),a("div",{staticClass:"authorPsw flex"},[a("el-input",{attrs:{"show-password":"",placeholder:this.$t("placeholder.authorizationPsw")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("ruleForm")}},model:{value:t.authorPassword,callback:function(e){t.authorPassword=e},expression:"authorPassword"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v(t._s(this.$t("buttons.submit")))])],1)])],1)},staticRenderFns:[]};var C=a("VU/8")(_,S,!1,function(t){a("blFy")},"data-v-512134a3",null).exports,j=a("rFWt");function M(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i.a.commit("switchDragModule",t)}var x={name:"dragComponent",components:{},data:function(){return{drawer:this.$store.state.showDragModule,direction:"btt",showClose:!1,isMobile:!1,up:!1,retreat:!1,left:!1,right:!1}},methods:{onMouseDown:function(t,e){console.log(t,e),e.preventDefault(),Object(j.b)(t)},onMouseUp:function(t,e){console.log(t,e),Object(j.e)(t)},upMouseDown:function(t,e){return this.clickCtrl(t),e.preventDefault(),!1},upMouseMove:function(t,e){return this.clickCtrl(t),e.preventDefault(),!1},clickCtrl:function(t){"up"===t?(this.up=!0,this.left?Object(j.a)({linear:.4,angular:.4}):this.right?Object(j.a)({linear:.4,angular:-.4}):Object(j.a)({linear:.4})):"retreat"===t?(this.retreat=!0,this.left?Object(j.a)({linear:-.4,angular:.4}):this.right?Object(j.a)({linear:-.4,angular:-.4}):Object(j.a)({linear:-.4})):"left"===t?(this.left=!0,this.up?Object(j.a)({linear:.4,angular:.4}):this.retreat?Object(j.a)({linear:-.4,angular:.4}):Object(j.a)({angular:.4})):(this.right=!0,this.up?Object(j.a)({linear:.4,angular:-.4}):this.retreat?Object(j.a)({linear:-.4,angular:-.4}):Object(j.a)({angular:-.4}))},upMouseEnd:function(t){"up"===t?(this.up=!1,this.left?Object(j.a)({linear:0,angular:.4}):this.right?Object(j.a)({linear:0,angular:-.4}):Object(j.a)({linear:0})):"retreat"===t?(this.retreat=!1,this.left?Object(j.a)({linear:0,angular:.4}):this.right?Object(j.a)({linear:0,angular:-.4}):Object(j.a)({linear:0})):"left"===t?(this.left=!1,this.up?Object(j.a)({linear:.4,angular:0}):this.retreat?Object(j.a)({linear:-.4,angular:0}):Object(j.a)({angular:0})):(this.right=!1,this.up?Object(j.a)({linear:.4,angular:0}):this.retreat?Object(j.a)({linear:-.4,angular:0}):Object(j.a)({angular:0}))},closeDrag:function(){M(!1)}},mounted:function(){Object(s.a)()?this.isMobile=!0:this.isMobile=!1},watch:{"$store.state.showDragModule":function(t){this.drawer=t}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dragBody"},[a("el-drawer",{attrs:{visible:t.drawer,"close-on-press-escape":!1,"custom-class":"dragBox",size:"40","show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrag}},[t.isMobile?a("div",{staticClass:"dragBody flex"},[a("div",{staticClass:"circleBox boxShadow flex"},[a("div",{staticClass:"itemBtn flex",on:{touchstart:function(e){return t.onMouseDown("up",e)},touchend:function(e){return t.onMouseUp("up",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-up",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex",on:{touchstart:function(e){return t.onMouseDown("right",e)},touchend:function(e){return t.onMouseUp("right",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-right",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex",on:{touchstart:function(e){return t.onMouseDown("left",e)},touchend:function(e){return t.onMouseUp("left",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-left",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex",on:{touchstart:function(e){return t.onMouseDown("down",e)},touchend:function(e){return t.onMouseUp("down",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-down",circle:""}})],1)])]):a("div",{staticClass:"dragBody flex"},[a("div",{staticClass:"circleBox boxShadow flex"},[a("div",{staticClass:"itemBtn flex",on:{mousedown:function(e){return t.onMouseDown("up",e)},mouseup:function(e){return t.onMouseUp("up",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-up",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex",on:{mousedown:function(e){return t.onMouseDown("right",e)},mouseup:function(e){return t.onMouseUp("right",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-right",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex",on:{mousedown:function(e){return t.onMouseDown("left",e)},mouseup:function(e){return t.onMouseUp("left",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-left",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex",on:{mousedown:function(e){return t.onMouseDown("down",e)},mouseup:function(e){return t.onMouseUp("down",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-down",circle:""}})],1)])])])],1)},staticRenderFns:[]};var T=a("VU/8")(x,k,!1,function(t){a("1onw")},"data-v-10bf081e",null).exports,O={name:"stationsComponent",components:{},data:function(){return{drawer:this.$store.state.waypointsModule,direction:"btt",closable:!0,showClose:!1,input:"",waypoints:[],waypointsList:[],develop:!1}},methods:{InputChange:function(){if(this.input)for(var t in this.waypoints=[],this.waypointsList)this.waypointsList[t].name.indexOf(this.input)>=0&&this.waypoints.push(this.waypointsList[t]);else this.waypoints=this.waypointsList},showStationDetailBtn:function(t){this.drawer=!1,Object(d.h)(!0,t)},delWaypointBtn:function(t){this.develop||(this.drawer=!1,this.$confirm("是否永久删除"+t+"站点?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,customClass:"delBranchCustom"}).then(function(){Object(d.a)(t)}).catch(function(){}))},addStation:function(){Object(d.i)(!1),Object(d.g)(!0)},closeDrawer:function(){Object(d.i)(!1)}},watch:{"$store.state.waypointsModule":function(t){this.drawer=t},"$store.state.stationList":function(t){this.waypoints=t,this.waypointsList=t},"$store.state.userRole":function(t){switch(t){case"developer":this.develop=!1;break;case"Administrator":this.develop=!0}}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.waypointList"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"waypointList",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"flex waypointsBox"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:this.$t("placeholder.waypointName"),clearable:""},on:{input:t.InputChange},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),t._l(t.waypoints,function(e,o){return a("div",{key:o,staticClass:"flex dignoseItem"},[a("div",{staticClass:"iconImg"}),t._v(" "),a("div",{staticClass:"name",on:{click:function(a){return t.showStationDetailBtn(e.name)}}},[t._v(t._s(e.name))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.develop,expression:"!develop"}],staticClass:"itemDel flex",on:{click:function(a){return t.delWaypointBtn(e.name)}}},[a("el-button",{attrs:{type:"text",disabled:t.develop}},[a("i",{staticClass:"el-icon-delete iconDel"})])],1)])}),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addStation}},[t._v(t._s(this.$t("buttons.addWaypoint")))])],1)],2)])},staticRenderFns:[]};var F=a("VU/8")(O,$,!1,function(t){a("67cn")},"data-v-dc7f7a04",null).exports,I={name:"waypointDetail",components:{},data:function(){return{drawer:this.$store.state.showWaypointDetail,direction:"btt",closable:!0,showClose:!1,edit:!1,showMore:!0,waypointForm:{name:"",stationType:[{value:"goal",label:this.$t("waypointsType.goal")},{value:"dock",label:this.$t("waypointsType.dock")},{value:"timer",label:this.$t("waypointsType.timer")},{value:"publisher",label:this.$t("waypointsType.publisher")},{value:"subscriber",label:this.$t("waypointsType.subscriber")},{value:"looper",label:this.$t("waypointsType.looper")},{value:"pubsuber",label:this.$t("waypointsType.pubsuber")},{value:"cmd_vel_set_sub",label:this.$t("waypointsType.maximumSpeedSetting")},{value:"cmd_vel",label:this.$t("waypointsType.speedPublisher")},{value:"shell",label:this.$t("waypointsType.commandPublisher")},{value:"sound_play",label:this.$t("waypointsType.soundPlay")},{value:"initial_pose",label:this.$t("waypointsType.initialPose")},{value:"scan_marker",label:this.$t("waypointsType.chargingPosition")},{value:"shell_string",label:this.$t("waypointsType.shellCommand")},{value:"pallet",label:"Pallet"},{value:"bias",label:"Bias"},{value:"call",label:"Call"},{value:"goto",label:"Goto"}],type:"goal",stationMode:[{value:"LOOP",label:"LOOP"},{value:"LOOP2",label:"LOOP2"},{value:"BACK",label:"BACK"},{value:"BACK2",label:"BACK2"},{value:"NONE",label:this.$t("waypointsType.once")}],mode:"LOOP",gotoMode:"",callMode:"",voiceMode:"play",voiceStationMode:[{value:"LOOP",label:this.$t("waypointsType.play")},{value:"LOOP2",label:this.$t("waypointsType.stop")},{value:"BACK",label:this.$t("waypointsType.playOnce")}],frameId:"map",subscribeValue:0,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,orientationW:0,yaw:0,scope:0,timeout:0},showFrameId:!0,showSubscribeValue:!1,showStationMode:!0,showVoiceStationMode:!1,showGotoStationMode:!1,showCallStationMode:!1,showPosition:!0,showOrientation:!0,showYaw:!0}},methods:{goHere:function(){this.$notify({title:this.$t("titles.success"),message:this.$t("messages.navWaypoint")+" "+this.waypointForm.name,type:"success",position:"top-left",offset:100}),Object(j.d)(this.waypointForm.name),Object(d.h)(!1)},showMoreBtn:function(){this.showMore=!1},changeStationType:function(t){switch(this.showFrameId=!1,this.showSubscribeValue=!1,this.showStationMode=!0,this.showVoiceStationMode=!1,this.showGotoStationMode=!1,this.showCallStationMode=!1,this.showPosition=!0,this.showOrientation=!0,this.showYaw=!0,t){case"goal":this.showFrameId=!0;break;case"pubsuber":this.showSubscribeValue=!0;break;case"sound_play":this.showStationMode=!1,this.showVoiceStationMode=!0,this.showGotoStationMode=!1,this.showCallStationMode=!1;break;case"goto":this.showStationMode=!1,this.showVoiceStationMode=!1,this.showGotoStationMode=!0,this.showCallStationMode=!1;break;case"call":this.showStationMode=!1,this.showVoiceStationMode=!1,this.showGotoStationMode=!1,this.showCallStationMode=!0;break;case"initial_pose":this.showFrameId=!0}},changeOrientation:function(){var t={x:parseFloat(this.waypointForm.orientationX),y:parseFloat(this.waypointForm.orientationY),z:parseFloat(this.waypointForm.orientationZ),w:parseFloat(this.waypointForm.orientationW)};if(isQuaternionValid(t)){var e=180*Object(s.m)(t)/Math.PI;this.waypointForm.yaw=e.toFixed(5)}else this.$notify({title:this.$t("titles.warning"),message:this.$t("messages.QuaternionsNotLegal"),type:"warning",position:"top-left",offset:100})},changeYaw:function(){var t=parseFloat(this.waypointForm.yaw),e=thetaToQuaternion(t/180*Math.PI);this.waypointForm.orientationX=e.x.toFixed(5),this.waypointForm.orientationY=e.y.toFixed(5),this.waypointForm.orientationZ=e.z.toFixed(5),this.waypointForm.orientationW=e.w.toFixed(5)},subUpdate:function(){"goal"===this.waypointForm.type&&(this.waypointForm.type="goal"),"LOOP"===this.waypointForm.mode&&(this.waypointForm.mode="LOOP"),"play"===this.waypointForm.voiceMode&&(this.waypointForm.voiceMode="LOOP"),Object(d.j)(this.waypointForm),Object(d.h)(!1)},updateWaypointMsg:function(t){console.log(t);var e=JSON.parse(t.header.frame_id);this.waypointForm.name=t.name,this.waypointForm.type=e.type,this.waypointForm.mode=e.failure_mode,this.waypointForm.positionX=Number(t.pose.position.x).toFixed(3),this.waypointForm.positionY=Number(t.pose.position.y).toFixed(3),this.waypointForm.positionZ=Number(t.pose.position.z).toFixed(3),this.waypointForm.orientationX=Number(t.pose.orientation.x).toFixed(3),this.waypointForm.orientationY=Number(t.pose.orientation.y).toFixed(3),this.waypointForm.orientationZ=Number(t.pose.orientation.z).toFixed(3),this.waypointForm.orientationW=Number(t.pose.orientation.w).toFixed(3);var a=Object(s.m)(t.pose.orientation),o=a/Math.PI*180;this.waypointForm.orientionRAD=Number(a).toFixed(3),this.waypointForm.orientionDEG=Number(o).toFixed(3)},closeDrawer:function(){Object(d.h)(!1),this.showMore=!0}},mounted:function(){},watch:{"$store.state.showWaypointDetail":function(t){this.drawer=t},"$store.state.wayPointMsg":function(t){this.updateWaypointMsg(t)}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.waypointDetail"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"detailBox"},[a("div",{staticClass:"goHere",on:{click:function(e){return e.target!==e.currentTarget?null:t.goHere()}}}),t._v(" "),a("div",{staticClass:"editBox"},[a("el-switch",{attrs:{"inactive-text":"修改","active-text":"","active-color":"#409EFF"},model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}})],1),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"waypointForm"},[a("el-form-item",{},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointName")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.name,expression:"waypointForm.name"}],attrs:{type:"text",placeholder:this.$t("placeholder.waypointName"),disabled:!t.edit},domProps:{value:t.waypointForm.name},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"name",e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointType")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointType"),size:"mini","popper-class":"selectClass",disabled:!t.edit},on:{change:t.changeStationType},model:{value:t.waypointForm.type,callback:function(e){t.$set(t.waypointForm,"type",e)},expression:"waypointForm.type"}},t._l(t.waypointForm.stationType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"showMore",on:{click:t.showMoreBtn}},[t._v("查看更多"),a("i",{staticClass:"el-icon-d-arrow-right moreIcon"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMore,expression:"!showMore"}]},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showStationMode,expression:"showStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointMode")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointMode"),size:"mini","popper-class":"selectClass",disabled:!t.edit},model:{value:t.waypointForm.mode,callback:function(e){t.$set(t.waypointForm,"mode",e)},expression:"waypointForm.mode"}},t._l(t.waypointForm.stationMode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showGotoStationMode,expression:"showGotoStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointMode")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointMode"),size:"mini",disabled:!t.edit},model:{value:t.waypointForm.gotoMode,callback:function(e){t.$set(t.waypointForm,"gotoMode",e)},expression:"waypointForm.gotoMode"}},t._l(this.$store.state.stationList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showCallStationMode,expression:"showCallStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointMode")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointMode"),size:"mini",disabled:!t.edit},model:{value:t.waypointForm.callMode,callback:function(e){t.$set(t.waypointForm,"callMode",e)},expression:"waypointForm.callMode"}},t._l(this.$store.state.trajectoryList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showVoiceStationMode,expression:"showVoiceStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointMode")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointMode"),size:"mini",disabled:!t.edit},model:{value:t.waypointForm.voiceMode,callback:function(e){t.$set(t.waypointForm,"voiceMode",e)},expression:"waypointForm.voiceMode"}},t._l(t.waypointForm.voiceStationMode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showFrameId,expression:"showFrameId"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("frame_id")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.frameId,expression:"waypointForm.frameId"}],attrs:{type:"text",placeholder:this.$t("placeholder.frame_id"),disabled:!t.edit},domProps:{value:t.waypointForm.frameId},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"frameId",e.target.value)}}})])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showSubscribeValue,expression:"showSubscribeValue"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.pubSubVal")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.subscribeValue,expression:"waypointForm.subscribeValue"}],attrs:{type:"text",placeholder:this.$t("placeholder.pubSubVal"),disabled:!t.edit},domProps:{value:t.waypointForm.subscribeValue},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"subscribeValue",e.target.value)}}})])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showPosition,expression:"showPosition"}]},[a("div",{staticClass:"localTitle"},[t._v("Positon")]),t._v(" "),a("div",{staticClass:"flex formItem bottomNone"},[a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("x")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.positionX,expression:"waypointForm.positionX"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.positionX},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"positionX",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("y")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.positionY,expression:"waypointForm.positionY"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.positionY},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"positionY",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("z")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.positionZ,expression:"waypointForm.positionZ"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.positionZ},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"positionZ",e.target.value)}}})])])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showOrientation,expression:"showOrientation"}]},[a("div",{staticClass:"localTitle"},[t._v("Orientation")]),t._v(" "),a("div",{staticClass:"flex formItem bottomNone"},[a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("x")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.orientationX,expression:"waypointForm.orientationX"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.orientationX},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.waypointForm,"orientationX",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("y")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.orientationY,expression:"waypointForm.orientationY"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.orientationY},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.waypointForm,"orientationY",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("z")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.orientationZ,expression:"waypointForm.orientationZ"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.orientationZ},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.waypointForm,"orientationZ",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("w")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.orientationW,expression:"waypointForm.orientationW"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.orientationW},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.waypointForm,"orientationW",e.target.value)}}})])])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showYaw,expression:"showYaw"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("Yaw(deg)")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.yaw,expression:"waypointForm.yaw"}],attrs:{type:"text",placeholder:this.$t("placeholder.yaw"),disabled:!t.edit},domProps:{value:t.waypointForm.yaw},on:{change:t.changeYaw,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subUpdate(e)},input:function(e){e.target.composing||t.$set(t.waypointForm,"yaw",e.target.value)}}})])])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.subUpdate}},[t._v(t._s(this.$t("buttons.submit")))])],1)],1)],1)])},staticRenderFns:[]};var P=a("VU/8")(I,N,!1,function(t){a("AF44")},"data-v-11d309f5",null).exports,B={name:"stationAdd",components:{next:h,previous:f},data:function(){return{drawer:!1,direction:"btt",closable:!1,showClose:!1,name:"waypoint",showMore:!0,stationForm:{stationName:"",stationType:[{value:"goal",label:this.$t("waypointsType.goal")},{value:"dock",label:this.$t("waypointsType.dock")},{value:"timer",label:this.$t("waypointsType.timer")},{value:"publisher",label:this.$t("waypointsType.publisher")},{value:"subscriber",label:this.$t("waypointsType.subscriber")},{value:"looper",label:this.$t("waypointsType.looper")},{value:"pubsuber",label:this.$t("waypointsType.pubsuber")},{value:"cmd_vel_set_sub",label:this.$t("waypointsType.maximumSpeedSetting")},{value:"cmd_vel",label:this.$t("waypointsType.speedPublisher")},{value:"shell",label:this.$t("waypointsType.commandPublisher")},{value:"sound_play",label:this.$t("waypointsType.soundPlay")},{value:"initial_pose",label:this.$t("waypointsType.initialPose")},{value:"scan_marker",label:this.$t("waypointsType.chargingPosition")},{value:"shell_string",label:this.$t("waypointsType.shellCommand")},{value:"pallet",label:"Pallet"},{value:"bias",label:"Bias"},{value:"call",label:"Call"},{value:"goto",label:"Goto"}],type:"goal",stationMode:[{value:"LOOP",label:"LOOP"},{value:"LOOP2",label:"LOOP2"},{value:"BACK",label:"BACK"},{value:"BACK2",label:"BACK2"},{value:"NONE",label:this.$t("waypointsType.once")}],mode:"LOOP",gotoMode:"",callMode:"",voiceMode:"play",voiceStationMode:[{value:"LOOP",label:this.$t("waypointsType.play")},{value:"LOOP2",label:this.$t("waypointsType.stop")},{value:"BACK",label:this.$t("waypointsType.playOnce")}],frameId:"map",subscribeValue:"0",positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,orientationW:0,yaw:0},showFrameId:!0,showSubscribeValue:!1,showStationMode:!0,showVoiceStationMode:!1,showGotoStationMode:!1,showCallStationMode:!1,showPosition:!0,showOrientation:!0,showYaw:!0}},mounted:function(){window.localStorage.getItem("guide")&&(this.closable=!0)},methods:{showMoreBtn:function(){Object(d.b)()&&(this.showMore=!1)},changeStationType:function(t){switch(this.showFrameId=!1,this.showSubscribeValue=!1,this.showStationMode=!0,this.showVoiceStationMode=!1,this.showGotoStationMode=!1,this.showCallStationMode=!1,this.showPosition=!0,this.showOrientation=!0,this.showYaw=!0,t){case"goal":this.showFrameId=!0;break;case"pubsuber":this.showSubscribeValue=!0;break;case"sound_play":this.showStationMode=!1,this.showVoiceStationMode=!0,this.showGotoStationMode=!1,this.showCallStationMode=!1;break;case"goto":this.showStationMode=!1,this.showVoiceStationMode=!1,this.showGotoStationMode=!0,this.showCallStationMode=!1;break;case"call":this.showStationMode=!1,this.showVoiceStationMode=!1,this.showGotoStationMode=!1,this.showCallStationMode=!0;break;case"initial_pose":this.showFrameId=!0}},changeOrientation:function(){var t={x:parseFloat(this.stationForm.orientationX),y:parseFloat(this.stationForm.orientationY),z:parseFloat(this.stationForm.orientationZ),w:parseFloat(this.stationForm.orientationW)};if(Object(s.j)(t)){var e=180*Object(s.m)(t)/Math.PI;this.stationForm.yaw=e.toFixed(5)}else this.$notify({title:this.$t("titles.warning"),message:this.$t("messages.QuaternionsNotLegal"),type:"warning",position:"top-left",offset:100})},changeYaw:function(){var t=parseFloat(this.stationForm.yaw),e=Object(s.r)(t/180*Math.PI);this.stationForm.orientationX=e.x.toFixed(5),this.stationForm.orientationY=e.y.toFixed(5),this.stationForm.orientationZ=e.z.toFixed(5),this.stationForm.orientationW=e.w.toFixed(5)},subUpdate:function(){"goal"===this.stationForm.type&&(this.stationForm.type="goal"),"LOOP"===this.stationForm.mode&&(this.stationForm.mode="LOOP"),"play"===this.stationForm.voiceMode&&(this.stationForm.voiceMode="LOOP"),Object(d.j)(this.stationForm)},closeDrawer:function(){Object(d.g)(!1)}},watch:{"$store.state.robotPosition":function(t){this.stationForm.positionX=t.positionX,this.stationForm.positionY=t.positionY,this.stationForm.positionZ=t.positionZ,this.stationForm.orientationX=t.orientationX,this.stationForm.orientationY=t.orientationY,this.stationForm.orientationZ=t.orientationZ,this.stationForm.orientationW=t.orientationW,this.stationForm.yaw=t.yaw},"$store.state.showAddStation":function(t){this.drawer=t},"$store.state.guideModule":function(t){this.closable=!t}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.addWaypoint"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.closable,expression:"!closable"}]},[a("previous",{attrs:{param:t.name}}),t._v(" "),a("next",{attrs:{param:t.name}})],1),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"waypointForm"},[a("el-form-item",{},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointName")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.stationName,expression:"stationForm.stationName"}],attrs:{type:"text",placeholder:this.$t("placeholder.waypointName")},domProps:{value:t.stationForm.stationName},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"stationName",e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointType")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointType"),size:"mini","popper-class":"selectClass"},on:{change:t.changeStationType},model:{value:t.stationForm.type,callback:function(e){t.$set(t.stationForm,"type",e)},expression:"stationForm.type"}},t._l(t.stationForm.stationType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"showMore",on:{click:t.showMoreBtn}},[t._v("更多设置"),a("i",{staticClass:"el-icon-d-arrow-right moreIcon"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMore,expression:"!showMore"}]},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showStationMode,expression:"showStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointMode")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointMode"),size:"mini","popper-class":"selectClass"},model:{value:t.stationForm.mode,callback:function(e){t.$set(t.stationForm,"mode",e)},expression:"stationForm.mode"}},t._l(t.stationForm.stationMode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showGotoStationMode,expression:"showGotoStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointMode")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointMode"),size:"mini"},model:{value:t.stationForm.gotoMode,callback:function(e){t.$set(t.stationForm,"gotoMode",e)},expression:"stationForm.gotoMode"}},t._l(this.$store.state.stationList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showCallStationMode,expression:"showCallStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointMode")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointMode"),size:"mini"},model:{value:t.stationForm.callMode,callback:function(e){t.$set(t.stationForm,"callMode",e)},expression:"stationForm.callMode"}},t._l(this.$store.state.trajectoryList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showVoiceStationMode,expression:"showVoiceStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.waypointMode")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:this.$t("placeholder.waypointMode"),size:"mini"},model:{value:t.stationForm.voiceMode,callback:function(e){t.$set(t.stationForm,"voiceMode",e)},expression:"stationForm.voiceMode"}},t._l(t.stationForm.voiceStationMode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showFrameId,expression:"showFrameId"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("frame_id")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.frameId,expression:"stationForm.frameId"}],attrs:{type:"text",placeholder:this.$t("placeholder.frame_id")},domProps:{value:t.stationForm.frameId},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"frameId",e.target.value)}}})])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showSubscribeValue,expression:"showSubscribeValue"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.pubSubVal")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.subscribeValue,expression:"stationForm.subscribeValue"}],attrs:{type:"text",placeholder:this.$t("placeholder.pubSubVal")},domProps:{value:t.stationForm.subscribeValue},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"subscribeValue",e.target.value)}}})])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showPosition,expression:"showPosition"}]},[a("div",{staticClass:"localTitle"},[t._v("Positon")]),t._v(" "),a("div",{staticClass:"flex formItem bottomNone"},[a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("x")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.positionX,expression:"stationForm.positionX"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.positionX},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"positionX",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("y")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.positionY,expression:"stationForm.positionY"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.positionY},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"positionY",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("z")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.positionZ,expression:"stationForm.positionZ"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.positionZ},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"positionZ",e.target.value)}}})])])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showOrientation,expression:"showOrientation"}]},[a("div",{staticClass:"localTitle"},[t._v("Orientation")]),t._v(" "),a("div",{staticClass:"flex formItem bottomNone"},[a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("x")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.orientationX,expression:"stationForm.orientationX"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.orientationX},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.stationForm,"orientationX",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("y")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.orientationY,expression:"stationForm.orientationY"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.orientationY},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.stationForm,"orientationY",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("z")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.orientationZ,expression:"stationForm.orientationZ"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.orientationZ},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.stationForm,"orientationZ",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("w")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.orientationW,expression:"stationForm.orientationW"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.orientationW},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.stationForm,"orientationW",e.target.value)}}})])])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showYaw,expression:"showYaw"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("Yaw(deg)")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.yaw,expression:"stationForm.yaw"}],attrs:{type:"text",placeholder:this.$t("placeholder.yaw")},domProps:{value:t.stationForm.yaw},on:{change:t.changeYaw,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subUpdate("stationForm")},input:function(e){e.target.composing||t.$set(t.stationForm,"yaw",e.target.value)}}})])])])],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subUpdate("stationForm")}}},[t._v(t._s(this.$t("buttons.submit")))])],1)],1)],1)},staticRenderFns:[]};var R=a("VU/8")(B,L,!1,function(t){a("Qxng")},"data-v-3ccdd40e",null).exports,D={name:"stationsComponent",components:{},data:function(){return{drawer:this.$store.state.trajectoryModule,direction:"btt",closable:!0,showClose:!1,input:"",trajectorys:[],trajectoryList:[],develop:!1}},methods:{InputChange:function(){if(this.input)for(var t in this.trajectorys=[],this.trajectoryList)this.trajectoryList[t].name.indexOf(this.input)>=0&&this.trajectorys.push(this.trajectoryList[t]);else this.trajectorys=this.trajectoryList},showTrackDetailBtn:function(t){this.drawer=!1,Object(u.e)(!0,t)},delTrackBtn:function(t){this.develop||(this.drawer=!1,this.$confirm("是否永久删除"+t+"轨迹?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,customClass:"delBranchCustom"}).then(function(){Object(u.a)(t)}).catch(function(){}))},addTrackBtn:function(){Object(u.f)(!1),Object(u.d)(!0)},closeDrawer:function(){Object(u.f)(!1)}},watch:{"$store.state.trajectoryModule":function(t){this.drawer=t},"$store.state.trajectoryList":function(t){this.trajectorys=t,this.trajectoryList=t},"$store.state.userRole":function(t){switch(t){case"developer":this.develop=!1;break;case"Administrator":this.develop=!0}}}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.trajectoryList"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"waypointList",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"trajectoryBox"},[a("div",{staticClass:"modulContent"},[a("div",{staticClass:"flex searchItem"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:this.$t("placeholder.content"),clearable:""},on:{input:t.InputChange},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),t._v(" "),0==t.trajectorys.length?a("div",{},[t._v("暂无轨迹")]):t._l(t.trajectorys,function(e,o){return a("div",{key:o,staticClass:"flex dignoseItem"},[a("div",{staticClass:"iconImg"}),t._v(" "),a("div",{staticClass:"name",on:{click:function(a){return t.showTrackDetailBtn(e.name)}}},[t._v(t._s(e.name))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.develop,expression:"!develop"}],staticClass:"itemDel flex",on:{click:function(a){return t.delTrackBtn(e.name)}}},[a("el-button",{attrs:{type:"text",disabled:t.develop}},[a("i",{staticClass:"el-icon-delete iconDel"})])],1)])})],2),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTrackBtn}},[t._v(t._s(this.$t("buttons.addTrajectory")))])],1)])])},staticRenderFns:[]};var z=a("VU/8")(D,W,!1,function(t){a("Gb1B")},"data-v-64ef2b9a",null).exports,A=a("lHA8"),E=a.n(A),U=a("Gu7T"),V=a.n(U),G={name:"trajectoryDetail",components:{},data:function(){return{drawer:this.$store.state.showTrajectory,direction:"btt",closable:!0,showClose:!1,showMore:!0,edit:!1,trajectoryForm:{name:"",waypoints:[]}}},methods:{subUpdate:function(){Object(u.g)(this.trajectoryForm)},goHere:function(t){this.$notify({title:this.$t("titles.success"),message:this.$t("messages.navTrajectory")+" "+t,type:"success",position:"top-left",offset:100}),Object(u.c)(t),Object(u.e)(!1)},showMoreBtn:function(){this.showMore=!1},closeDrawer:function(){Object(u.e)(!1),this.showMore=!0}},watch:{"$store.state.showTrajectory":function(t){this.drawer=t},"$store.state.trackDetail":function(t){console.log(t),this.trajectoryForm.name=t.name;var e=[];0!==t.waypoints.length&&(t.waypoints.forEach(function(t){e.push(t.name)}),this.trajectoryForm.waypoints=[].concat(V()(new E.a(e))))}}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.trajectoryDetail"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"trajectoryBox"},[a("div",{staticClass:"goHere",on:{click:function(e){return e.target!==e.currentTarget?null:t.goHere(t.trajectoryForm.name)}}}),t._v(" "),a("div",{staticClass:"editBox"},[a("el-switch",{attrs:{"inactive-text":"修改","active-text":"","active-color":"#409EFF"},model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}})],1),t._v(" "),a("div",{staticClass:"trackForm"},[a("el-form",{ref:"ruleForm",staticClass:"wifiForm",attrs:{model:t.trajectoryForm}},[a("el-form-item",{},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.trajectoryName")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.trajectoryForm.name,expression:"trajectoryForm.name"}],attrs:{type:"text",placeholder:this.$t("placeholder.trajectoryName"),disabled:!t.edit},domProps:{value:t.trajectoryForm.name},on:{input:function(e){e.target.composing||t.$set(t.trajectoryForm,"name",e.target.value)}}})])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"showMore",on:{click:t.showMoreBtn}},[t._v("查看更多"),a("i",{staticClass:"el-icon-d-arrow-right moreIcon"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMore,expression:"!showMore"}]},[a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.selectWaypoints")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"waypointSelect",attrs:{placeholder:this.$t("placeholder.selectWaypoints"),multiple:"",size:"mini","popper-class":"selectClass",disabled:!t.edit},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subUpdate(e)}},model:{value:t.trajectoryForm.waypoints,callback:function(e){t.$set(t.trajectoryForm,"waypoints",e)},expression:"trajectoryForm.waypoints"}},t._l(this.$store.state.stationList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.subUpdate}},[t._v(t._s(this.$t("buttons.submit")))])],1)],1)],1)])])},staticRenderFns:[]};var X=a("VU/8")(G,Y,!1,function(t){a("7n6D")},"data-v-08bdcd1a",null).exports,Z={name:"trackAdd",components:{next:h,previous:f},data:function(){return{drawer:!1,direction:"btt",closable:!1,showClose:!1,name:"trajectory",stationForm:{name:"",stations:""}}},mounted:function(){window.localStorage.getItem("guide")&&(this.closable=!0)},methods:{subUpdate:function(){Object(u.g)(this.stationForm)},closeDrawer:function(){Object(u.d)(!1)}},watch:{"$store.state.showAddTrack":function(t){this.drawer=t},"$store.state.guideModule":function(t){this.closable=!t}}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.addTrajectory"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.closable,expression:"!closable"}]},[a("previous",{attrs:{param:t.name}}),t._v(" "),a("next",{attrs:{param:t.name}})],1),t._v(" "),a("div",{staticClass:"trackForm"},[a("el-form",{ref:"ruleForm",staticClass:"wifiForm",attrs:{model:t.stationForm}},[a("el-form-item",{},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.trajectoryName")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.name,expression:"stationForm.name"}],attrs:{type:"text",placeholder:this.$t("placeholder.trajectoryName")},domProps:{value:t.stationForm.name},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"name",e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.selectWaypoints")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"waypointSelect",attrs:{placeholder:this.$t("placeholder.selectWaypoints"),multiple:"",size:"mini","popper-class":"selectClass"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subUpdate(e)}},model:{value:t.stationForm.stations,callback:function(e){t.$set(t.stationForm,"stations",e)},expression:"stationForm.stations"}},t._l(this.$store.state.stationList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.subUpdate}},[t._v(t._s(this.$t("buttons.submit")))])],1)],1)],1)])},staticRenderFns:[]};var H=a("VU/8")(Z,q,!1,function(t){a("iLdF")},"data-v-151c4304",null).exports,Q=a("mvHQ"),K=a.n(Q),J=a("NHnr"),tt=a("zL8q"),et=a("dmop"),at=a("djuq");function ot(t){t?i.a.commit("switchWifiSetting",!0):i.a.commit("switchWifiSetting",!1)}function it(t){window.localStorage.setItem("guideName","wifi");var e=t.ssid,a=t.password,o=t.ip,n=t.mask,r=t.gateway,l=t.checked,c=t.selectIP;t.mode=at.a.NetworkMode.wifi;var d="~/catkin_ws/www/shell/comm.sh -m wifi ";if(e&&a&&Object(s.c)(e)){if(d+="-s "+e+" -p "+a,c){if(null==o.match(/(\d+)\.(\d+)\.(\d+)\.(\d+)/g)||(RegExp.$1>255||RegExp.$2>255||RegExp.$3>255||RegExp.$4>255))return void Notification({title:J.default.$t("titles.error"),message:J.default.$t("messages.ipUnavailable"),type:"error",position:"top-left",offset:100});d+=" -i "+o;var u=0;if(""!==n){for(var p=n.split("."),m=0;m<p.length;m++)for(var h=Number(p[m]).toString(2).split(""),v=0;v<h.length;v++)u+=Number(h[v]);d+=" -k "+u}""!==r&&(d+=" -g "+r),l&&(d+=" -a")}else d=l?"~/catkin_ws/www/shell/comm.sh -m wifi -s "+e+" -p "+a+" -a":"~/catkin_ws/www/shell/comm.sh -m wifi -s "+e+" -p "+a;var w=new ROSLIB.Message({data:d});console.log("[INFO] "+K()(w)),et.a.topic.netWorkTopic.publish(w),window.localStorage.setItem("wifiInfos",K()(t)),i.a.commit("switchWifiSetting",!1),tt.Loading.service({text:J.default.$t("inTheSwitch")}),setTimeout(function(){window.history.pushState({},0,""+o),tt.Loading.service().close(),ot(!1)},1e4)}else Notification({title:J.default.$t("titles.error"),message:J.default.$t("messages.wifiNameOrPswUnavailable"),type:"error",position:"top-left",offset:100})}var st={name:"wifiSetting",components:{},data:function(){return{drawer:this.$store.state.showWifiSetting,direction:"btt",closable:!0,showClose:!1,wifiName:"",wifiPsw:"",selectIP:!1,wifiIp:"192.168.43.233",ipMask:"255.255.255.0",gateway:"192.168.43.1",checked:!1,isMobile:"",showMore:!0}},methods:{showMoreBtn:function(){this.showMore=!this.showMore},submitForm:function(t){it({ssid:this.wifiName,password:this.wifiPsw,ip:this.wifiIp,mask:this.ipMask,gateway:this.gateway,checked:this.checked,selectIP:this.selectIP,isMobile:this.isMobile})},resetForm:function(){!function(t){t.mode=at.a.NetworkMode.ap;var e=new ROSLIB.Message({data:"~/catkin_ws/www/shell/comm.sh -m ap"});et.a.topic.netWorkTopic.publish(e),i.a.commit("switchWifiSetting",!1),tt.Loading.service({text:J.default.$t("inTheSwitch")}),setTimeout(function(){window.location.href="http://10.42.0.1",tt.Loading.service().close()},3e3),i.a.commit("switchWifiSetting",!1)}({})},closeDrawer:function(){ot(!1)}},mounted:function(){Object(s.a)()?/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?(this.wifiIp="172.20.10.15",this.gateway="172.20.10.1",this.isMobile="ios"):/(Android)/i.test(navigator.userAgent)&&(this.wifiIp="192.168.43.233",this.gateway="192.168.43.1",this.isMobile="android"):this.isMobile="pc"},watch:{"$store.state.showWifiSetting":function(t){this.drawer=t},"$store.state.wifiInfos":function(t){var e=JSON.parse(t);this.wifiName=e.ssid,this.wifiPsw=e.password,this.wifiIp=e.ip,this.mask=e.mask,this.gateway=e.gateway,this.checked=!e.checked}}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.networkSettings"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"wifiBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"tipBox"},[a("p",[t._v("请确保有可用的热点或无线网络。如需设置网关，注:")]),t._v(" "),a("p",[t._v("IOS手机为"),a("span",[t._v("172.20.10.xx")]),t._v("  xx为2-20之间")]),t._v(" "),a("p",[t._v("安卓或路由为"),a("span",[t._v("192.168.43.xxx")]),t._v("  xx为0-255之间")])]),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"wifiForm"},[a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.wifiName")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wifiName,expression:"wifiName"}],attrs:{type:"text",placeholder:this.$t("placeholder.wifiName")},domProps:{value:t.wifiName},on:{input:function(e){e.target.composing||(t.wifiName=e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.wifiPsw")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wifiPsw,expression:"wifiPsw"}],attrs:{type:"text",placeholder:this.$t("placeholder.wifiPsw")},domProps:{value:t.wifiPsw},on:{input:function(e){e.target.composing||(t.wifiPsw=e.target.value)}}})])])]),t._v(" "),t.showMore?a("div",{staticClass:"showMore",on:{click:t.showMoreBtn}},[t._v("更多设置"),a("i",{staticClass:"el-icon-d-arrow-right moreIcon"})]):a("div",[a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("IP类型")]),t._v(" "),a("div",{staticClass:"itemRight flex switchBox"},[a("el-switch",{attrs:{"active-text":"手动IP","inactive-text":"自动IP"},model:{value:t.selectIP,callback:function(e){t.selectIP=e},expression:"selectIP"}})],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.selectIP,expression:"selectIP"}]},[a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("IP")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wifiIp,expression:"wifiIp"}],attrs:{type:"text",placeholder:this.$t("placeholder.wifiIP")},domProps:{value:t.wifiIp},on:{input:function(e){e.target.composing||(t.wifiIp=e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.ipMask")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ipMask,expression:"ipMask"}],attrs:{type:"text",placeholder:this.$t("placeholder.ipMask")},domProps:{value:t.ipMask},on:{input:function(e){e.target.composing||(t.ipMask=e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.gateway")))]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.gateway,expression:"gateway"}],attrs:{type:"text",placeholder:this.$t("placeholder.gateway")},domProps:{value:t.gateway},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("ruleForm")},input:function(e){e.target.composing||(t.gateway=e.target.value)}}})])])])],1),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v(t._s(this.$t("titles.saveSettings")))]),t._v(" "),a("div",{staticClass:"itemRight saveSetting flex"},[a("el-checkbox",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("ruleForm")}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1)])])],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v(t._s(this.$t("buttons.restoration")))]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v(t._s(this.$t("buttons.submit")))])],1)],1)],1)},staticRenderFns:[]};var rt=a("VU/8")(st,nt,!1,function(t){a("Q1jy")},"data-v-d1703d5c",null).exports;function lt(t){t?i.a.commit("switchUpdate",!0):i.a.commit("switchUpdate",!1)}var ct={name:"update",components:{},data:function(){return{drawer:this.$store.state.showUpdate,direction:"btt",closable:!0,showClose:!1,onLineAuto:"online",offLineAuto:"offline",dbparam:"dbparam",openssh:"openssh",updateType:"",updateString:"",updateTypeString:{onlineAuto:"update"}}},methods:{chooseUpdate:function(t){switch(t){case"online":this.$notify({title:this.$t("titles.warning"),message:this.$t("messages.connectNetwork"),type:"warning",position:"top-left",offset:100}),this.updateString=this.updateTypeString.onlineAuto}},subUpdate:function(){""!==this.updateType?(this.$store.commit("switchWhiteMask",!1),this.$store.commit("switchUpdate",!1),function(t,e){switch(tt.Loading.service({text:J.default.$t("loading")}),t){case"online":var a=new ROSLIB.Message({seq:1,frame_id:"update_request"});et.a.topic.taskSwitchTopic.publish(a);break;default:console.error("[ERROR]unknown update mode: "+t)}}(this.updateType,this.updateString),lt(!1)):this.$notify({title:this.$t("titles.warning"),message:this.$t("messages.selectUpdateType"),type:"warning",position:"top-left",offset:100})},closeDrawer:function(){lt(!1)}},watch:{"$store.state.showUpdate":function(t){this.drawer=t}}},dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.softwareUpdate"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"updateBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"updateCom"},[a("div",{staticClass:"flex modulContent"},[a("el-radio-group",{on:{change:t.chooseUpdate},model:{value:t.updateType,callback:function(e){t.updateType=e},expression:"updateType"}},[a("div",{staticClass:"updateItem"},[a("el-radio",{attrs:{label:t.onLineAuto}},[t._v(t._s(this.$t("updates.online")))])],1)])],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.subUpdate}},[t._v(t._s(this.$t("buttons.updateNow")))])],1)])])},staticRenderFns:[]};var ut=a("VU/8")(ct,dt,!1,function(t){a("Mgr3")},"data-v-c47d6fe4",null).exports;function pt(t){t?i.a.commit("switchvolume",!0):i.a.commit("switchvolume",!1)}var mt={name:"volume",components:{},data:function(){return{drawer:this.$store.state.showVolume,direction:"btt",closable:!0,showClose:!0,voice:0}},methods:{formatTooltip:function(t){return 2*t},changeVoice:function(t){var e,a;e={seq:2*t,frame_id:"system_volume"},a=new ROSLIB.Message(e),et.a.topic.taskSwitchTopic.publish(a)},closeDrawer:function(){pt(!1)}},watch:{"$store.state.showVolume":function(t){this.drawer=t}}},ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.volume"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"volumeList",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"modulContent"},[a("el-slider",{attrs:{"format-tooltip":t.formatTooltip},on:{change:t.changeVoice},model:{value:t.voice,callback:function(e){t.voice=e},expression:"voice"}})],1)])},staticRenderFns:[]};var vt=a("VU/8")(mt,ht,!1,function(t){a("9URi")},"data-v-57393d86",null).exports,wt=a("TSWK"),ft={name:"branch",components:{},data:function(){return{drawer:this.$store.state.showBranch,direction:"btt",closable:!0,showClose:!1,branchName:""}},methods:{addBranchBtn:function(){Object(wt.c)(this.branchName)&&Object(wt.e)(!1)},closeDrawer:function(){Object(wt.e)(!1)}},watch:{"$store.state.showBranch":function(t){this.drawer=t}}},gt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("buttons.newBranch"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"branchBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"branchCom"},[a("div",{staticClass:"flex searchItem"},[a("el-input",{staticClass:"searchInput",attrs:{placeholder:this.$t("placeholder.content"),clearable:""},model:{value:t.branchName,callback:function(e){t.branchName=e},expression:"branchName"}})],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addBranchBtn}},[t._v(t._s(this.$t("buttons.addTrajectory")))])],1)])])},staticRenderFns:[]};var bt=a("VU/8")(ft,gt,!1,function(t){a("Z6Zb")},"data-v-01b762e2",null).exports,yt={name:"guideEnd",components:{previous:f},data:function(){return{drawer:this.$store.state.guideEndModule,direction:"btt",closable:!1,showClose:!1,name:"end"}},methods:{guideEndBtn:function(){Object(s.d)()}},watch:{"$store.state.guideEndModule":function(t){this.drawer=t}}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("titles.more"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e}}},[a("previous",{attrs:{param:t.name}}),t._v(" "),a("div",{staticClass:"startMore"},[a("el-button",{attrs:{type:"primary"},on:{click:t.guideEndBtn}},[t._v("开启更多")])],1)],1)},staticRenderFns:[]};var St=a("VU/8")(yt,_t,!1,function(t){a("XfkG")},"data-v-4b3925ee",null).exports,Ct=a("pDaU"),jt={name:"more",components:{},data:function(){return{drawer:!1,direction:"rtl",closable:!0,showClose:!1,modal:!1,showMore:!1,outline:!1,laser:!1,global:!1,part:!1,update:!1,language:!1,locale:"cn",lang:"ENG",dialogWidth:"60%",dialogVisible:!1,downLoadDialogVisible:!1,limit:1,base64Data:"",downloadRadio:"",radio:"",mapWidth:"",mapHeight:"",branchName:"",innerDrawer:!1,innerWidth:"40%",cities:[{value:"Beijing",label:"北京"},{value:"Shanghai",label:"上海"},{value:"Nanjing",label:"南京"},{value:"Chengdu",label:"成都"},{value:"Shenzhen",label:"深圳"},{value:"Guangzhou",label:"广州"}],value:""}},methods:{displayMore:function(){this.drawer=!this.drawer},chooseBranch:function(t){Object(wt.f)(t),this.drawer=!1},delBranch:function(t){this.drawer=!1,this.$confirm("是否永久删除该分支?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,customClass:"delBranchCustom"}).then(function(){Object(wt.a)(t)}).catch(function(){})},clickIcon:function(t){switch(this.drawer=!1,t){case"mapping":Object(c.e)(!0);break;case"wifi":ot(!0);break;case"authorization":Object(s.n)(!0);break;case"waypoints":Object(d.i)(!0);break;case"trajectory":Object(u.f)(!0);break;case"initialPose":Object(Ct.b)();break;case"joystick":M(!0);break;case"newBranch":Object(wt.e)(!0);break;case"laserScan":this.laser=!this.laser,Object(s.g)(this.laser);break;case"footprint":this.outline=!this.outline,Object(s.f)(this.outline);break;case"globalPlan":this.global=!this.global,Object(s.h)(this.global);break;case"localPlan":this.part=!this.part,Object(s.q)(this.part);break;case"volume":pt(!0);break;case"update":lt(!0);break;case"language":"cn"==this.locale?(this.lang="EN",this.locale="en"):(this.lang="中文",this.locale="cn"),this.language=!this.language,window.localStorage.setItem("lng","cn"==this.locale?"0":"1");break;case"uploadMap":Object(c.f)(!0);break;case"downloadMap":Object(c.d)(!0);break;case"help":window.location.href="http://hitrobotgroup.github.io/";break;case"guide":window.localStorage.removeItem("guide"),window.localStorage.removeItem("guideName"),Object(s.i)()}},showSetting:function(){this.innerDrawer=!0},rmLocalstorage:function(){var t=this,e=t.$loading({lock:!0,text:"清除中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});window.localStorage.clear(),setTimeout(function(){t.$notify({message:"清除成功",position:"top-left",type:"success",offset:100}),e.close()},1e3)}},beforeMount:function(){document.body.clientWidth>768?(this.dialogWidth="30%",this.innerWidth="20%"):(this.dialogWidth="60%",this.innerWidth="40%")},mounted:function(){window.localStorage.getItem("guide")&&this.$store.commit("switchMoreBtns",!0),"0"==window.localStorage.getItem("lng")?(this.locale="cn",this.lang="ENG"):(this.locale="en",this.lang="中文"),window.localStorage.setItem("lng","cn"==this.locale?"0":"1")},watch:{locale:function(t){this.$i18n.locale=t}}},Mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"moreCom"},[a("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.showMoreBtns,expression:"this.$store.state.showMoreBtns"}],staticClass:"boxShadow flex moreBtn"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("buttons.waypoint"),placement:"left"}},[a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-map-location"},on:{click:function(e){return t.clickIcon("waypoints")}}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("buttons.trajectory"),placement:"left"}},[a("el-button",{staticClass:"btn trajectoryIcon",on:{click:function(e){return t.clickIcon("trajectory")}}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("buttons.wifi"),placement:"left"}},[a("el-button",{staticClass:"btn wifiIcon",on:{click:function(e){return t.clickIcon("wifi")}}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("buttons.joystick"),placement:"left"}},[a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-place"},on:{click:function(e){return t.clickIcon("joystick")}}})],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("titles.more"),placement:"left"}},[a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-more"},on:{click:t.displayMore}})],1)],1),t._v(" "),a("el-drawer",{attrs:{visible:t.drawer,"close-on-press-escape":!1,"custom-class":"moreBox",size:t.dialogWidth,modal:t.modal,wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"branchNameBox flex"},[a("div",{staticClass:"branchName"},[t._v("分支:")]),t._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择","popper-class":"branchSelect"},model:{value:t.$store.state.nowMapName,callback:function(e){t.$set(t.$store.state,"nowMapName",e)},expression:"$store.state.nowMapName"}},t._l(t.$store.state.mapList,function(e,o){return a("el-option",{key:o,attrs:{label:e,value:e,disabled:e===t.$store.state.nowMapName}},[a("span",{staticClass:"leftName",staticStyle:{float:"left"},on:{click:function(a){return t.chooseBranch(e)}}},[t._v(t._s(e))]),t._v(" "),"master"!==e?a("span",{staticClass:"rightDel",staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},on:{click:function(a){return t.delBranch(e)}}},[a("i",{staticClass:"el-icon-delete"})]):a("span",{staticClass:"rightDel",staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}})])}),1),t._v(" "),a("div",{staticClass:"addBranch"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("buttons.newBranch"),placement:"bottom"}},[a("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.clickIcon("newBranch")}}})],1)],1)],1),t._v(" "),a("div",{staticClass:"btnBox"},[a("div",{staticClass:"flex moreBox",attrs:{id:"moreBox"}},[a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("mapping")}}},[a("div",{staticClass:"icon boxShadow mapNor"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.newMapping")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("downloadMap")}}},[a("div",{staticClass:"icon flex boxShadow"},[a("i",{staticClass:"el-icon-download"})]),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.downloadMap")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("uploadMap")}}},[a("div",{staticClass:"icon flex boxShadow"},[a("i",{staticClass:"el-icon-upload2"})]),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.uploadMap")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("authorization")}}},[a("div",{staticClass:"icon flex boxShadow"},[a("i",{staticClass:"el-icon-user"})]),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.permissions")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("initialPose")}}},[a("div",{staticClass:"icon flex boxShadow"},[a("i",{staticClass:"el-icon-thumb"})]),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.initialPose")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("volume")}}},[a("div",{staticClass:"icon boxShadow voiceNor"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.volume")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("update")}}},[a("div",{staticClass:"icon flex boxShadow"},[a("i",{staticClass:"el-icon-refresh"})]),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.update")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("laserScan")}}},[a("div",{staticClass:"icon boxShadow",class:t.laser?"laserSel":"laserNor"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.laserScan")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("language")}}},[a("div",{staticClass:"icon boxShadow",class:t.language?"languageSel":"languageNor"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("中/EN")])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("guide")}}},[a("div",{staticClass:"icon flex boxShadow"},[a("i",{staticClass:"el-icon-wind-power"})]),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.guide")))])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.clickIcon("help")}}},[a("div",{staticClass:"icon boxShadow helpNor"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v(t._s(t.$t("buttons.help")))])])])]),t._v(" "),a("i",{staticClass:"el-icon-s-tools settingBtn",on:{click:t.showSetting}}),t._v(" "),a("el-drawer",{attrs:{size:t.innerWidth,"custom-class":"innerBox","append-to-body":!0,"show-close":t.showClose,visible:t.innerDrawer},on:{"update:visible":function(e){t.innerDrawer=e}}},[a("div",{staticClass:"innerSetBox"},[a("div",{staticClass:"setItem flex",on:{click:t.rmLocalstorage}},[a("div",[t._v("清除缓存")]),a("i",{staticClass:"el-icon-arrow-right"})])])])],1)],1)},staticRenderFns:[]};var xt=a("VU/8")(jt,Mt,!1,function(t){a("Cx9D")},"data-v-37008da2",null).exports,kt=a("//Fk"),Tt=a.n(kt),Ot=a("Xxa5"),$t=a.n(Ot),Ft=a("exGp"),It=a.n(Ft),Nt={name:"mapUpload",components:{},data:function(){return{drawer:this.$store.state.uploadMap,direction:"btt",closable:!0,showClose:!1,limit:1,radio:"map"}},methods:{handlePreview:function(t){},handleRemove:function(t,e){},handleAvatarSuccess:function(t,e,a){},handleAvatarError:function(t,e,a){},getFile:function(t,e){var a=this;return It()($t.a.mark(function e(){return $t.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getImgSize(t);case 2:return e.next=4,a.getBase64(t.raw).then(function(t){a.base64Data=t});case 4:case"end":return e.stop()}},e,a)}))()},getImgSize:function(t){var e=this,a=new Image;a.src=t.url,a.onload=function(){e.mapWidth=a.width,e.mapHeight=a.height}},getBase64:function(t){return new Tt.a(function(e,a){var o=new FileReader,i="";o.readAsDataURL(t),o.onload=function(){i=o.result},o.onerror=function(t){a(t)},o.onloadend=function(){e(i)}})},submitUploadBtn:function(t){var e=this;return It()($t.a.mark(function a(){var o;return $t.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o=e,a.t0=t,a.next=!0===a.t0?4:!1===a.t0?14:16;break;case 4:if(""!=o.radio){a.next=7;break}return o.$message.error("请选择图片类型！"),a.abrupt("return");case 7:if(o.base64Data){a.next=10;break}return o.$message.error("请上传图片！"),a.abrupt("return");case 10:return a.next=12,Object(c.j)({base64:o.base64Data,type:o.radio,width:o.mapWidth,height:o.mapHeight});case 12:case 14:return o.dialogVisible=!1,a.abrupt("break",17);case 16:o.dialogVisible=!1;case 17:o.drawer=!1;case 18:case"end":return a.stop()}},a,e)}))()},closeDrawer:function(){Object(c.f)(!1)}},watch:{"$store.state.uploadMap":function(t){this.drawer=t}}},Pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("buttons.uploadMap"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"uploadMap",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"uploadBox"},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"",accept:".png","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess,"on-error":t.handleAvatarError,"on-change":t.getFile,"auto-upload":!1,"list-type":"picture",limit:t.limit}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传png文件")])]),t._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:"map"}}),t._v(" "),a("el-radio-button",{attrs:{label:"map_edit"}})],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUploadBtn(!0)}}},[t._v(t._s(this.$t("buttons.submit")))])],1)],1)])},staticRenderFns:[]};var Bt=a("VU/8")(Nt,Pt,!1,function(t){a("Qjgw")},"data-v-4f87acdf",null).exports,Lt={name:"mapDownload",components:{},data:function(){return{drawer:this.$store.state.downloadMap,direction:"btt",closable:!0,showClose:!1,radio:"",downloadRadio:""}},methods:{submitDownloadBtn:function(t){var e=this;return It()($t.a.mark(function a(){var o,i;return $t.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:o=e,a.t0=t,a.next=!0===a.t0?4:!1===a.t0?23:25;break;case 4:if(""!=o.downloadRadio){a.next=9;break}return o.$message.error("请选择下载图片类型！"),a.abrupt("return");case 9:if("map"!=o.downloadRadio){a.next=14;break}o.$loading({text:"加载中"}),o.downloadMap("map"),a.next=21;break;case 14:if("map_edit"!=o.downloadRadio){a.next=21;break}return o.$loading({text:"加载中"}),a.next=18,Object(c.g)();case 18:return i=a.sent,a.next=21,o.downloadMap("map_edit",i);case 21:case 23:case 25:return o.downLoadDialogVisible=!1,a.abrupt("break",27);case 27:case"end":return a.stop()}},a,e)}))()},downloadMap:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"map",a=arguments[1];return It()($t.a.mark(function o(){var i,s,n,r;return $t.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=t,s="",s="map"==e?i.$store.state.base64MapData:a,n=document.createElement("a"),o.next=6,t.base64ToBolb(s);case 6:r=o.sent,document.createEvent("HTMLEvents").initEvent("click",!0,!0),n.download=e+".png",n.href=URL.createObjectURL(r),n.dispatchEvent(new MouseEvent("click",{bubbles:!0,canslelable:!0,view:window})),i.$loading().close();case 13:case"end":return o.stop()}},o,t)}))()},base64ToBolb:function(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],o=window.atob(e[1]),i=o.length,s=new Uint8Array(i),n=0;n<i;++n)s[n]=o.charCodeAt(n);return new Blob([s],{type:a})},closeDrawer:function(){Object(c.d)(!1)}},watch:{"$store.state.downloadMap":function(t){this.drawer=t}}},Rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:this.$t("buttons.downloadMap"),visible:t.drawer,"close-on-press-escape":!1,"custom-class":"branchBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"downloadBox"},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.downloadRadio,callback:function(e){t.downloadRadio=e},expression:"downloadRadio"}},[a("el-radio-button",{attrs:{label:"map"}}),t._v(" "),a("el-radio-button",{attrs:{label:"map_edit"}})],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitDownloadBtn(!0)}}},[t._v(t._s(this.$t("buttons.confirm")))])],1)],1)])},staticRenderFns:[]};var Dt=a("VU/8")(Lt,Rt,!1,function(t){a("vDjg")},"data-v-8eb862da",null).exports,Wt={name:"home",components:{electricity:o.a,guide:l,mapping:y,joystickComponent:T,waypointsList:F,waypointDetail:P,waypointAdd:R,trajectoryList:z,trajectoryDetail:X,trajectoryAdd:H,wifiSetting:rt,authorization:C,update:ut,volume:vt,branch:bt,guideEnd:St,more:xt,uploadMap:Bt,downloadMap:Dt},data:function(){return{stopBtnFlag:!1}},watch:{},mounted:function(){},methods:{stopBtn:function(){var t=this;t.stopBtnFlag||(t.stopBtnFlag=!0,setTimeout(function(){console.log(t.stopBtnFlag),t.stopBtnFlag=!1},3e3),Object(j.f)())},clickLocationBtn:function(){Object(Ct.a)()},mapZoom:function(t){"max"==t?(this.$store.commit("zoomDisabled",0),setTimeout(function(){Object(c.k)("zoomIn")},300)):(this.$store.commit("zoomDisabled",1),setTimeout(function(){Object(c.k)("zoomOut")},300))}}},zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.showBattery,expression:"this.$store.state.showBattery"}]},[a("electricity")],1),t._v(" "),a("transition",{attrs:{name:"el-fade-in-center"}},[a("guide",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.guideModule,expression:"this.$store.state.guideModule"}]})],1),t._v(" "),a("div",{staticClass:"boxShadow stopBtn"},[a("el-button",{attrs:{icon:"el-icon-remove"},on:{click:t.stopBtn}})],1),t._v(" "),a("div",{staticClass:"boxShadow nowLocation"},[a("el-button",{attrs:{icon:"el-icon-aim",disabled:t.stopBtnFlag},on:{click:t.clickLocationBtn}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.userRole,expression:"!this.$store.state.userRole"}]}),t._v(" "),a("transition",{attrs:{name:"el-fade-in-center"}},[a("guide-end")],1),t._v(" "),a("more"),t._v(" "),a("div",{staticClass:"boxShadow flex mapSizeBtn"},[a("el-button",{staticClass:"zoomBtn",attrs:{icon:"el-icon-plus",disabled:0===this.$store.state.zoomDisabled},on:{click:function(e){return t.mapZoom("max")}}}),t._v(" "),a("el-button",{staticClass:"zoomBtn",attrs:{icon:"el-icon-minus",disabled:1===this.$store.state.zoomDisabled},on:{click:function(e){return t.mapZoom("min")}}})],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("mapping")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("authorization")],1),t._v(" "),a("transition",{attrs:{name:"el-fade-in-center"}},[a("joystick-component")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("waypoints-list")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("waypoint-detail",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.stationModule,expression:"this.$store.state.stationModule"}]})],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("waypoint-add")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("trajectory-list")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("trajectory-detail")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("trajectory-add")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("wifi-setting")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("update")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("volume")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("branch")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("upload-map")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("download-map")],1),t._v(" "),a("div",{attrs:{id:"mapNavDiv"}})],1)},staticRenderFns:[]};var At=a("VU/8")(Wt,zt,!1,function(t){a("OwSL")},"data-v-6c2e81ec",null);e.default=At.exports},xrs3:function(t,e,a){"use strict";e.e=function(){return new l.a(function(t,e){p.a.topic.wpTopic.subscribe(function(e){if(p.a.waypointsMessage=e,p.a.waypointsStage)for(var a in p.a.waypointsStage)if(p.a.waypointsStage.hasOwnProperty(a))for(var o=p.a.waypointsStage[a],i=0;i<o.length;i++)p.c.scene.removeChild(o[i]);p.a.wayPointsMsg=e;for(var s=[],i=0;i<e.waypoints.length;i++){var n=e.waypoints[i],r=JSON.parse(n.header.frame_id),l=r.type;switch(l){case"goal":case"goal":case"publisher":case"call":case"homing_control":case"std_msgs/Header":break;default:continue}var c=new ROS2D.NavigationArrow({size:10,strokeSize:1,fillColor:createjs.Graphics.getRGB(63,134,254,.9),pulse:!1});c.x=n.pose.position.x,c.y=-n.pose.position.y,c.scaleX=1/p.c.scene.scaleX,c.scaleY=1/p.c.scene.scaleY,c.rotation=p.c.scene.rosQuaternionToGlobalTheta(n.pose.orientation),c.name=n.name,s.push(c),c.on("click",g),p.c.scene.addChild(c)}p.a.waypointsStage=s,d.a.commit("stationList",s),t("wayPoints success")})})},e.i=function(t){t?d.a.commit("switchWaypointList",!0):d.a.commit("switchWaypointList",!1)},e.b=function(){if(0!==n()(p.a.robotPoseMsg).length){var t=Object(h.m)(p.a.robotPoseMsg.orientation),e=(180*t/Math.PI).toFixed(8),a={positionX:p.a.robotPoseMsg.position.x.toFixed(5),positionY:p.a.robotPoseMsg.position.y.toFixed(5),positionZ:p.a.robotPoseMsg.position.z.toFixed(5),orientationX:p.a.robotPoseMsg.orientation.x.toFixed(5),orientationY:p.a.robotPoseMsg.orientation.y.toFixed(5),orientationZ:p.a.robotPoseMsg.orientation.z.toFixed(5),orientationW:p.a.robotPoseMsg.orientation.w.toFixed(5),yaw:e};return d.a.commit("setRobotPosition",a),!0}return Object(u.Notification)({title:c.default.$t("titles.error"),message:c.default.$t("messages.robotPoseUnavailable")+"，建议重启系统",type:"error",position:"top-left",offset:100}),!1},e.g=v,e.a=function(t){var e=f(t),a=new ROSLIB.Message(e);console.log("delete Waypoint Name:"+t),p.a.topic.delWaypointTopic.publish(a),p.c.scene.removeChild(e),Object(u.Notification)({title:c.default.$t("titles.success"),message:c.default.$t("messages.WaypointDelSuccess"),type:"success",position:"top-left",offset:100})},e.h=w,e.c=f,e.j=function(t){var e=t.stationName,a=t.type,o=t.frameId,s=t.mode;if(!Object(h.c)(e))return void Object(u.Notification)({title:c.default.$t("titles.warning"),message:c.default.$t("messages.waypointNotValid"),type:"warning",position:"top-left",offset:100});if(b(e))return void Object(u.Notification)({title:c.default.$t("titles.warning"),message:c.default.$t("messages.waypointExists"),type:"warning",position:"top-left",offset:100});if(Object(m.b)(e))return void Object(u.Notification)({title:c.default.$t("titles.warning"),message:c.default.$t("messages.waypointWithTrajectoryExists"),type:"warning",position:"top-left",offset:100});if(!o&&("initial_pose"===a||"goal"===a))return void Object(u.Notification)({title:c.default.$t("titles.warning"),message:c.default.$t("messages.frame_id"),type:"warning",position:"top-left",offset:100});"sound_play"===a&&(s=t.voiceMode);"call"==s&&(s=t.callMode);"goto"==s&&(s=t.gotoMode);if(!Object(h.c)(s))return void Object(u.Notification)({title:c.default.$t("titles.error"),message:c.default.$t("messages.waypointModeNotValid"),type:"error",position:"top-left",offset:100});window.localStorage.setItem("guideName","waypoint");var n={position:p.a.robotPoseMsg.position,orientation:p.a.robotPoseMsg.orientation},r={stationName:e,stationType:a,stationMode:s,frameId:o,pose:n},l={frame_id:r.frameId,type:r.stationType,close_enough:0,goal_timeout:0,failure_mode:r.stationMode},d=new ROSLIB.Message({header:{frame_id:i()(l)},name:r.stationName,pose:r.pose});p.a.topic.addWaypointTopic.publish(d),console.log(d),Object(u.Notification)({title:c.default.$t("titles.success"),message:c.default.$t("messages.waypointAddSuccess"),type:"success",position:"top-left",offset:100}),v(!1),window.localStorage.getItem("guide")||Object(m.d)(!0)},e.f=function(){var t=!1;if(p.a.waypointsStage&&p.a.waypointsStage){for(var e in p.a.waypointsStage)for(var a=p.a.waypointsStage[e],o=0;o<a.length;o++)p.c.scene.removeChild(a[o]),t=!0;setTimeout(function(){if(t)for(var e={goal:[]},a=0;a<p.a.waypointsMessage.waypoints.length;a++){var o=p.a.waypointsMessage.waypoints[a],i=JSON.parse(o.header.frame_id),s=i.type;if("goal"===s){var n=new ROS2D.NavigationArrow({size:10,strokeSize:1,fillColor:createjs.Graphics.getRGB(63,134,254,.9),pulse:!1});n.x=o.pose.position.x,n.y=-o.pose.position.y,n.scaleX=1/p.c.scene.scaleX,n.scaleY=1/p.c.scene.scaleY,n.rotation=p.c.scene.rosQuaternionToGlobalTheta(o.pose.orientation),n.name=o.name,e[s].push(n),n.on("click",g),p.c.scene.addChild(n),p.a.waypointsStage=e,d.a.commit("stationList",e.goal)}}},200)}},e.d=b;var o=a("mvHQ"),i=a.n(o),s=a("fZjL"),n=a.n(s),r=a("//Fk"),l=a.n(r),c=a("NHnr"),d=a("IcnI"),u=a("zL8q"),p=(a.n(u),a("dmop")),m=a("Lf+Q"),h=a("RjI4");function v(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=window.localStorage.getItem("guide");t?(d.a.commit("switchAddStation",!0),e||d.a.commit("guideIndex",2)):d.a.commit("switchAddStation",!1)}function w(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments[1];if(t){var a=f(e);console.log("[INFO]:"+i()(a));var o=JSON.parse(a.header.frame_id);if(!a)return Object(u.Notification)({title:c.default.$t("titles.error"),message:c.default.$t("messages.notFindWaypoint")+e,type:"error",position:"top-left",offset:100}),void console.warn("[WARN]Can not find waypoint "+e);d.a.commit("wayPointMsg",a),console.log("[INFO]waypoint:\n-type: "+o.type+";\n-name: "+a.name+"."),d.a.commit("switchWaypointDetail",!0)}else d.a.commit("switchWaypointDetail",!1)}function f(t){for(var e=0;e<p.a.wayPointsMsg.waypoints.length;e++){var a=p.a.wayPointsMsg.waypoints[e];if(a.name===t)return a}}function g(t){d.a.state.userRole&&w(!0,t.currentTarget.name)}function b(t){if(p.a.wayPointsMsg)for(var e=0;e<p.a.wayPointsMsg.waypoints.length;e++)if(p.a.wayPointsMsg.waypoints[e].name===t)return!0;return!1}}},["NHnr"]);
//# sourceMappingURL=app.3559d0e909b1b329ab2d.js.map