webpackJsonp([1],{"/P5y":function(t,e){},"29EW":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Wc9H"),o=a.n(i),s=a("IaZV"),n=a.n(s),r=new o.a({id:"icon-signal2",use:"icon-signal2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-signal2">\r\n<defs><style type="text/css"></style></defs>\r\n<path d="M512.58 384.75A127.25 127.25 0 1 0 639.83 512a127.4 127.4 0 0 0-127.25-127.25z m0 174.5A47.25 47.25 0 1 1 559.83 512a47.3 47.3 0 0 1-47.25 47.25z" />\r\n</symbol>'});n.a.add(r);e.default=r},"90Fk":function(t,e,a){var i={"./WIFI.svg":"UGtj","./signal.svg":"OBSE","./signal2.svg":"29EW"};function o(t){return a(s(t))}function s(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}o.keys=function(){return Object.keys(i)},o.resolve=s,t.exports=o,o.id="90Fk"},C3lt:function(t,e){},EeCd:function(t,e){},FsDB:function(t,e){},HC6U:function(t,e,a){"use strict";var i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"electricityBox flex"},[e("div",{staticClass:"progressBox"},[e("el-progress",{attrs:{percentage:this.percentage,color:this.customColor}})],1)])},staticRenderFns:[]};var o=a("VU/8")({name:"electricity",components:{},data:function(){return{percentage:this.$store.state.battery,customColor:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}]}},mounted:function(){},methods:{},watch:{"$store.state.battery":function(t){this.percentage=t}}},i,!1,function(t){a("K19U")},"data-v-9bbcaa52",null);e.a=o.exports},Hf66:function(t,e){},ITPp:function(t,e,a){"use strict";e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/map_ostream_display",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"map_display";return c.a.commit("nowShowMapName",e),new l.a(function(e,a){var i=t.replace("/","");c.a.state[i+"Msg"]&&v(c.a.state[i+"Msg"]),m.a.topic[t].subscribe(function(t){c.a.commit(i+"Msg",t),console.log("init map succes"),v(t),e("display map")})})},e.j=function(t){var e=Number(c.a.state.scale);if(c.a.commit("zoomDisabled",2),"zoomIn"===t){if(c.a.commit("setScale",e*=1.2),e>2.5)return void c.a.commit("zoomDisabled",0);Object(d.e)(),Object(f.b)(),m.e.startZoom(m.d.scene.x+m.a.robotStage.x,m.d.scene.y+m.a.robotStage.y),m.e.zoom(1.2)}else{if(c.a.commit("setScale",e*=.8),e<.32)return void c.a.commit("zoomDisabled",1);Object(d.e)(),Object(f.b)(),m.e.startZoom(m.d.scene.x+m.a.robotStage.x,m.d.scene.y+m.a.robotStage.y),m.e.zoom(.8)}},e.e=h,e.d=function(){u.Loading.service({text:"加载中..."});var t=new ROSLIB.Message({seq:1,frame_id:"slam"});m.a.topic["/task_switch"].publish(t),console.log("[INFO]Start mapping"),u.Loading.service().close()},e.a=function(){if(c.a.state.rosMode===p.a.rosMode.gmapping)return void Object(u.Notification)({title:"警告",message:"当前状态为建图状态，请点击保存",type:"warning",position:"top-left",offset:100});u.Loading.service({text:"加载中..."});var t=new ROSLIB.Message({seq:2,frame_id:"slam"});m.a.topic["/task_switch"].publish(t),console.log("[INFO]continue mapping"),u.Loading.service().close()},e.h=function(t){u.Loading.service({text:"保存中..."});var e={seq:1,frame_id:"save_map_"+t};m.a.topic["/task_switch"].publish(new ROSLIB.Message(e)),setTimeout(function(){u.Loading.service().close(),Object(u.Notification)({title:"成功",message:"保存成功",type:"success",position:"top-left",offset:100})},2e3)},e.g=function(t){u.Loading.service({text:"保存中..."});var e={seq:1,frame_id:"save_map_"+t},a={seq:0,frame_id:"slam"};m.a.topic["/task_switch"].publish(new ROSLIB.Message(e)),setTimeout(function(){var t=new ROSLIB.Message(a);m.a.topic["/task_switch"].publish(t),setTimeout(function(){h(!1),u.Loading.service().close(),Object(u.Notification)({title:"成功",message:"保存成功",type:"success",position:"top-left",offset:100})},8e3)},1e3)},e.f=function(t){t?c.a.commit("switchUploadMap",!0):c.a.commit("switchUploadMap",!1)},e.i=function(t){var e=new ROSLIB.Message({header:{frame_id:"map"},info:{resolution:m.a.mapMsg.info.resolution,width:m.a.mapMsg.info.width,height:m.a.mapMsg.info.height,origin:{orientation:{x:m.a.mapMsg.info.origin.orientation.x,y:m.a.mapMsg.info.origin.orientation.y,z:m.a.mapMsg.info.origin.orientation.z,w:m.a.mapMsg.info.origin.orientation.w},position:{x:m.a.mapMsg.info.origin.position.x,y:m.a.mapMsg.info.origin.position.y,z:m.a.mapMsg.info.origin.position.z}}},data:t.base64});"map"==t.type?m.a.topic["/map_istream"].publish(e):"map_path"==t.type?m.a.topic["/map_istream_path"].publish(e):"map_display"==t.type?m.a.topic["/map_istream_display"].publish(e):"map_reflection"==t.type&&m.a.topic["/map_istream_reflection"].publish(e)},a.d(e,"c",function(){return w});var i=a("Xxa5"),o=a.n(i),s=a("exGp"),n=a.n(s),r=a("//Fk"),l=a.n(r),c=(a("NHnr"),a("IcnI")),u=a("zL8q"),m=(a.n(u),a("dmop")),p=a("djuq"),d=a("xrs3"),f=a("pDaU");function v(t){var e=new ROS2D.ImageMap({image:t.data,message:t.info});c.a.commit("base64MapData",t.data),m.a.mapMsg=t,m.a.imgMapStage&&m.d.scene.removeAllChildren(),m.a.imgMapStage=e,m.d.scene.addChild(e);var a=m.a.mapInfo.windowWidth/e.width;m.d.width=m.a.mapInfo.windowWidth,m.d.height=e.height*a,"gmapping"!==c.a.state.rosMode?(m.d.scaleToDimensions(e.width,e.height),m.d.shift(e.pose.position.x,e.pose.position.y)):!1===c.a.state.mappingFlag&&(m.d.scaleToDimensions(e.width,e.height),m.d.scene.x=m.a.mapInfo.windowWidth/2,m.d.scene.y=m.a.mapInfo.windowHeight/2,c.a.commit("mappingFlag",!0));var i={x:m.d.scene.x,y:m.d.scene.y};m.a.mapXY=i,Object(f.b)()}function h(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?c.a.commit("switchEditMapBtns",!0):c.a.commit("switchEditMapBtns",!1)}var g,w=(g=n()(o.a.mark(function t(){var e,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.a.state.base64MapData,a=document.createElement("a"),t.next=4,b(e);case 4:i=t.sent,document.createEvent("HTMLEvents").initEvent("click",!0,!0),a.download="map.png",a.href=URL.createObjectURL(i),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,canslelable:!0,view:window}));case 10:case"end":return t.stop()}},t,this)})),function(){return g.apply(this,arguments)});function b(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],i=window.atob(e[1]),o=i.length,s=new Uint8Array(o),n=0;n<o;++n)s[n]=i.charCodeAt(n);return new Blob([s],{type:a})}},IcnI:function(t,e,a){"use strict";var i,o=a("bOdI"),s=a.n(o),n=a("7+uW"),r=a("NYxO");n.default.use(r.a),e.a=new r.a.Store({state:(i={guideIndex:0,guideEndModule:!1,guideModule:!1,mapList:[],wayPointMsg:"",stationList:[],stationName:"",robotPosition:"",waypointsModule:!1,showAddStation:!1,trajectoryList:[],trajectoryModule:!1,showTrajectory:!1,trackDetail:"",delTrackName:"",deleteTrack:!1,showAddTrack:!1,uploadMap:!1,downloadMap:!1,scale:1,zoomDisabled:2,rosMode:"",navControlStatus:null,mappingFlag:!1,chargeStatus:null,showBattery:!1,battery:100,authorization:!1,authorizationPassword:"6022",developAuthorization:"343",role:"",userRole:null,batteryStatus:null,batteryState:null,edipMapModule:!1,showBranch:!1,wifiInfos:"",showWifiSetting:!1,addMap:!1,showUpdate:!1,nowMapName:"MAP",delMap:!1,delMapName:"",disabledMoveMap:!1},s()(i,"stationName",""),s()(i,"stationEdit",!1),s()(i,"showMoreBtns",!1),s()(i,"showDragModule",!1),s()(i,"base64MapData",""),s()(i,"statusArray",[]),s()(i,"serverContented",""),s()(i,"flexBeList",[]),s()(i,"mapMsg",null),s()(i,"map_ostreamMsg",null),s()(i,"map_ostream_pathMsg",null),s()(i,"map_ostream_displayMsg",null),s()(i,"map_ostream_reflectionMsg","map_display"),s()(i,"stamp",null),s()(i,"amclReflectionFLag",null),s()(i,"amclOriginFLag",null),i),mutations:{guideIndex:function(t,e){t.guideIndex=e},guideEndModule:function(t,e){t.guideEndModule=e},guideModule:function(t,e){t.guideModule=e},mapList:function(t,e){t.mapList=e},wayPointMsg:function(t,e){t.wayPointMsg=e},stationList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.stationList=e},switchWaypointList:function(t,e){t.waypointsModule=e},switchAddStation:function(t,e){t.showAddStation=e},setRobotPosition:function(t,e){t.robotPosition=e},setStationName:function(t,e){t.stationName=e},trajectoryList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.trajectoryList=e},switchTrackList:function(t,e){t.trajectoryModule=e},switchTrackModule:function(t,e){t.showTrajectory=e},delTrackName:function(t,e){t.delTrackName=e},switchDeleteTrack:function(t,e){t.deleteTrack=e},switchAddTrack:function(t,e){t.showAddTrack=e},setScale:function(t,e){t.scale=e},zoomDisabled:function(t,e){t.zoomDisabled=e},setRosMode:function(t,e){t.rosMode=e},setNavControlStatus:function(t,e){t.navControlStatus=e},mappingFlag:function(t,e){t.mappingFlag=e},chargeStatus:function(t,e){t.chargeStatus=e},showBattery:function(t,e){t.showBattery=e},switchBatteryStatus:function(t,e){t.batteryStatus=e},switchEditMapBtns:function(t,e){t.edipMapModule=e},switchAutherModule:function(t,e){t.authorization=e},userRole:function(t,e){t.userRole=e},subButtery:function(t,e){t.battery=e},batteryState:function(t,e){t.batteryState=e},switchBranch:function(t,e){t.showBranch=e},setWifiInfos:function(t,e){t.wifiInfos=e},switchWifiSetting:function(t,e){t.showWifiSetting=e},switchAddMap:function(t,e){t.addMap=e},switchUpdate:function(t,e){t.showUpdate=e},setNowMapName:function(t,e){t.nowMapName=e},switchDelMap:function(t,e){t.delMap=e},switchUploadMap:function(t,e){t.uploadMap=e},switchDownloadMap:function(t,e){t.downloadMap=e},setDelMapName:function(t,e){t.delMapName=e},switchMoveMap:function(t,e){t.disabledMoveMap=e},switchStationEdit:function(t,e){t.stationEdit=e},setTrackDetail:function(t,e){t.trackDetail=e},switchMoreBtns:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.showMoreBtns=e},switchDragModule:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.showDragModule=e},mapScale:function(t,e){t.scale=e},base64MapData:function(t,e){t.base64MapData=e},mapMsg:function(t,e){t.mapMsg=e},map_ostreamMsg:function(t,e){t.map_ostreamMsg=e},map_ostream_pathMsg:function(t,e){t.map_ostream_pathMsg=e},map_ostream_displayMsg:function(t,e){t.map_ostream_displayMsg=e},map_ostream_reflectionMsg:function(t,e){t.map_ostream_reflectionMsg=e},nowShowMapName:function(t,e){t.nowShowMapName=e},setStatusArray:function(t,e){t.statusArray=e},setServerContented:function(t,e){t.serverContented=e},flexBeList:function(t,e){t.flexBeList=e},stamp:function(t,e){t.stamp=e},amclOriginFLag:function(t,e){t.amclOriginFLag=e},amclReflectionFLag:function(t,e){t.amclReflectionFLag=e}},actions:{setUserRole:function(t,e){(0,t.commit)("userRole",e)}}})},JYMg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("HC6U"),o=a("Lf+Q"),s={name:"collection",components:{electricity:i.a},data:function(){return{disabledBtn:!1}},watch:{"$store.state.navControlStatus":function(t){this.disabledBtn=0!=t&&4!=t}},mounted:function(){},methods:{dispatchAGV:function(){Object(o.c)("Collection_Path_120s"),this.$notify({title:"成功",message:"任务派发成功",type:"success"})}}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"collectionBox"},[e("div",{staticClass:"head"},[this._v("点击图标派发任务")]),this._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.showBattery,expression:"this.$store.state.showBattery"}]},[e("electricity")],1),this._v(" "),e("div",{staticClass:"colBody flex"},[e("el-button",{staticClass:"collBtn",attrs:{type:"primary",icon:"el-icon-truck",circle:"",disabled:this.disabledBtn},on:{click:this.dispatchAGV}})],1)])},staticRenderFns:[]};var r=a("VU/8")(s,n,!1,function(t){a("FsDB")},"data-v-39216243",null);e.default=r.exports},K19U:function(t,e){},"Lf+Q":function(t,e,a){"use strict";e.e=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?o.a.commit("switchTrackList",!0):o.a.commit("switchTrackList",!1)},e.d=u,e.c=function(t){var e=p(t);Object(c.c)(e.name,1)},e.a=m,e.f=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(""===t.name)return void Object(s.Notification)({title:"警告",message:"请完善轨迹名称",type:"warning",position:"top-left",offset:100});if(!Object(r.c)(t.name))return void Object(s.Notification)({title:"警告",message:"该名称不合法",type:"warning",position:"top-left",offset:100});if(0===t.waypoints.length)return void Object(s.Notification)({title:"警告",message:"请至少选择一个站点",type:"warning",position:"top-left",offset:100});if(!a&&d(t.name))return void Object(s.Notification)({title:"警告",message:"该轨迹名称已存在",type:"warning",position:"top-left",offset:100});if(Object(l.d)(t.name))return void Object(s.Notification)({title:"警告",message:"该名称与站点名称重复",type:"warning",position:"top-left",offset:100});for(var i=t.waypoints,o=[],c=0;c<i.length;c++){var p=i[c];o.push(Object(l.c)(p))}var f=new ROSLIB.Message({name:t.name,waypoints:o});a?(m(e,!0),setTimeout(function(){n.a.topic.addTrajectoryTopic.publish(f)},1e3)):(n.a.topic.addTrajectoryTopic.publish(f),Object(s.Notification)({title:"成功",message:"轨迹添加成功",type:"success",position:"top-left",offset:100}));u(!1)},e.b=d;var i=a("mvHQ"),o=(a.n(i),a("NHnr"),a("IcnI")),s=a("zL8q"),n=(a.n(s),a("dmop")),r=a("RjI4"),l=a("xrs3"),c=a("rFWt");function u(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=window.localStorage.getItem("guide");t?(o.a.commit("switchAddTrack",!0),e||o.a.commit("guideIndex",3)):o.a.commit("switchAddTrack",!1)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=p(t),i=new ROSLIB.Message(a);console.log("delete Trajectory Name:"+t),n.a.topic.delTrajTopic.publish(i),e||Object(s.Notification)({title:"成功",message:"轨迹删除成功",type:"success",position:"top-left",offset:100})}function p(t){for(var e,a=0;a<o.a.state.trajectoryList.length&&(e=o.a.state.trajectoryList[a]).name!==t;a++);return e}function d(t){if(o.a.state.trajectoryList)for(var e=0;e<o.a.state.trajectoryList.length;e++)if(o.a.state.trajectoryList[e].name===t)return!0;return!1}},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),o=a("zL8q"),s=a.n(o),n=(a("tvR6"),{name:"App",components:{Home:a("wUZA").default}}),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view",[e("Home")],1)],1)},staticRenderFns:[]};var l=a("VU/8")(n,r,!1,function(t){a("Hf66")},null,null).exports,c=a("/ocq"),u=function(t){t(a("wUZA"))};i.default.use(c.a);var m=new c.a({mode:"hash",routes:[{path:"*",component:u},{path:"/home",name:"home",component:u,meta:{keepAlive:!1}},{path:"/collection",name:"collection",component:function(t){t(a("JYMg"))}}]}),p=a("IcnI"),d=a("v5o6"),f=a.n(d),v=(a("jcZh"),{name:"svg-icon",props:{iconClass:{type:String,required:!0},className:{type:String}},data:function(){return{}},computed:{iconName:function(){return"#icon-"+this.iconClass},iconName2:function(){return"#icon-"+this.iconClass+"2"},svgClass:function(){return this.className?"svg-icon "+this.className:"svg-icon"}}}),h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{class:this.svgClass,attrs:{"aria-hidden":"true"}},[e("use",{staticClass:"useIcon",attrs:{"xlink:href":this.iconName}}),this._v(" "),e("use",{staticClass:"useIcon2",attrs:{"xlink:href":this.iconName2}})])},staticRenderFns:[]};var g=a("VU/8")(v,h,!1,function(t){a("bu+e")},"data-v-7522a5ee",null).exports;i.default.component("svg-icon",g);var w,b=a("90Fk");(w=b).keys().map(w);a("dmop");f.a.attach(document.body),i.default.filter("numFilter",function(t){var e=Number(t).toFixed(2);return Number(e)}),i.default.config.productionTip=!1,i.default.use(s.a);var y=new i.default({el:"#app",router:m,store:p.a,components:{App:l},template:"<App/>"});e.default=y},NYko:function(t,e){},OBSE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Wc9H"),o=a.n(i),s=a("IaZV"),n=a.n(s),r=new o.a({id:"icon-signal",use:"icon-signal-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-signal">\r\n<defs><style type="text/css"></style></defs>\r\n<path d="M342.71 292.35a40 40 0 0 0-56.57 0 310.62 310.62 0 0 0 0 439.29 40 40 0 1 0 56.57-56.57 230.62 230.62 0 0 1 0-326.15 40 40 0 0 0 0-56.57z" />\r\n<path d="M737.86 292.35a40 40 0 0 0-56.57 56.57 230.62 230.62 0 0 1 0 326.15 40 40 0 1 0 56.57 56.57 310.62 310.62 0 0 0 0-439.29z" />\r\n<path d="M89.44 512c0-111.21 43.31-215.76 121.94-294.4a40 40 0 0 0-56.57-56.6 496 496 0 0 0 0 701.94 40 40 0 0 0 56.57-56.57C132.75 727.76 89.44 623.21 89.44 512z" />\r\n<path d="M978.21 325.25A493.26 493.26 0 0 0 869.19 161a40 40 0 1 0-56.57 56.57C891.25 296.24 934.56 400.79 934.56 512s-43.31 215.76-121.94 294.4a40 40 0 1 0 56.57 56.6 496.86 496.86 0 0 0 109-537.72z" />\r\n</symbol>'});n.a.add(r);e.default=r},Pqsl:function(t,e){t.exports={ip:window.location.hostname}},"QFh+":function(t,e){},QblX:function(t,e){},RjI4:function(t,e,a){"use strict";e.h=function(){return new o.a(function(t,e){var a=new ROSLIB.TFClient({ros:r.c,fixedFrame:"map",angularThres:.01,transThres:.01,repubServiceName:r.b+"/republish_tfs"});a.subscribe("odom",function(t){r.a.tfMsg.map2odom={header:{stamp:null},transform:t}}),a.subscribe("base_footprint",function(t){r.a.tfMsg.map2base_footprint={header:{stamp:null},transform:t}}),a.subscribe("base_laser",function(t){r.a.tfMsg.map2base_laser={header:{stamp:null},transform:t}});var i=new ROSLIB.TFClient({ros:r.c,fixedFrame:"base_link",angularThres:.01,transThres:.01,repubServiceName:r.b+"/republish_tfs"});i.subscribe("base_laser",function(t){r.a.tfMsg.base_link2base_laser={header:{stamp:null},transform:t}}),console.log("sub tf save info"),t("tfClient")})},e.k=u,e.l=function(t){if(t===n.a.state.authorizationPassword){n.a.dispatch("setUserRole","Administrator");var e=window.localStorage;return e.setItem("authorizationPassword",t),e.setItem("role","Administrator"),u(!1),!0}if(t===n.a.state.developAuthorization){n.a.dispatch("setUserRole","developer");var e=window.localStorage;return e.setItem("authorizationPassword",t),e.setItem("role","developer"),u(!1),!0}Object(s.Notification)({title:"错误",message:"密码错误，请重新输入",type:"error",position:"top-left",offset:100});var e=window.localStorage;return e.removeItem("authorizationPassword"),!1},e.f=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new o.a(function(e,a){if(t){m=0;var i=null;r.a.topic["/move_base/GlobalPlanner/plan"].subscribe(function(t){null!=i&&r.d.scene.removeChild(i),t.poses.length>0&&(i=new ROS2D.PathShape({path:t,strokeSize:.17,strokeColor:createjs.Graphics.getRGB(69,182,69,.9)}),r.a.globalPlanStage=i,r.d.scene.addChild(i))})}else{if(1!=++m)return;r.a.topic["/move_base/GlobalPlanner/plan"].unsubscribe(),r.d.scene.removeChild(r.a.globalPlanStage)}console.log("get glo"),e("get globalplan")})},e.e=function(t,e){t?r.a.topic["/scan_rectified"].subscribe(function(t){r.a.laserScanMsg=t,r.a.laserScanStage&&r.d.scene.removeChild(r.a.laserScanStage);var e={x:r.a.tfMsg.map2base_laser.transform.translation.x,y:-r.a.tfMsg.map2base_laser.transform.translation.y,rotation:r.d.scene.rosQuaternionToGlobalTheta(r.a.tfMsg.map2base_laser.transform.rotation)};r.a.laserScanPose=e;for(var a=[],i=0;i<t.ranges.length;i+=10)if(!("inf"===t.ranges[i]||"nan"===t.ranges[i]||t.ranges[i]<t.range_min||t.ranges[i]>t.range_max)){var o=t.angle_min+t.angle_increment*i,s=e.rotation/180*Math.PI,n=-o+s,l=Math.cos(n)*t.ranges[i],c=Math.sin(n)*t.ranges[i],u=e.x+l,m=e.y+c;a.push({x:u,y:m})}r.a.laserScanStage=function(t,e){var a=new createjs.Container,i=createjs.Graphics.getRGB(255,153,0,1),o=new createjs.Graphics;o.beginFill(i);for(var s=0;s<t.length;s++){var n=t[s];o.moveTo(n.x,n.y),o.drawCircle(n.x,n.y,.05)}o.endFill();var r=new createjs.Shape(o);return a.addChild(r),a}(a),r.d.scene.addChild(r.a.laserScanStage)}):(r.a.topic["/scan_rectified"].unsubscribe(),r.d.scene.removeChild(r.a.laserScanStage))},e.b=function(){if(n.a.state.batteryState==c.a.butteryStatus.charging)return c.a.butteryStatus.chargingFlag=!0,void clearInterval(c.a.butteryStatus.timeoutObj);if(n.a.state.batteryState==c.a.butteryStatus.warning){if(c.a.butteryStatus.chargingFlag)return;c.a.butteryStatus.chargingFlag=!0,c.a.butteryStatus.timeoutObj=setInterval(function(){Object(s.Notification)({title:"警告",message:"电池电量过低，请及时充电。",type:"warning",position:"top-left",offset:100,duration:0})},c.a.butteryStatus.timeout)}},e.d=function(t,e){var a=null;return function(){var i=this,o=arguments;a&&(clearTimeout(a),a=null),a=setTimeout(function(){t.apply(i,o)},e)}},e.i=function(t){"success"==t.type&&Object(l.c)();Object(s.Notification)({title:t.title,message:t.message,type:t.type,position:"top-left",offset:100}),Object(s.Message)({message:t.message,type:t.type,center:!0,duration:0,showClose:!1,customClass:"bottomTaskStatus"})},e.c=function(t){return!/[`~!@#$%^&*()\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘'， 。、]/im.test(t)},e.a=function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},e.j=function(t,e){var a,i,o=t;e?(a=2*o.w*o.z,i=1-2*Math.pow(o.z,2)):(a=2*(o.w*o.z+o.x*o.y),i=1-2*(Math.pow(o.y,2)+Math.pow(o.z,2)));return Math.atan2(a,i)},e.g=function(t,e){var e=e||1e-4,a=0;for(var i in t)t.hasOwnProperty(i)&&(a+=t[i]*t[i]);return Math.abs(a-1)<e},e.m=function(t){return{x:0,y:0,z:Math.sin(t/2),w:Math.cos(t/2)}},e.n=function(t){t.forEach(function(t){delete t.children});var e={};t.forEach(function(t){e[t.label]=t});var a=[];return t.forEach(function(t){var i=e[t.parName];i?(i.children||(i.children=[])).push(t):a.push(t)}),a};var i=a("//Fk"),o=a.n(i),s=(a("NHnr"),a("zL8q")),n=(a.n(s),a("IcnI")),r=a("dmop"),l=a("TSWK"),c=a("djuq");function u(t){t?n.a.commit("switchAutherModule",!0):n.a.commit("switchAutherModule",!1)}var m=0},TSWK:function(t,e,a){"use strict";e.c=function(){var t=new ROSLIB.Message({seq:1,frame_id:o()({op:"dbparam",topic:"query",name:""})});n.a.topic["/task_switch"].publish(t)},e.b=function(t){if(""==t)return void Object(s.Notification)({title:"警告",message:"内容不能为空",type:"warning",position:"top-left",offset:100});if(!Object(r.c)(t))return void Object(s.Notification)({title:"警告",message:"该名称不合法",type:"warning",position:"top-left",offset:100});s.Loading.service({text:"加载中..."});var e={op:"dbparam",topic:"add",name:t},a=new ROSLIB.Message({seq:1,frame_id:o()(e)});return n.a.topic["/task_switch"].publish(a),s.Loading.service().close(),!0},e.d=function(t){s.Loading.service({text:"切换中..."});var e={op:"dbparam",topic:"select",name:t},a=new ROSLIB.Message({seq:1,frame_id:o()(e)});n.a.topic["/task_switch"].publish(a)},e.a=function(t){s.Loading.service({text:"删除中..."});var e={op:"dbparam",topic:"remove",name:t},a=new ROSLIB.Message({seq:1,frame_id:o()(e)});n.a.topic["/task_switch"].publish(a)};var i=a("mvHQ"),o=a.n(i),s=(a("NHnr"),a("IcnI"),a("zL8q")),n=(a.n(s),a("dmop")),r=(a("djuq"),a("RjI4"))},UGtj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Wc9H"),o=a.n(i),s=a("IaZV"),n=a.n(s),r=new o.a({id:"icon-WIFI",use:"icon-WIFI-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="icon-WIFI"><defs><style type="text/css"></style></defs><path d="M926.634667 294.912a32 32 0 1 1-39.936 50.005333C780.512 260.128 649.824 213.333333 512.053333 213.333333c-137.813333 0-268.544 46.826667-374.752 131.669334a32 32 0 1 1-39.936-50.005334C214.784 201.194667 359.562667 149.333333 512.053333 149.333333c152.437333 0 297.173333 51.818667 414.581334 145.578667z m-235.413334 298.133333a32 32 0 0 1-38.442666 51.178667A233.418667 233.418667 0 0 0 512.021333 597.333333c-51.541333 0-100.48 16.629333-140.8 46.912a32 32 0 1 1-38.442666-51.157333A297.408 297.408 0 0 1 512.021333 533.333333c65.504 0 127.893333 21.184 179.2 59.722667z m128-149.344a32 32 0 0 1-38.442666 51.168C703.829333 437.066667 610.378667 405.333333 512.032 405.333333c-98.368 0-191.850667 31.754667-268.8 89.578667a32 32 0 1 1-38.453333-51.157333C292.736 377.664 399.669333 341.333333 512.032 341.333333c112.32 0 219.242667 36.309333 307.189333 102.368zM512 853.333333a64 64 0 1 1 0-128 64 64 0 0 1 0 128z" p-id="2615" /></symbol>'});n.a.add(r);e.default=r},WsHc:function(t,e){},Y9Ds:function(t,e){},bqqV:function(t,e){},"bu+e":function(t,e){},dGfW:function(t,e){},dYCh:function(t,e){},djuq:function(t,e,a){"use strict";a.d(e,"a",function(){return i});var i={NavCtrl:{stop:0,start:1,pause:2},NavCtrlStatus:{error:-1,idling:0,running:1,paused:2,completed:3,cancelled:4},rosMode:{navigation:"navigation",gmapping:"gmapping"},NetworkMode:{ap:"ap",wifi:"wifi"},gitMethods:{add:"add",remove:"remove",select:"select",query:"query"},POSE:{poseStartPoint:null,editContainer:null,poseStartPointShape:null},butteryStatus:{charging:"charging",success:"success",warning:"warning",timeout:6e4,timeoutObj:null,chargingFlag:!1},joystickObj:{up:!1,down:!1,left:!1,right:!1,upTimeout:null,downTimeout:null,leftTimeout:null,rightTimeout:null,upTime:0,downTime:0,leftTime:0,rightTime:0,maxSpeed:.4},connecting:!1,connectFlg:!1,serConnecting:!1,serConnectFlg:!1,reconnectSettimeout:null,timeout:3e3}},dmop:function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"d",function(){return o}),a.d(e,"e",function(){return s}),a.d(e,"b",function(){return j}),a.d(e,"a",function(){return O});var i,o,s,n,r,l,c=a("Xxa5"),u=a.n(c),m=a("exGp"),p=a.n(m),d=a("//Fk"),f=a.n(d),v=a("C4MV"),h=a.n(v),g=a("ifoU"),w=a.n(g),b=(a("NHnr"),a("IcnI")),y=a("zL8q"),_=(a.n(y),a("RjI4")),x=a("djuq"),C=(a("TSWK"),a("ITPp")),F=a("kqvs"),S=a("Pqsl"),j=(a.n(S),""),k=new w.a,M="",O=new I;function I(){}function L(){return new f.a(function(t,e){(i=new ROSLIB.Ros({url:"ws://"+S.ip+":9090"})).on("connection",function(){console.log("[INFO]Connected to rosbridge "+S.ip+"."),t("ros Connected"),x.a.connecting=!0,clearTimeout(x.a.reconnectSettimeout),x.a.connectFlg&&window.location.reload()}),i.on("close",function(){console.log("[INFO]Rosbridge server "+S.ip+" closed."),Object(y.Notification)({title:"错误",message:"Rosbridge连接已关闭",type:"error",position:"top-left",offset:100}),e("Rosbridge连接已关闭"),x.a.connecting=!1,T()}),i.on("error",function(t){Object(y.Notification)({title:"错误",message:"Rosbridge连接失败",type:"error",position:"top-left",offset:100}),console.log("[INFO] rosbridge error"+t),e("Rosbridge连接失败"),x.a.connecting=!1,T()}),"developer"==(n=window.localStorage.getItem("role"))&&b.a.dispatch("setUserRole","developer"),"Administrator"==n&&b.a.dispatch("setUserRole","Administrator")})}function T(){x.a.connectFlg=!0,x.a.connecting||(x.a.reconnectSettimeout&&clearTimeout(x.a.reconnectSettimeout),x.a.reconnectSettimeout=setTimeout(function(){L()},x.a.timeout))}function N(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];console.log(e),y.Loading.service().close()}I.prototype.register=function(t,e,a){if(!this.hasOwnProperty(t)){var i=a.fnGet||function(){return e},o=a.fnSet||function(){};h()(this,t,{get:i,set:function(t){!function(t){t!==e&&(e=t.hasOwnProperty("property")?t.value:t)}(t),o(t)}})}},I.prototype.syncToLocalStorage=function(){},$(function(){var t,e=(t=p()(u.a.mark(function t(){var e,a,n,c,m,p,d,v,h,g;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,void(window.onbeforeunload=function(t){event.clientX>document.body.clientWidth&&event.clientY<0&&event.altKey||(i&&i.close(),console.log("close roscon"))});case 3:return e=t.sent,t.next=6,new f.a(function(t,e){O.register("topic",{},{}),O.register("wsTopic",{},{}),O.register("tfMsg",{},{}),O.register("cmdStringTopic",{},{}),O.register("mapMsg",{},{}),O.register("mapInfo",null,{}),O.register("navCtrlStatus",null,{}),O.register("mapStage",null,{}),O.register("wayPointsMsg",{},{}),O.register("robotPoseMsg",{},{}),O.register("robotStage",{},{}),O.register("waypointsMessage",{},{}),O.register("waypointsStage",{},{}),O.register("mapXY",{},{}),O.register("imgMapStage",{},{}),O.register("laserScanStage",{},{}),O.register("laserScanPose",{},{}),O.register("footprintStage",{},{}),O.register("globalPlanStage",{},{}),O.register("tabLocalPlanStage",{},{}),O.register("taskState",{},{}),O.register("initialPoseStage",{},{}),t("register OBJ"),console.log("register OBJ ok")});case 6:return a=t.sent,t.next=9,L();case 9:return n=t.sent,t.next=12,Object(_.h)();case 12:return c=t.sent,t.next=15,new f.a(function(t,e){var a=new ROSLIB.Topic({ros:i,name:"/diagnostics_agg",messageType:"diagnostic_msgs/DiagnosticArray"});O.topic["/diagnostics_agg"]=a,a.subscribe(function(e){var a={},i=[],o=[];b.a.commit("stamp",e.header.stamp),e.status.map(function(t){k.set(String(t.name),t),a[t.name]=t;var e=t.name.lastIndexOf("/");0!=e?i.push({label:t.name,levelnum:t.level,parName:t.name.substr(0,e)}):(i.push({label:t.name,levelnum:t.level,parName:""}),o.push(t.name))}),!o.includes("/DEVICES")&&o.length>0&&(j=o[0]),k.has(j+"/ALGORITHM/AMCL/amcl_reflection_class")&&(0==a[j+"/ALGORITHM/AMCL/amcl_reflection_class"].level?b.a.commit("amclReflectionFLag",0):b.a.commit("amclReflectionFLag",1)),k.has(j+"/ALGORITHM/AMCL/amcl_origin_class")&&(0==a[j+"/ALGORITHM/AMCL/amcl_origin_class"].level?b.a.commit("amclOriginFLag",0):b.a.commit("amclOriginFLag",1)),k.clear(),b.a.commit("setStatusArray",i),b.a.state.serverContented&&Object(F.a)("/diagnostics_agg",e),console.log("get NS for agg"),t("get NS for agg")})});case 15:return m=t.sent,t.next=18,new f.a(function(t,e){JSON.parse(window.localStorage.getItem("wsTopicConfig")).forEach(function(t){var e=t.name;switch(O.topic[e]=new ROSLIB.Topic({ros:i,name:"/diagnostics_agg"==t.name?"/diagnostics_agg":j+t.name,messageType:t.type}),O.topic[e].advertise(),e){case"/robot_pose":O.topic[e].subscribe(function(t){O.robotPoseMsg=t});break;case"/task_state":O.topic[e].subscribe(function(t){t.values.map(function(t,e){if("auto_charge"===t.key)switch(b.a.commit("chargeStatus",t.value),t.value){case"0":b.a.commit("switchBatteryStatus",!1);break;case"1":b.a.commit("switchBatteryStatus",!0)}else"cartographer"===t.key&&(O.taskState=t.value,"0"===t.value?b.a.commit("setRosMode",x.a.rosMode.navigation):"1"===t.value&&b.a.commit("setRosMode",x.a.rosMode.gmapping))})});break;case"/battery":O.topic[e].subscribe(function(t){if(t.percentage){var e=Math.round(100*t.percentage);0<=e<=100&&(e<=15?b.a.state.batteryStatus?(b.a.commit("batteryState",x.a.butteryStatus.charging),Object(_.b)()):(b.a.commit("batteryState",x.a.butteryStatus.warning),Object(_.b)()):b.a.state.batteryStatus?b.a.commit("batteryState",x.a.butteryStatus.charging):b.a.commit("batteryState",x.a.butteryStatus.success),b.a.commit("subButtery",e),b.a.commit("showBattery",!0))}});break;case"/task_switch":O.topic[e].subscribe(function(t){if(t.frame_id.startsWith("update_response"))switch(t.seq){case 1:y.Loading.service().close(),Object(y.Notification)({title:"成功",message:"更新成功,请重启系统",type:"success",position:"top-left",offset:100}),Object(y.Message)({message:"更新成功",type:"success",center:!0,duration:0,showClose:!1,customClass:"bottomTaskStatus"});break;case 0:y.Loading.service().close(),Object(y.Notification)({title:"错误",message:t.frame_id.replace(/update_response_/,""),type:"error",position:"top-left",offset:100}),Object(y.Message)({message:"更新失败,失败原因："+t.frame_id.replace(/update_response_/,""),type:"error",center:!0,duration:0,showClose:!1,customClass:"bottomTaskStatus"})}if(t.frame_id.startsWith("slam"))switch(t.seq){case 1:window.localStorage.setItem("mappingStatus","1");break;case 0:window.localStorage.setItem("mappingStatus","0")}});break;case"/flexbe/behavior_list":O.topic[e].subscribe(function(t){var e=JSON.parse(t.data.replace(/\r|\n/gi,"").replace(/\r|\t/gi,""));b.a.commit("flexBeList",e)});break;case"/flexbe/behavior_updated":O.topic[e].subscribe(function(t){M!=t.data&&(M=t.data,O.behaviorUpdateStatus=t,window.localStorage.setItem("flexBeTaskStatus",t.data),"behavior_entrance"===t.data?(r="info",l="进入任务模式",Object(y.Notification)({title:"成功",message:"发布任务成功",type:"success",position:"top-left",offset:100})):"behavior_exit"===t.data||""===t.data?(r="info",l="空闲模式"):(r="info",l="正在执行任务: "+t.data),Object(y.Message)({message:l,type:r,center:!0,duration:0,showClose:!1,customClass:"bottomTaskStatus"}))})}"sub"==t.subFlag&&O.topic[e].subscribe(function(t){b.a.state.serverContented&&Object(F.a)(e,t)})}),console.log("init topics"),console.log(O.topic),t("init topics")});case 18:return p=t.sent,t.next=21,new f.a(function(t,e){var a=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight,n=a/i,r=a,l=i;a>i?(r=i*n,l=i):(r=a,l=a/n),O.mapInfo={windowWidth:r,windowHeight:l},o=new ROS2D.Viewer({divID:"mapNavDiv",width:O.mapInfo.windowWidth,height:O.mapInfo.windowHeight}),s=new ROS2D.ZoomView({rootObject:o.scene});var c=o.scene;createjs.Touch.enable(c),createjs.Ticker.setFPS(25),c.enableMouseOver(10),createjs.Touch.enable(c),c.mouseMoveOutside=!0,c.on("mousedown",function(t){b.a.state.disabledMoveMap||(t.currentTarget.offset={x:this.x-t.stageX,y:this.y-t.stageY})}),c.on("pressmove",function(t){b.a.state.disabledMoveMap||(t.currentTarget.x=t.stageX+t.currentTarget.offset.x,t.currentTarget.y=t.stageY+t.currentTarget.offset.y,c.update())}),c.on("mousewheel",function(t){}),c.update(),createjs.Ticker.addEventListener("tick",function(){c.update()}),console.log("init stage success"),t("initStage success")});case 21:return d=t.sent,t.next=24,Object(C.b)();case 24:return v=t.sent,t.next=27,Object(_.f)();case 27:if(h=t.sent,"localhost"!=S.ip){t.next=35;break}return t.next=31,Object(F.b)();case 31:g=t.sent,N(e,a,n,m,c,p,d,v,h,g),t.next=36;break;case 35:N(e,a,n,m,c,p,d,v,h);case 36:t.next=42;break;case 38:t.prev=38,t.t0=t.catch(0),y.Loading.service().close(),console.log(t.t0);case 42:case"end":return t.stop()}},t,this,[[0,38]])})),function(){return t.apply(this,arguments)});new Date,y.Loading.service({text:"加载中..."}),e()})},eGOx:function(t,e){},fAeN:function(t,e){},"jG+7":function(t,e){},jcZh:function(t,e){},kqvs:function(t,e,a){"use strict";e.a=function(t,e){c.a.wsTopic[t].publish(e)},e.b=u;var i,o=a("//Fk"),s=a.n(o),n=a("zL8q"),r=(a.n(n),a("IcnI")),l=a("djuq"),c=a("dmop");function u(){return new s.a(function(t,e){var a=window.localStorage.getItem("serIp");(i=new ROSLIB.Ros({url:"ws://"+a})).on("connection",function(){console.log("[INFO]Connected to rosbridge "+a+"."),Object(n.Notification)({title:"成功",message:"服务器 "+a+" 连接成功",type:"ok",position:"top-right",offset:100}),r.a.commit("setServerContented","1"),l.a.serConnecting=!0,clearTimeout(l.a.reconnectSettimeout),t("ros Connected"),new s.a(function(t,e){var a=JSON.parse(window.localStorage.getItem("wsTopicConfig"));a.forEach(function(t){var e=t.name;c.a.wsTopic[e]=new ROSLIB.Topic({ros:i,name:"/diagnostics_agg"==t.name?"/diagnostics_agg":c.b+t.name,messageType:t.type}),c.a.wsTopic[e].advertise(),"pub"==t.subFlag&&c.a.wsTopic[e].subscribe(function(t){c.a.topic[e].publish(t)})})})}),i.on("close",function(){console.log("[INFO]Rosbridge server "+a+" closed."),Object(n.Notification)({title:"错误",message:"服务器连接已关闭",type:"error",position:"top-right",offset:100}),r.a.commit("setServerContented",""),e("服务器连接已关闭"),l.a.serConnecting=!1,m()}),i.on("error",function(){Object(n.Notification)({title:"错误",message:"服务器连接失败",type:"error",position:"top-right",offset:100}),console.log("[INFO] rosbridge error"),r.a.commit("setServerContented",""),e("服务器连接失败"),l.a.serConnecting=!1,m()})})}function m(){l.a.serConnectFlg=!0,l.a.serConnecting||(l.a.reconnectSettimeout&&clearTimeout(l.a.reconnectSettimeout),l.a.reconnectSettimeout=setTimeout(function(){u()},l.a.timeout))}},lLry:function(t,e){},pDaU:function(t,e,a){"use strict";e.b=function(){return new o.a(function(t,e){n.a.robotStage&&n.d.scene.removeChild(n.a.robotStage);var a=new ROS2D.NavigationArrow({size:20,strokeSize:1,fillColor:createjs.Graphics.getRGB(255,255,153,.66),pulse:!0});a.visible=!1,n.d.scene.addChild(a);var i=!1;n.a.topic["/robot_pose"].subscribe(function(e){n.a.robotPose=e,a.x=e.position.x,a.y=-e.position.y,i||(a.scaleX=1/n.d.scene.scaleX,a.scaleY=1/n.d.scene.scaleY,i=!0),a.rotation=n.d.scene.rosQuaternionToGlobalTheta(e.orientation),a.visible=!0,n.a.robotStage=a,t()})})},e.a=function(t){var e=null,a=null,i=null,o=null,s=!1,l=!1,c=!0;n.d.scene.addEventListener("stagemousedown",function(a){if(c&&(s||(e=n.d.scene.globalToRos(a.stageX,a.stageY),s=!0),l&&s)){if("initPose"==t){for(var i=[],r=0;r<36;r++)i[r]=0;i[0]=.25,i[7]=.25,i[35]=Math.pow(Math.PI/12,2);var u=new ROSLIB.Message({header:{seq:0,frame_id:"map"},pose:{pose:{position:e,orientation:o},covariance:i}});n.a.topic["/initialpose"].publish(u)}else{var m=new ROSLIB.Message({header:{seq:2,stamp:{},frame_id:"map"},pose:{position:e,orientation:o}});n.a.topic["/move_base_simple/goal"].publish(m)}n.d.scene.removeChild(n.a.initialPoseStage),n.d.scene.removeEventListener("stagemousemove",{}),c=!1}}),n.d.scene.addEventListener("stagemousemove",function(t){var u,m,p,d,f,v;s&&c&&(n.a.initialPoseStage&&n.d.scene.removeChild(n.a.initialPoseStage),a=n.d.scene.globalToRos(t.stageX,t.stageY),o=r(e,a),i=n.d.scene.rosQuaternionToGlobalTheta(o),n.a.initialPoseStage=(m=(u={}).size||.5,p=u.strokeSize||2,u.strokeColor,d=u.fillColor||"#ffe83b",f=u.fillColorExt||createjs.Graphics.getRGB(0,150,136,.7),(v=new createjs.Graphics).beginFill(f),v.drawCircle(2*m,2*m,1.5*m),v.endFill(),v.beginFill(d),v.drawCircle(2*m,2*m,m/1.2),v.endFill(),v.setStrokeStyle(p),v.beginFill(d),v.moveTo(2*m,.6*m),v.lineTo(1.3*m,2*m),v.lineTo(2.7*m,2*m),v.closePath(),v.endFill(),v.endStroke(),function(t,e){e.size;var a={x:e.regX||0,y:e.regY||0,rotation:e.rotation||0},i=(e.scaleX,e.scaleY,new createjs.Container),o=new createjs.Shape(t);return o.regX=a.x,o.regY=a.y,o.rotation=a.rotation,i.addChild(o),i}(v,{regX:2*m,regY:2*m,rotation:90,scaleX:.25,scaleY:.25})),n.d.scene.addChild(n.a.initialPoseStage),n.a.initialPoseStage.x=e.x,n.a.initialPoseStage.y=-e.y,n.a.initialPoseStage.rotation=i,l=!0)})};var i=a("//Fk"),o=a.n(i),s=(a("NHnr"),a("IcnI"),a("zL8q")),n=(a.n(s),a("dmop"));a("RjI4");var r=function(t,e){var a=t.x-e.x,i=t.y-e.y,o=Math.atan2(a,i);o>=0&&o<=Math.PI?o+=3*Math.PI/2:o-=Math.PI/2,o+=Math.PI;var s=Math.sin(-o/2),n=Math.cos(-o/2);return new ROSLIB.Quaternion({x:0,y:0,z:s,w:n})}},rFWt:function(t,e,a){"use strict";e.d=function(t){n(t,1)},e.c=n,e.b=function(t){switch(t){case"up":if(s.a.joystickObj.up=!0,s.a.joystickObj.up&&s.a.joystickObj.down)return void r({linear:0,angular:0});s.a.joystickObj.upTimeout=setInterval(function(){s.a.joystickObj.upTime+=.05,s.a.joystickObj.upTime>=s.a.joystickObj.maxSpeed&&(s.a.joystickObj.upTime=s.a.joystickObj.maxSpeed),s.a.joystickObj.left?r({linear:s.a.joystickObj.upTime,angular:s.a.joystickObj.leftTime}):s.a.joystickObj.right?r({linear:s.a.joystickObj.upTime,angular:-s.a.joystickObj.rightTime}):r({linear:s.a.joystickObj.upTime})},400);break;case"down":if(s.a.joystickObj.down=!0,s.a.joystickObj.up&&s.a.joystickObj.down)return void r({linear:0,angular:0});s.a.joystickObj.downTimeout=setInterval(function(){s.a.joystickObj.downTime+=.05,s.a.joystickObj.downTime>=s.a.joystickObj.maxSpeed&&(s.a.joystickObj.downTime=s.a.joystickObj.maxSpeed),s.a.joystickObj.left?r({linear:-s.a.joystickObj.downTime,angular:s.a.joystickObj.leftTime}):s.a.joystickObj.right?r({linear:-s.a.joystickObj.downTime,angular:-s.a.joystickObj.rightTime}):r({linear:-s.a.joystickObj.downTime})},400);break;case"left":if(s.a.joystickObj.left=!0,s.a.joystickObj.left&&s.a.joystickObj.right)return void r({linear:0,angular:0});s.a.joystickObj.leftTimeout=setInterval(function(){s.a.joystickObj.leftTime+=.05,s.a.joystickObj.leftTime>=s.a.joystickObj.maxSpeed&&(s.a.joystickObj.leftTime=s.a.joystickObj.maxSpeed),s.a.joystickObj.up?r({linear:s.a.joystickObj.upTime,angular:s.a.joystickObj.leftTime}):s.a.joystickObj.down?r({linear:-s.a.joystickObj.downTime,angular:s.a.joystickObj.leftTime}):r({angular:s.a.joystickObj.leftTime})},400);break;case"right":if(s.a.joystickObj.right=!0,s.a.joystickObj.left&&s.a.joystickObj.right)return void r({linear:0,angular:0});s.a.joystickObj.rightTimeout=setInterval(function(){s.a.joystickObj.rightTime+=.05,s.a.joystickObj.rightTime>=s.a.joystickObj.maxSpeed&&(s.a.joystickObj.rightTime=s.a.joystickObj.maxSpeed),s.a.joystickObj.up?r({linear:s.a.joystickObj.upTime,angular:-s.a.joystickObj.rightTime}):s.a.joystickObj.down?r({linear:-s.a.joystickObj.downTime,angular:-s.a.joystickObj.rightTime}):r({angular:-s.a.joystickObj.rightTime})},400)}},e.e=function(t){switch(t){case"up":s.a.joystickObj.upTime=0,s.a.joystickObj.up=!1,clearInterval(s.a.joystickObj.upTimeout),r({linear:s.a.joystickObj.upTime});break;case"down":s.a.joystickObj.downTime=0,s.a.joystickObj.down=!1,clearInterval(s.a.joystickObj.downTimeout),r({linear:s.a.joystickObj.downTime});break;case"left":s.a.joystickObj.leftTime=0,s.a.joystickObj.left=!1,clearInterval(s.a.joystickObj.leftTimeout),r({linear:s.a.joystickObj.leftTime});break;case"right":s.a.joystickObj.rightTime=0,s.a.joystickObj.right=!1,clearInterval(s.a.joystickObj.rightTimeout),r({linear:s.a.joystickObj.rightTime})}},e.a=r;a("NHnr");var i=a("zL8q"),o=(a.n(i),a("dmop")),s=a("djuq");function n(t,e){var a=!1;if(!0===(arguments.length<=2?void 0:arguments[2])&&(a=!0),console.log("[INFO] navstatus "+o.a.navCtrlStatus.status),a||o.a.navCtrlStatus.status===s.a.NavCtrlStatus.idling||o.a.navCtrlStatus.status===s.a.NavCtrlStatus.cancelled||e!==s.a.NavCtrl.start){var n=new ROSLIB.Message({goal_name:t,control:e});o.a.topic.navCtrlTopic.publish(n)}else Object(i.Notification)({title:"警告",message:"正在执行其他任务，当前命令将被忽略",type:"warning",position:"top-left",offset:100})}function r(t){var e=t.linear||0,a=t.angular||0;console.log("linear_:"+e),console.log("angular_:"+a);var i=new ROSLIB.Message({linear:{x:e,y:0,z:0},angular:{x:0,y:0,z:a}});o.a.topic["/cmd_vel"].publish(i)}},"rv+Z":function(t,e){},tvR6:function(t,e){},utPf:function(t,e){},wUZA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("HC6U"),o=a("ITPp"),s={name:"mapping",components:{},data:function(){return{drawer:!1,direction:"btt",closable:!0,showClose:!1,mapName:null,mappingEnd:!1,name:"map"}},mounted:function(){var t=window.localStorage.getItem("mappingStatus");this.mappingEnd="1"==t},methods:{newMappingBtn:function(){this.mappingNotify(),Object(o.d)(),Object(o.b)("/map","map")},continueMappingBtn:function(){this.mappingNotify(),Object(o.a)(),Object(o.b)("/map","map")},mappingNotify:function(){this.$notify({title:"提示",message:"请缓慢移动机器人，先点击蓝色“保存按钮”，再点击橙色“关闭按钮”",type:"warning",position:"top-left",offset:100,duration:0}),this.mappingEnd=!0,Object(o.e)(!1)},saveMapContinue:function(){this.mapName?Object(o.h)(this.mapName):this.mapNamePrompt("save")},saveMapClose:function(){this.mapName?Object(o.g)(this.mapName):this.mapNamePrompt("close"),this.mappingEnd=!1},mapNamePrompt:function(t){var e=this;e.$prompt("请输入地图名称","提示",{customClass:"mappingInputPrompt",inputValue:"map",confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\w+$/,inputErrorMessage:"名称不合法"}).then(function(a){var i=a.value;e.$notify({title:"提示",message:"建图完成之后建议重启小车",type:"warning",position:"top-left",offset:100,duration:0}),e.mapName=i,"save"===t?Object(o.h)(i):Object(o.g)(i)}).catch(function(){})},closeDrawer:function(){Object(o.e)(!1)}},watch:{"$store.state.edipMapModule":function(t){this.drawer=t}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-drawer",{attrs:{title:"地图",visible:t.drawer,"close-on-press-escape":!1,"custom-class":"mappingBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"authorCom"},[a("div",{staticClass:"editItem flex"},[a("el-button",{staticClass:"editMapBtn",attrs:{"native-type":"button"},on:{click:t.newMappingBtn}},[t._v("新建地图")])],1),t._v(" "),a("div",{staticClass:"editItem flex"},[a("el-button",{staticClass:"editMapBtn",attrs:{"native-type":"button"},on:{click:t.continueMappingBtn}},[t._v("继续建图")])],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.mappingEnd,expression:"mappingEnd"}],staticClass:"mappingSaveClose flex"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check",circle:""},on:{click:t.saveMapContinue}}),t._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-close",circle:""},on:{click:t.saveMapClose}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,n,!1,function(t){a("EeCd")},"data-v-48151988",null).exports,l=a("RjI4"),c={name:"authorization",components:{},data:function(){return{drawer:!1,direction:"btt",closable:!0,showClose:!1,authorPassword:""}},mounted:function(){},methods:{submitForm:function(){Object(l.l)(this.authorPassword)},closeDrawer:function(){Object(l.k)(!1)}},watch:{"$store.state.authorization":function(t){this.drawer=t}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("el-drawer",{attrs:{title:"设置权限",visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"authorPsw flex"},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入授权密码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm(e)}},model:{value:t.authorPassword,callback:function(e){t.authorPassword=e},expression:"authorPassword"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")])],1)])],1)},staticRenderFns:[]};var m=a("VU/8")(c,u,!1,function(t){a("/P5y")},"data-v-95dec69a",null).exports,p=a("TSWK"),d={name:"addBranch",components:{},data:function(){return{drawer:!1,direction:"btt",closable:!0,showClose:!1,branchName:""}},mounted:function(){},methods:{submitBranch:function(){Object(p.b)(this.branchName)},closeDrawer:function(){this.$store.commit("switchBranch",!1)}},watch:{"$store.state.showBranch":function(t){this.drawer=t}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("el-drawer",{attrs:{title:"新建分支",visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"authorPsw flex"},[a("el-input",{attrs:{placeholder:"请输入分支名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitBranch(e)}},model:{value:t.branchName,callback:function(e){t.branchName=e},expression:"branchName"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitBranch}},[t._v("提交")])],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(d,f,!1,function(t){a("NYko")},"data-v-20a23871",null).exports,h=a("rFWt"),g=a("IcnI");function w(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];g.a.commit("switchDragModule",t)}var b={name:"dragComponent",components:{},data:function(){return{drawer:this.$store.state.showDragModule,direction:"btt",showClose:!1,isMobile:!1,up:!1,retreat:!1,left:!1,right:!1}},methods:{onMouseDown:function(t,e){e.preventDefault(),Object(h.b)(t)},onMouseUp:function(t,e){Object(h.e)(t)},upMouseDown:function(t,e){return this.clickCtrl(t),e.preventDefault(),!1},upMouseMove:function(t,e){return this.clickCtrl(t),e.preventDefault(),!1},clickCtrl:function(t){"up"===t?(this.up=!0,this.left?Object(h.a)({linear:.4,angular:.4}):this.right?Object(h.a)({linear:.4,angular:-.4}):Object(h.a)({linear:.4})):"retreat"===t?(this.retreat=!0,this.left?Object(h.a)({linear:-.4,angular:.4}):this.right?Object(h.a)({linear:-.4,angular:-.4}):Object(h.a)({linear:-.4})):"left"===t?(this.left=!0,this.up?Object(h.a)({linear:.4,angular:.4}):this.retreat?Object(h.a)({linear:-.4,angular:.4}):Object(h.a)({angular:.4})):(this.right=!0,this.up?Object(h.a)({linear:.4,angular:-.4}):this.retreat?Object(h.a)({linear:-.4,angular:-.4}):Object(h.a)({angular:-.4}))},upMouseEnd:function(t){"up"===t?(this.up=!1,this.left?Object(h.a)({linear:0,angular:.4}):this.right?Object(h.a)({linear:0,angular:-.4}):Object(h.a)({linear:0})):"retreat"===t?(this.retreat=!1,this.left?Object(h.a)({linear:0,angular:.4}):this.right?Object(h.a)({linear:0,angular:-.4}):Object(h.a)({linear:0})):"left"===t?(this.left=!1,this.up?Object(h.a)({linear:.4,angular:0}):this.retreat?Object(h.a)({linear:-.4,angular:0}):Object(h.a)({angular:0})):(this.right=!1,this.up?Object(h.a)({linear:.4,angular:0}):this.retreat?Object(h.a)({linear:-.4,angular:0}):Object(h.a)({angular:0}))},closeDrag:function(){w(!1)}},mounted:function(){Object(l.a)()?this.isMobile=!0:this.isMobile=!1},watch:{"$store.state.showDragModule":function(t){this.drawer=t}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dragBody"},[a("el-drawer",{attrs:{visible:t.drawer,"close-on-press-escape":!1,"custom-class":"dragBox",size:"40","show-close":t.showClose,direction:t.direction,modal:!1},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrag}},[t.isMobile?a("div",{staticClass:"dragBody flex"},[a("div",{staticClass:"circleBox boxShadow flex circleBoxLeft"},[a("div",{staticClass:"itemBtn flex controlUp",on:{touchstart:function(e){return t.onMouseDown("up",e)},touchend:function(e){return t.onMouseUp("up",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-up",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex controlDown",on:{touchstart:function(e){return t.onMouseDown("down",e)},touchend:function(e){return t.onMouseUp("down",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-down",circle:""}})],1)]),t._v(" "),a("div",{staticClass:"circleBox boxShadow flex circleBoxRight"},[a("div",{staticClass:"itemBtn flex controlLeft",on:{touchstart:function(e){return t.onMouseDown("left",e)},touchend:function(e){return t.onMouseUp("left",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-left",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex controlRight",on:{touchstart:function(e){return t.onMouseDown("right",e)},touchend:function(e){return t.onMouseUp("right",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-right",circle:""}})],1)])]):a("div",{staticClass:"dragBody flex"},[a("div",{staticClass:"circleBox boxShadow flex circleBoxLeft"},[a("div",{staticClass:"itemBtn flex controlUp",on:{mousedown:function(e){return t.onMouseDown("up",e)},mouseup:function(e){return t.onMouseUp("up",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-up",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex controlDown",on:{mousedown:function(e){return t.onMouseDown("down",e)},mouseup:function(e){return t.onMouseUp("down",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-down",circle:""}})],1)]),t._v(" "),a("div",{staticClass:"circleBox boxShadow flex circleBoxRight"},[a("div",{staticClass:"itemBtn flex controlLeft",on:{mousedown:function(e){return t.onMouseDown("left",e)},mouseup:function(e){return t.onMouseUp("left",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-left",circle:""}})],1),t._v(" "),a("div",{staticClass:"itemBtn flex controlRight",on:{mousedown:function(e){return t.onMouseDown("right",e)},mouseup:function(e){return t.onMouseUp("right",e)}}},[a("el-button",{attrs:{icon:"el-icon-arrow-right",circle:""}})],1)])])])],1)},staticRenderFns:[]};var _=a("VU/8")(b,y,!1,function(t){a("QblX")},"data-v-3acd336e",null).exports,x=a("xrs3"),C={name:"stationAdd",components:{},data:function(){return{drawer:!1,direction:"btt",showClose:!1,name:"waypoint",showMore:!0,stationForm:{stationName:"",stationType:[{value:"goal",label:"目标站点"},{value:"dock",label:"充电桩"},{value:"timer",label:"计时器"},{value:"publisher",label:"发布器"},{value:"subscriber",label:"订阅器"},{value:"looper",label:"循环"},{value:"pubsuber",label:"发布-订阅器"},{value:"cmd_vel_set_sub",label:"最大速度设置"},{value:"cmd_vel",label:"速度发布器"},{value:"shell",label:"命令发布器"},{value:"sound_play",label:"声音播放"},{value:"initial_pose",label:"初始位置"},{value:"scan_marker",label:"充电桩定位"},{value:"shell_string",label:"Shell命令"},{value:"pallet",label:"Pallet"},{value:"bias",label:"Bias"},{value:"call",label:"Call"},{value:"goto",label:"Goto"}],type:"goal",stationMode:[{value:"LOOP",label:"LOOP"},{value:"LOOP2",label:"LOOP2"},{value:"BACK",label:"BACK"},{value:"BACK2",label:"BACK2"},{value:"NONE",label:"单次"}],mode:"LOOP",gotoMode:"",callMode:"",voiceMode:"play",voiceStationMode:[{value:"LOOP",label:"播放"},{value:"LOOP2",label:"停止"},{value:"BACK",label:"播放一次"}],frameId:"map",subscribeValue:"0",positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,orientationW:0,yaw:0},showFrameId:!0,showSubscribeValue:!1,showStationMode:!0,showVoiceStationMode:!1,showGotoStationMode:!1,showCallStationMode:!1,showPosition:!0,showOrientation:!0,showYaw:!0}},mounted:function(){},methods:{showMoreBtn:function(){Object(x.b)()&&(this.showMore=!1)},changeStationType:function(t){switch(this.showFrameId=!1,this.showSubscribeValue=!1,this.showStationMode=!0,this.showVoiceStationMode=!1,this.showGotoStationMode=!1,this.showCallStationMode=!1,this.showPosition=!0,this.showOrientation=!0,this.showYaw=!0,t){case"goal":this.showFrameId=!0;break;case"pubsuber":this.showSubscribeValue=!0;break;case"sound_play":this.showStationMode=!1,this.showVoiceStationMode=!0,this.showGotoStationMode=!1,this.showCallStationMode=!1;break;case"goto":this.showStationMode=!1,this.showVoiceStationMode=!1,this.showGotoStationMode=!0,this.showCallStationMode=!1;break;case"call":this.showStationMode=!1,this.showVoiceStationMode=!1,this.showGotoStationMode=!1,this.showCallStationMode=!0;break;case"initial_pose":this.showFrameId=!0}},changeOrientation:function(){var t={x:parseFloat(this.stationForm.orientationX),y:parseFloat(this.stationForm.orientationY),z:parseFloat(this.stationForm.orientationZ),w:parseFloat(this.stationForm.orientationW)};if(Object(l.g)(t)){var e=180*Object(l.j)(t)/Math.PI;this.stationForm.yaw=e.toFixed(5)}else this.$notify({title:"警告",message:"四元数不合法",type:"warning",position:"top-left",offset:100})},changeYaw:function(){var t=parseFloat(this.stationForm.yaw),e=Object(l.m)(t/180*Math.PI);this.stationForm.orientationX=e.x.toFixed(5),this.stationForm.orientationY=e.y.toFixed(5),this.stationForm.orientationZ=e.z.toFixed(5),this.stationForm.orientationW=e.w.toFixed(5)},subUpdate:function(){"goal"===this.stationForm.type&&(this.stationForm.type="goal"),"LOOP"===this.stationForm.mode&&(this.stationForm.mode="LOOP"),"play"===this.stationForm.voiceMode&&(this.stationForm.voiceMode="LOOP"),Object(x.i)(this.stationForm)},closeDrawer:function(){Object(x.f)(!1)}},watch:{"$store.state.robotPosition":function(t){this.stationForm.positionX=t.positionX,this.stationForm.positionY=t.positionY,this.stationForm.positionZ=t.positionZ,this.stationForm.orientationX=t.orientationX,this.stationForm.orientationY=t.orientationY,this.stationForm.orientationZ=t.orientationZ,this.stationForm.orientationW=t.orientationW,this.stationForm.yaw=t.yaw},"$store.state.showAddStation":function(t){this.drawer=t}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:"添加站点",visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:!0,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("el-form",{ref:"ruleForm",staticClass:"waypointForm"},[a("el-form-item",{},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点名称")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.stationName,expression:"stationForm.stationName"}],attrs:{type:"text",placeholder:"请输入站点名称"},domProps:{value:t.stationForm.stationName},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"stationName",e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点类型")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点类型",size:"mini","popper-class":"selectClass"},on:{change:t.changeStationType},model:{value:t.stationForm.type,callback:function(e){t.$set(t.stationForm,"type",e)},expression:"stationForm.type"}},t._l(t.stationForm.stationType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"showMore",on:{click:t.showMoreBtn}},[t._v("更多设置"),a("i",{staticClass:"el-icon-d-arrow-right moreIcon"})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMore,expression:"!showMore"}]},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showStationMode,expression:"showStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点模式")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点模式",size:"mini","popper-class":"selectClass"},model:{value:t.stationForm.mode,callback:function(e){t.$set(t.stationForm,"mode",e)},expression:"stationForm.mode"}},t._l(t.stationForm.stationMode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showGotoStationMode,expression:"showGotoStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点模式")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点模式",size:"mini"},model:{value:t.stationForm.gotoMode,callback:function(e){t.$set(t.stationForm,"gotoMode",e)},expression:"stationForm.gotoMode"}},t._l(this.$store.state.stationList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showCallStationMode,expression:"showCallStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点模式")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点模式",size:"mini"},model:{value:t.stationForm.callMode,callback:function(e){t.$set(t.stationForm,"callMode",e)},expression:"stationForm.callMode"}},t._l(this.$store.state.trajectoryList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showVoiceStationMode,expression:"showVoiceStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点模式")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点模式",size:"mini"},model:{value:t.stationForm.voiceMode,callback:function(e){t.$set(t.stationForm,"voiceMode",e)},expression:"stationForm.voiceMode"}},t._l(t.stationForm.voiceStationMode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showFrameId,expression:"showFrameId"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("frame_id")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.frameId,expression:"stationForm.frameId"}],attrs:{type:"text",placeholder:"请输入frame_id"},domProps:{value:t.stationForm.frameId},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"frameId",e.target.value)}}})])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showSubscribeValue,expression:"showSubscribeValue"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("发布-订阅器接收值")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.subscribeValue,expression:"stationForm.subscribeValue"}],attrs:{type:"text",placeholder:"请输入接收值"},domProps:{value:t.stationForm.subscribeValue},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"subscribeValue",e.target.value)}}})])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showPosition,expression:"showPosition"}]},[a("div",{staticClass:"localTitle"},[t._v("Positon")]),t._v(" "),a("div",{staticClass:"flex formItem bottomNone"},[a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("x")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.positionX,expression:"stationForm.positionX"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.positionX},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"positionX",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("y")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.positionY,expression:"stationForm.positionY"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.positionY},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"positionY",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("z")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.positionZ,expression:"stationForm.positionZ"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.positionZ},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"positionZ",e.target.value)}}})])])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showOrientation,expression:"showOrientation"}]},[a("div",{staticClass:"localTitle"},[t._v("Orientation")]),t._v(" "),a("div",{staticClass:"flex formItem bottomNone"},[a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("x")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.orientationX,expression:"stationForm.orientationX"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.orientationX},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.stationForm,"orientationX",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("y")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.orientationY,expression:"stationForm.orientationY"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.orientationY},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.stationForm,"orientationY",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("z")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.orientationZ,expression:"stationForm.orientationZ"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.orientationZ},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.stationForm,"orientationZ",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("w")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.orientationW,expression:"stationForm.orientationW"}],attrs:{type:"text",placeholder:""},domProps:{value:t.stationForm.orientationW},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.stationForm,"orientationW",e.target.value)}}})])])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showYaw,expression:"showYaw"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("Yaw(deg)")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.yaw,expression:"stationForm.yaw"}],attrs:{type:"text",placeholder:"请输入Yaw"},domProps:{value:t.stationForm.yaw},on:{change:t.changeYaw,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subUpdate("stationForm")},input:function(e){e.target.composing||t.$set(t.stationForm,"yaw",e.target.value)}}})])])])],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subUpdate("stationForm")}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(C,F,!1,function(t){a("WsHc")},"data-v-881b95ec",null).exports,j=a("Lf+Q"),k={name:"trackAdd",components:{},data:function(){return{drawer:!1,direction:"btt",showClose:!1,name:"trajectory",stationForm:{name:"",waypoints:""}}},mounted:function(){},methods:{subUpdate:function(){Object(j.f)(this.stationForm)},closeDrawer:function(){Object(j.d)(!1)}},watch:{"$store.state.showAddTrack":function(t){this.drawer=t}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:"添加轨迹",visible:t.drawer,"close-on-press-escape":!1,"custom-class":"authorBox",wrapperClosable:!0,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"trackForm"},[a("el-form",{ref:"ruleForm",staticClass:"wifiForm",attrs:{model:t.stationForm}},[a("el-form-item",{},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("轨迹名称")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.stationForm.name,expression:"stationForm.name"}],attrs:{type:"text",placeholder:"请输入轨迹名称"},domProps:{value:t.stationForm.name},on:{input:function(e){e.target.composing||t.$set(t.stationForm,"name",e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("请选择站点")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"waypointSelect",attrs:{placeholder:"请选择站点",multiple:"",size:"mini","popper-class":"selectClass"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subUpdate(e)}},model:{value:t.stationForm.waypoints,callback:function(e){t.$set(t.stationForm,"waypoints",e)},expression:"stationForm.waypoints"}},t._l(this.$store.state.stationList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.subUpdate}},[t._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var O=a("VU/8")(k,M,!1,function(t){a("dYCh")},"data-v-e7d5ea2c",null).exports,I=a("mvHQ"),L=a.n(I),T=(a("NHnr"),a("zL8q")),N=a("dmop"),B=a("djuq");function P(t){t?g.a.commit("switchWifiSetting",!0):g.a.commit("switchWifiSetting",!1)}function R(t){var e=t.ssid,a=t.password,i=t.ip,o=t.mask,s=t.gateway,n=t.checked,r=t.selectIP;t.mode=B.a.NetworkMode.wifi;var c="~/catkin_ws/www/shell/comm.sh -m wifi ";if(e&&a&&Object(l.c)(e)){if(c+="-s "+e+" -p "+a,r){if(null==i.match(/(\d+)\.(\d+)\.(\d+)\.(\d+)/g)||(RegExp.$1>255||RegExp.$2>255||RegExp.$3>255||RegExp.$4>255))return void Notification({title:"错误",message:"ip不合法",type:"error",position:"top-left",offset:100});c+=" -i "+i;var u=0;if(""!==o){for(var m=o.split("."),p=0;p<m.length;p++)for(var d=Number(m[p]).toString(2).split(""),f=0;f<d.length;f++)u+=Number(d[f]);c+=" -k "+u}""!==s&&(c+=" -g "+s),n&&(c+=" -a")}else c=n?"~/catkin_ws/www/shell/comm.sh -m wifi -s "+e+" -p "+a+" -a":"~/catkin_ws/www/shell/comm.sh -m wifi -s "+e+" -p "+a;var v=new ROSLIB.Message({data:c});console.log("[INFO] "+L()(v)),N.a.topic["/shell_string"].publish(v),window.localStorage.setItem("wifiInfos",L()(t)),g.a.commit("switchWifiSetting",!1),T.Loading.service({text:"切换中..."}),setTimeout(function(){window.history.pushState({},0,""+i),T.Loading.service().close(),P(!1)},1e4)}else Notification({title:"错误",message:"wifi名称或密码不合法",type:"error",position:"top-left",offset:100})}var z={name:"wifiSetting",components:{},data:function(){return{drawer:this.$store.state.showWifiSetting,direction:"btt",closable:!0,showClose:!1,wifiName:"",wifiPsw:"",selectIP:!0,wifiIp:"192.168.43.233",ipMask:"255.255.255.0",gateway:"192.168.43.1",checked:!1,isMobile:"",showMore:!0}},methods:{showMoreBtn:function(){this.showMore=!this.showMore},submitForm:function(t){R({ssid:this.wifiName,password:this.wifiPsw,ip:this.wifiIp,mask:this.ipMask,gateway:this.gateway,checked:this.checked,selectIP:this.selectIP,isMobile:this.isMobile})},resetForm:function(){!function(t){t.mode=B.a.NetworkMode.ap;var e=new ROSLIB.Message({data:"~/catkin_ws/www/shell/comm.sh -m ap"});N.a.topic["/shell_string"].publish(e),g.a.commit("switchWifiSetting",!1),T.Loading.service({text:"切换中..."}),setTimeout(function(){window.location.href="http://10.42.0.1",T.Loading.service().close()},3e3),g.a.commit("switchWifiSetting",!1)}({})},closeDrawer:function(){P(!1)}},mounted:function(){Object(l.a)()?/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?(this.wifiIp="172.20.10.14",this.gateway="172.20.10.1",this.isMobile="ios"):/(Android)/i.test(navigator.userAgent)&&(this.wifiIp="192.168.43.233",this.gateway="192.168.43.1",this.isMobile="android"):this.isMobile="pc"},watch:{"$store.state.showWifiSetting":function(t){this.drawer=t},"$store.state.wifiInfos":function(t){var e=JSON.parse(t);this.wifiName=e.ssid,this.wifiPsw=e.password,this.wifiIp=e.ip,this.mask=e.mask,this.gateway=e.gateway,this.checked=!e.checked}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:"网络设置",visible:t.drawer,"close-on-press-escape":!1,"custom-class":"wifiBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("el-form",{ref:"ruleForm",staticClass:"wifiForm"},[a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("Wifi名称")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wifiName,expression:"wifiName"}],attrs:{type:"text",placeholder:"请输入WIFI名称"},domProps:{value:t.wifiName},on:{input:function(e){e.target.composing||(t.wifiName=e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("Wifi密码")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wifiPsw,expression:"wifiPsw"}],attrs:{type:"text",placeholder:"请输入Wifi密码"},domProps:{value:t.wifiPsw},on:{input:function(e){e.target.composing||(t.wifiPsw=e.target.value)}}})])])]),t._v(" "),t.showMore?a("div",{staticClass:"showMore",on:{click:t.showMoreBtn}},[t._v("更多设置"),a("i",{staticClass:"el-icon-d-arrow-right moreIcon"})]):a("div",[a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("IP类型")]),t._v(" "),a("div",{staticClass:"itemRight flex switchBox"},[a("el-switch",{attrs:{"active-text":"手动IP","inactive-text":"自动IP"},model:{value:t.selectIP,callback:function(e){t.selectIP=e},expression:"selectIP"}})],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.selectIP,expression:"selectIP"}]},[a("el-popover",{attrs:{placement:"top",title:"提示",width:"200",trigger:"click",content:"连接安卓或路由设备，最后一位在0-255之间，连接苹果设备最后一位为2-15之间"}},[a("el-form-item",{attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("IP")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wifiIp,expression:"wifiIp"}],attrs:{type:"text",placeholder:"请输入IP"},domProps:{value:t.wifiIp},on:{input:function(e){e.target.composing||(t.wifiIp=e.target.value)}}})])])])],1),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("子掩码")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ipMask,expression:"ipMask"}],attrs:{type:"text",placeholder:"请输入子掩码"},domProps:{value:t.ipMask},on:{input:function(e){e.target.composing||(t.ipMask=e.target.value)}}})])])]),t._v(" "),a("el-popover",{attrs:{placement:"top",title:"提示",width:"200",trigger:"click",content:"连接安卓，苹果或路由设备，最后一位默认为1"}},[a("el-form-item",{attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("网关")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.gateway,expression:"gateway"}],attrs:{type:"text",placeholder:"请输入网关"},domProps:{value:t.gateway},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("ruleForm")},input:function(e){e.target.composing||(t.gateway=e.target.value)}}})])])])],1)],1),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("保存设置")]),t._v(" "),a("div",{staticClass:"itemRight saveSetting flex"},[a("el-checkbox",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("ruleForm")}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1)])])],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("复位")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var D=a("VU/8")(z,E,!1,function(t){a("Y9Ds")},"data-v-44a69894",null).exports;function W(t){t?g.a.commit("switchUpdate",!0):g.a.commit("switchUpdate",!1)}var A={name:"update",components:{},data:function(){return{drawer:this.$store.state.showUpdate,direction:"btt",closable:!0,showClose:!1,onLineAuto:"online",offLineAuto:"offline",dbparam:"dbparam",openssh:"openssh",updateType:"",updateString:"",updateTypeString:{onlineAuto:"update"}}},methods:{chooseUpdate:function(t){switch(t){case"online":this.$notify({title:"警告",message:"请确认导航板可以连接网络！",type:"warning",position:"top-left",offset:100}),this.updateString=this.updateTypeString.onlineAuto}},subUpdate:function(){""!==this.updateType?(this.$store.commit("switchUpdate",!1),function(t,e){switch(T.Loading.service({text:"加载中..."}),t){case"online":var a=new ROSLIB.Message({seq:1,frame_id:"update_request"});N.a.topic["/task_switch"].publish(a);break;default:console.error("[ERROR]unknown update mode: "+t)}}(this.updateType,this.updateString),W(!1)):this.$notify({title:"警告",message:"请选择更新类型",type:"warning",position:"top-left",offset:100})},closeDrawer:function(){W(!1)}},watch:{"$store.state.showUpdate":function(t){this.drawer=t}}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:"软件更新",visible:t.drawer,"close-on-press-escape":!1,"custom-class":"updateBox",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"updateCom"},[a("div",{staticClass:"flex modulContent"},[a("el-radio-group",{on:{change:t.chooseUpdate},model:{value:t.updateType,callback:function(e){t.updateType=e},expression:"updateType"}},[a("div",{staticClass:"updateItem"},[a("el-radio",{attrs:{label:t.onLineAuto}},[t._v("在线自动更新")])],1)])],1),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.subUpdate}},[t._v("立即更新")])],1)])])},staticRenderFns:[]};var U=a("VU/8")(A,V,!1,function(t){a("eGOx")},"data-v-0b40ad1f",null).exports,G=a("//Fk"),Y=a.n(G),X=a("Xxa5"),q=a.n(X),H=a("exGp"),Z=a.n(H),Q={name:"mapUpload",components:{},data:function(){return{drawer:this.$store.state.uploadMap,direction:"btt",closable:!0,showClose:!1,nowShowMapName:null,limit:1}},methods:{handlePreview:function(t){},handleRemove:function(t,e){},handleAvatarSuccess:function(t,e,a){},handleAvatarError:function(t,e,a){},getFile:function(t,e){var a=this;return Z()(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getImgSize(t);case 2:return e.next=4,a.getBase64(t.raw).then(function(t){a.base64Data=t});case 4:case"end":return e.stop()}},e,a)}))()},getImgSize:function(t){var e=this,a=new Image;a.src=t.url,a.onload=function(){e.mapWidth=a.width,e.mapHeight=a.height}},getBase64:function(t){return new Y.a(function(e,a){var i=new FileReader,o="";i.readAsDataURL(t),i.onload=function(){o=i.result},i.onerror=function(t){a(t)},i.onloadend=function(){e(o)}})},submitUploadBtn:function(t){var e=this;return Z()(q.a.mark(function a(){var i;return q.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i=e,a.t0=t,a.next=!0===a.t0?4:!1===a.t0?11:13;break;case 4:if(i.base64Data){a.next=7;break}return i.$message.error("请上传图片！"),a.abrupt("return");case 7:return a.next=9,Object(o.i)({base64:i.base64Data,type:i.$store.state.nowShowMapName,width:i.mapWidth,height:i.mapHeight});case 9:case 11:return i.dialogVisible=!1,a.abrupt("break",14);case 13:i.dialogVisible=!1;case 14:i.drawer=!1;case 15:case"end":return a.stop()}},a,e)}))()},closeDrawer:function(){Object(o.f)(!1)}},watch:{"$store.state.uploadMap":function(t){this.drawer=t},"$store.state.nowShowMapName":function(t){this.nowShowMapName=t}}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-drawer",{attrs:{title:"上传地图",visible:t.drawer,"close-on-press-escape":!1,"custom-class":"uploadMap",wrapperClosable:t.closable,"show-close":t.showClose,direction:t.direction},on:{"update:visible":function(e){t.drawer=e},close:t.closeDrawer}},[a("div",{staticClass:"uploadBox"},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"",accept:".png","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess,"on-error":t.handleAvatarError,"on-change":t.getFile,"auto-upload":!1,"list-type":"picture",limit:t.limit}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("注意只能上传png文件")])]),t._v(" "),a("div",{staticClass:"flex formBtns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitUploadBtn(!0)}}},[t._v("提交")])],1)],1)])},staticRenderFns:[]};var J=a("VU/8")(Q,K,!1,function(t){a("bqqV")},"data-v-314c3dd8",null).exports,tt={name:"waypointDetail",components:{},props:["details"],data:function(){return{edit:!1,develop:"developer"===this.$store.state.userRole,waypointForm:{stationName:"",stationType:[{value:"goal",label:"目标站点"},{value:"dock",label:"充电桩"},{value:"timer",label:"计时器"},{value:"publisher",label:"发布器"},{value:"subscriber",label:"订阅器"},{value:"looper",label:"循环"},{value:"pubsuber",label:"发布-订阅器"},{value:"cmd_vel_set_sub",label:"最大速度设置"},{value:"cmd_vel",label:"速度发布器"},{value:"shell",label:"命令发布器"},{value:"sound_play",label:"声音播放"},{value:"initial_pose",label:"初始位置"},{value:"scan_marker",label:"充电桩定位"},{value:"shell_string",label:"Shell命令"},{value:"pallet",label:"Pallet"},{value:"bias",label:"Bias"},{value:"call",label:"Call"},{value:"goto",label:"Goto"}],type:"goal",stationMode:[{value:"LOOP",label:"LOOP"},{value:"LOOP2",label:"LOOP2"},{value:"BACK",label:"BACK"},{value:"BACK2",label:"BACK2"},{value:"NONE",label:"单次"}],mode:"LOOP",gotoMode:"",callMode:"",voiceMode:"play",voiceStationMode:[{value:"LOOP",label:"播放"},{value:"LOOP2",label:"停止"},{value:"BACK",label:"播放一次"}],frameId:"map",subscribeValue:0,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,orientationW:0,yaw:0},showFrameId:!0,showSubscribeValue:!1,showStationMode:!0,showVoiceStationMode:!1,showGotoStationMode:!1,showCallStationMode:!1,showPosition:!0,showOrientation:!0,showYaw:!0,deleteWaypointName:null}},methods:{goHere:function(){this.$notify({title:"成功",message:"现在开始导航至站点 "+this.waypointForm.stationName,type:"success",position:"top-left",offset:100}),Object(h.d)(this.waypointForm.stationName),Object(x.g)(this.waypointForm.stationName),this.$emit("transferSetting","waypoints")},editWaypoint:function(t){var e=this;return Z()(q.a.mark(function a(){var i,o;return q.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i=e,o=null,e.edit?(o=i.$loading({text:"修改中..."}),"goal"===e.waypointForm.type&&(e.waypointForm.type="goal"),"LOOP"===e.waypointForm.mode&&(e.waypointForm.mode="LOOP"),"play"===e.waypointForm.voiceMode&&(e.waypointForm.voiceMode="LOOP"),Object(x.i)(i.waypointForm,i.deleteWaypointName,!0),o.close()):i.deleteWaypointName=t,e.edit=!e.edit;case 4:case"end":return a.stop()}},a,e)}))()},deleteWaypointBtn:function(t){this.drawer=!1,this.$confirm("是否永久删除"+t+"站点?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,customClass:"delBranchCustom"}).then(function(){Object(x.a)(t)}).catch(function(){})},changeStationType:function(t){switch(this.showFrameId=!1,this.showSubscribeValue=!1,this.showStationMode=!0,this.showVoiceStationMode=!1,this.showGotoStationMode=!1,this.showCallStationMode=!1,this.showPosition=!0,this.showOrientation=!0,this.showYaw=!0,t){case"goal":this.showFrameId=!0;break;case"pubsuber":this.showSubscribeValue=!0;break;case"sound_play":this.showStationMode=!1,this.showVoiceStationMode=!0,this.showGotoStationMode=!1,this.showCallStationMode=!1;break;case"goto":this.showStationMode=!1,this.showVoiceStationMode=!1,this.showGotoStationMode=!0,this.showCallStationMode=!1;break;case"call":this.showStationMode=!1,this.showVoiceStationMode=!1,this.showGotoStationMode=!1,this.showCallStationMode=!0;break;case"initial_pose":this.showFrameId=!0}},changeOrientation:function(){var t={x:parseFloat(this.waypointForm.orientationX),y:parseFloat(this.waypointForm.orientationY),z:parseFloat(this.waypointForm.orientationZ),w:parseFloat(this.waypointForm.orientationW)};if(isQuaternionValid(t)){var e=180*Object(l.j)(t)/Math.PI;this.waypointForm.yaw=e.toFixed(5)}else this.$notify({title:"警告",message:"四元数不合法",type:"warning",position:"top-left",offset:100})},changeYaw:function(){var t=parseFloat(this.waypointForm.yaw),e=thetaToQuaternion(t/180*Math.PI);this.waypointForm.orientationX=e.x.toFixed(5),this.waypointForm.orientationY=e.y.toFixed(5),this.waypointForm.orientationZ=e.z.toFixed(5),this.waypointForm.orientationW=e.w.toFixed(5)},updateWaypointMsg:function(t){var e=JSON.parse(t.frame_id);this.waypointForm.stationName=t.name,this.waypointForm.type=e.type,this.waypointForm.mode=e.failure_mode,this.waypointForm.positionX=Number(t.pose.position.x).toFixed(3),this.waypointForm.positionY=Number(t.pose.position.y).toFixed(3),this.waypointForm.positionZ=Number(t.pose.position.z).toFixed(3),this.waypointForm.orientationX=Number(t.pose.orientation.x).toFixed(3),this.waypointForm.orientationY=Number(t.pose.orientation.y).toFixed(3),this.waypointForm.orientationZ=Number(t.pose.orientation.z).toFixed(3),this.waypointForm.orientationW=Number(t.pose.orientation.w).toFixed(3);var a=Object(l.j)(t.pose.orientation),i=a/Math.PI*180;this.waypointForm.orientionRAD=Number(a).toFixed(3),this.waypointForm.orientionDEG=Number(i).toFixed(3)}},created:function(){try{this.updateWaypointMsg(this.details)}catch(t){console.log(t)}},mounted:function(){},watch:{"$store.state.userRole":function(t){this.develop="developer"===t},details:function(t){this.updateWaypointMsg(t)}}},et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detailBox"},[a("el-form",{ref:"ruleForm",staticClass:"waypointForm"},[a("div",{staticClass:"flex waypointTopGroup"},[a("div",{staticClass:"waypointTypeGroup"},[a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点名称:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.stationName,expression:"waypointForm.stationName"}],attrs:{type:"text",placeholder:"请输入站点名称",disabled:!t.edit},domProps:{value:t.waypointForm.stationName},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"stationName",e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点类型:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点类型",size:"mini","popper-class":"selectClass",disabled:!t.edit},on:{change:t.changeStationType},model:{value:t.waypointForm.type,callback:function(e){t.$set(t.waypointForm,"type",e)},expression:"waypointForm.type"}},t._l(t.waypointForm.stationType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showStationMode,expression:"showStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点模式:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点模式",size:"mini","popper-class":"selectClass",disabled:!t.edit},model:{value:t.waypointForm.mode,callback:function(e){t.$set(t.waypointForm,"mode",e)},expression:"waypointForm.mode"}},t._l(t.waypointForm.stationMode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showGotoStationMode,expression:"showGotoStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点模式:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点模式",size:"mini",disabled:!t.edit},model:{value:t.waypointForm.gotoMode,callback:function(e){t.$set(t.waypointForm,"gotoMode",e)},expression:"waypointForm.gotoMode"}},t._l(this.$store.state.stationList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showCallStationMode,expression:"showCallStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点模式:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点模式",size:"mini",disabled:!t.edit},model:{value:t.waypointForm.callMode,callback:function(e){t.$set(t.waypointForm,"callMode",e)},expression:"waypointForm.callMode"}},t._l(this.$store.state.trajectoryList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showVoiceStationMode,expression:"showVoiceStationMode"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("站点模式:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"stationType",attrs:{placeholder:"请选择站点模式",size:"mini",disabled:!t.edit},model:{value:t.waypointForm.voiceMode,callback:function(e){t.$set(t.waypointForm,"voiceMode",e)},expression:"waypointForm.voiceMode"}},t._l(t.waypointForm.voiceStationMode,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showFrameId,expression:"showFrameId"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("frame_id:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.frameId,expression:"waypointForm.frameId"}],attrs:{type:"text",placeholder:"请输入frame_id",disabled:!t.edit},domProps:{value:t.waypointForm.frameId},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"frameId",e.target.value)}}})])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showSubscribeValue,expression:"showSubscribeValue"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("发布-订阅器接收值:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.subscribeValue,expression:"waypointForm.subscribeValue"}],attrs:{type:"text",placeholder:"请输入接收值",disabled:!t.edit},domProps:{value:t.waypointForm.subscribeValue},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"subscribeValue",e.target.value)}}})])])])],1),t._v(" "),a("div",{staticClass:"flex waypointBtnGroup"},[a("div",{staticClass:"goHere",on:{click:function(e){return e.target!==e.currentTarget?null:t.goHere()}}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.develop,expression:"develop"}],staticClass:"editBox",attrs:{type:t.edit?"success":"warning",icon:t.edit?"el-icon-check":"el-icon-edit",circle:""},on:{click:function(e){return t.editWaypoint(t.waypointForm.stationName)}}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.develop,expression:"develop"}],attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deleteWaypointBtn(t.waypointForm.stationName)}}})],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showPosition,expression:"showPosition"}]},[a("div",{staticClass:"localTitle"},[t._v("Positon:")]),t._v(" "),a("div",{staticClass:"flex formItem bottomNone"},[a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("x")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.positionX,expression:"waypointForm.positionX"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.positionX},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"positionX",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("y")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.positionY,expression:"waypointForm.positionY"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.positionY},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"positionY",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("z")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.positionZ,expression:"waypointForm.positionZ"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.positionZ},on:{input:function(e){e.target.composing||t.$set(t.waypointForm,"positionZ",e.target.value)}}})])])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showOrientation,expression:"showOrientation"}]},[a("div",{staticClass:"localTitle"},[t._v("Orientation:")]),t._v(" "),a("div",{staticClass:"flex formItem bottomNone"},[a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("x:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.orientationX,expression:"waypointForm.orientationX"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.orientationX},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.waypointForm,"orientationX",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("y:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.orientationY,expression:"waypointForm.orientationY"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.orientationY},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.waypointForm,"orientationY",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("z:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.orientationZ,expression:"waypointForm.orientationZ"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.orientationZ},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.waypointForm,"orientationZ",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"localInputItem"},[a("div",{staticClass:"itemLeft"},[t._v("w:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.orientationW,expression:"waypointForm.orientationW"}],attrs:{type:"text",placeholder:"",disabled:!t.edit},domProps:{value:t.waypointForm.orientationW},on:{change:t.changeOrientation,input:function(e){e.target.composing||t.$set(t.waypointForm,"orientationW",e.target.value)}}})])])])]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showYaw,expression:"showYaw"}]},[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("Yaw(deg):")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.waypointForm.yaw,expression:"waypointForm.yaw"}],attrs:{type:"text",placeholder:"请输入Yaw",disabled:!t.edit},domProps:{value:t.waypointForm.yaw},on:{change:t.changeYaw,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subUpdate(e)},input:function(e){e.target.composing||t.$set(t.waypointForm,"yaw",e.target.value)}}})])])])],1)],1)},staticRenderFns:[]};var at={name:"waypoints",components:{waypointDetail:a("VU/8")(tt,et,!1,function(t){a("fAeN")},"data-v-35c6d926",null).exports},data:function(){return{waypoints:[],inputWaypoint:"",waypointsList:[],activeWaypoint:""}},watch:{"$store.state.stationList":function(t){var e=this;t.forEach(function(t){"true"!=JSON.parse(t.frame_id).display&&(e.waypoints.push(t),e.waypointsList.push(t))})},"$store.state.wayPointMsg":function(t){this.activeWaypoint=t.name}},mounted:function(){},methods:{InputChange:Object(l.d)(function(){if(this.inputWaypoint)for(var t in this.waypoints=[],this.waypointsList)this.waypointsList[t].name.indexOf(this.inputWaypoint)>=0&&this.waypoints.push(this.waypointsList[t]);else this.waypoints=this.waypointsList},300),addBtn:function(){Object(x.h)(!1),Object(x.f)(!0)},waypointDetailVal:function(t){this.$emit("transferSetting","waypoints")}}},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"waypoints"},[a("div",{staticClass:"searchBox"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索站点名称"},on:{input:t.InputChange},model:{value:t.inputWaypoint,callback:function(e){t.inputWaypoint=e},expression:"inputWaypoint"}})],1),t._v(" "),a("el-collapse",{attrs:{accordion:""},model:{value:t.activeWaypoint,callback:function(e){t.activeWaypoint=e},expression:"activeWaypoint"}},[t._l(t.waypoints,function(e,i){return a("el-collapse-item",{key:i,attrs:{name:e.name}},[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-location-information waypointName"}),t._v(" "),a("span",{staticClass:"nameBox"},[t._v(t._s(e.name))]),t._v(" "),"lift_up_wp"===e.name?a("span",{staticClass:"desc"},[t._v("AGV顶升上升")]):t._e(),t._v(" "),"lift_down_wp"===e.name?a("span",{staticClass:"desc"},[t._v("AGV顶升下降")]):t._e(),t._v(" "),"home_point"===e.name?a("span",{staticClass:"desc"},[t._v("开机默认初始化站点")]):t._e(),t._v(" "),"charge_point"===e.name?a("span",{staticClass:"desc"},[t._v("开机默认充电站点")]):t._e()]),t._v(" "),a("div",[a("waypointDetail",{attrs:{details:e},on:{transferSetting:t.waypointDetailVal}})],1)],2)}),t._v(" "),a("el-divider")],2),t._v(" "),a("div",{staticClass:"flex searchAddGroup"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(e){return e.stopPropagation(),t.addBtn(e)}}})],1)],1)},staticRenderFns:[]};var ot=a("VU/8")(at,it,!1,function(t){a("rv+Z")},"data-v-08d94c2f",null).exports,st=a("lHA8"),nt=a.n(st),rt=a("Gu7T"),lt=a.n(rt),ct={name:"trajectoryDetail",components:{},props:["details"],data:function(){return{develop:"developer"===this.$store.state.userRole,showMore:!0,edit:!1,trajectoryForm:{name:"",waypoints:[]},delTrajName:null}},methods:{updateTrajectoryMsg:function(t){this.trajectoryForm.name=t.name;var e=[];0!==t.waypoints.length&&(t.waypoints.forEach(function(t){e.push(t.name)}),this.trajectoryForm.waypoints=[].concat(lt()(new nt.a(e))))},editTrajectory:function(t){var e=null;this.edit?(e=this.$loading({text:"修改中..."}),"goal"===this.trajectoryForm.type&&(this.trajectoryForm.type="goal"),"LOOP"===this.trajectoryForm.mode&&(this.trajectoryForm.mode="LOOP"),"play"===this.trajectoryForm.voiceMode&&(this.trajectoryForm.voiceMode="LOOP"),Object(j.f)(this.trajectoryForm,this.delTrajName,!0),e.close()):this.delTrajName=t,this.edit=!this.edit},goHere:function(t){this.$notify({title:"成功",message:"现在开始导航至轨迹 "+t,type:"success",position:"top-left",offset:100}),Object(j.c)(t)},delTrackBtn:function(t){this.$confirm("是否永久删除"+t+"轨迹?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,customClass:"delBranchCustom"}).then(function(){Object(j.a)(t)}).catch(function(){})}},created:function(){try{this.updateTrajectoryMsg(this.details)}catch(t){console.log(t)}},watch:{"$store.state.userRole":function(t){this.develop="developer"===t},details:function(t){this.updateTrajectoryMsg(t)}}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trajectoryBox"},[a("el-form",{ref:"ruleForm",staticClass:"trajForm",attrs:{model:t.trajectoryForm}},[a("div",{staticClass:"flex trajGroup"},[a("div",{staticClass:"trajTypeGroup"},[a("el-form-item",[a("div",{staticClass:"flex formItem trajNameItem"},[a("div",{staticClass:"itemLeft"},[t._v("轨迹名称:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.trajectoryForm.name,expression:"trajectoryForm.name"}],attrs:{type:"text",placeholder:"请输入轨迹名称",disabled:!t.edit},domProps:{value:t.trajectoryForm.name},on:{input:function(e){e.target.composing||t.$set(t.trajectoryForm,"name",e.target.value)}}})])])]),t._v(" "),a("el-form-item",[a("div",{staticClass:"flex formItem"},[a("div",{staticClass:"itemLeft"},[t._v("选择站点:")]),t._v(" "),a("div",{staticClass:"itemRight"},[a("el-select",{staticClass:"waypointSelect",attrs:{placeholder:"请选择站点",multiple:"",size:"mini","popper-class":"selectClass",disabled:!t.edit},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.subUpdate(e)}},model:{value:t.trajectoryForm.waypoints,callback:function(e){t.$set(t.trajectoryForm,"waypoints",e)},expression:"trajectoryForm.waypoints"}},t._l(this.$store.state.stationList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.name}})}),1)],1)])])],1),t._v(" "),a("div",{staticClass:"flex trajBtnGroup"},[a("div",{staticClass:"goHere",on:{click:function(e){return e.target!==e.currentTarget?null:t.goHere(t.trajectoryForm.name)}}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.develop,expression:"develop"}],staticClass:"editBox",attrs:{type:t.edit?"success":"warning",icon:t.edit?"el-icon-check":"el-icon-edit",circle:""},on:{click:function(e){return t.editTrajectory(t.trajectoryForm.name)}}}),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.develop,expression:"develop"}],attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.delTrackBtn(t.trajectoryForm.name)}}})],1)])])],1)},staticRenderFns:[]};var mt={name:"trajectorys",components:{trojectoryDetail:a("VU/8")(ct,ut,!1,function(t){a("dGfW")},"data-v-82d5ab5c",null).exports},data:function(){return{trajectorys:[],trajectoryList:[],inputTrajectory:""}},watch:{"$store.state.trajectoryList":function(t){var e=this;t.forEach(function(t){t.name.indexOf("_display")<0&&(e.trajectorys.push(t),e.trajectoryList.push(t))})}},mounted:function(){},methods:{InputChange:Object(l.d)(function(){if(this.inputTrajectory)for(var t in this.trajectorys=[],this.trajectoryList)this.trajectoryList[t].name.indexOf(this.inputTrajectory)>=0&&this.trajectorys.push(this.trajectoryList[t]);else this.trajectorys=this.trajectoryList},500),addBtn:function(){Object(j.e)(!1),Object(j.d)(!0)}}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trajectorys"},[a("div",{staticClass:"searchBox"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入轨迹名称"},on:{input:t.InputChange},model:{value:t.inputTrajectory,callback:function(e){t.inputTrajectory=e},expression:"inputTrajectory"}})],1),t._v(" "),a("el-collapse",{attrs:{accordion:""}},[t._l(t.trajectorys,function(e,i){return a("el-collapse-item",{key:i},[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-guide trajectoryName"}),t._v(" "),a("span",{staticClass:"nameBox"},[t._v(t._s(e.name))]),t._v(" "),"autocharge_on"===e.name?a("span",{staticClass:"desc"},[t._v("开启自动充电")]):t._e(),t._v(" "),"autocharge_off"===e.name?a("span",{staticClass:"desc"},[t._v("结束自动充电")]):t._e()]),t._v(" "),a("div",[a("trojectoryDetail",{attrs:{details:e}})],1)],2)}),t._v(" "),a("el-divider")],2),t._v(" "),a("div",{staticClass:"flex searchAddGroup"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(e){return e.stopPropagation(),t.addBtn(e)}}})],1)],1)},staticRenderFns:[]};var dt=a("VU/8")(mt,pt,!1,function(t){a("lLry")},"data-v-513660a2",null).exports;var ft={name:"fblists",components:{},props:["flexTag"],data:function(){return{baseFlexBeList:[],baseFlexBeLists:[],otherFlexBeList:[],otherFlexBeLists:[],inputFlexBEList:"",develop:"developer"===this.$store.state.userRole}},watch:{"$store.state.flexBeList":function(t){for(var e in this.baseFlexBeList=[],this.baseFlexBeLists=[],this.otherFlexBeList=[],this.otherFlexBeLists=[],t){var a=t[e],i=a.indexOf(":"),o=a.substring(i+1,a.length);"base"==a.substring(0,i)?(this.baseFlexBeList.push({name:e,tag:o}),this.baseFlexBeLists.push({name:e,tag:o})):(this.otherFlexBeList.push({name:e,tag:o}),this.otherFlexBeLists.push({name:e,tag:o}))}},"$store.state.userRole":function(t){this.develop="developer"===t}},mounted:function(){},methods:{goTask:function(t){var e=this;"behavior_exit"!=window.localStorage.getItem("flexBeTaskStatus")?this.$alert("已有任务在执行，请等待任务完成！"):this.$confirm("是否下发 "+t+" 任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,type:"info"}).then(function(){!function(t){var e=new ROSLIB.Message({header:{seq:0,stamp:{secs:0,nsecs:0},frame_id:""},goal_id:{stamp:{secs:0,nsecs:0},id:""},goal:{behavior_name:t,arg_keys:[""],arg_values:[""],input_keys:[""],input_values:[""]}});N.a.topic["/flexbe/execute_behavior/goal"].publish(e)}(t),e.$emit("transferSetting","flexbeGoal")}).catch(function(){e.$notify({message:"已取消",position:"top-left",type:"success",offset:100,duration:1e3})})},deleteTask:function(t){var e=this;this.$confirm("是否删除此任务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,type:"warning"}).then(function(){!function(t){var e=new ROSLIB.Message({seq:1,frame_id:"flexbe_delete_"+t});N.a.topic["/task_switch"].publish(e)}(t)}).catch(function(){e.$notify({message:"已取消操作",position:"top-left",type:"success",offset:100,duration:1e3})})},baseInputChange:Object(l.d)(function(t){if(this.inputFlexBEList)for(var e in this.baseFlexBeList=[],this.baseFlexBeLists)this.baseFlexBeLists[e].name.indexOf(this.inputFlexBEList)>=0&&this.baseFlexBeList.push(this.baseFlexBeLists[e]);else this.baseFlexBeList=this.baseFlexBeLists},500),otherInputChange:Object(l.d)(function(t){if(this.inputFlexBEList)for(var e in this.otherFlexBeList=[],this.otherFlexBeLists)this.otherFlexBeLists[e].name.indexOf(this.inputFlexBEList)>=0&&this.otherFlexBeList.push(this.otherFlexBeLists[e]);else this.otherFlexBeList=this.otherFlexBeLists},500)}},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fblists"},["base"==t.flexTag?a("div",[a("div",{staticClass:"searchBox"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入任务名称"},on:{input:t.baseInputChange},model:{value:t.inputFlexBEList,callback:function(e){t.inputFlexBEList=e},expression:"inputFlexBEList"}})],1),t._v(" "),t._l(t.baseFlexBeList,function(e,i){return a("div",{key:i,staticClass:"setItem flex"},[a("div",{staticClass:"title",on:{click:function(a){return t.goTask(e.name)}}},[a("i",{staticClass:"el-icon-guide flexTaskName"}),t._v("\n                "+t._s(e.name)),a("small",[t._v(t._s(e.tag))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.develop,expression:"develop"}],staticClass:"rightIcon"},[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return t.deleteTask(e.name)}}})])])})],2):"other"==t.flexTag?a("div",[a("div",{staticClass:"searchBox"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入任务名称"},on:{input:t.otherInputChange},model:{value:t.inputFlexBEList,callback:function(e){t.inputFlexBEList=e},expression:"inputFlexBEList"}})],1),t._v(" "),t._l(t.otherFlexBeList,function(e,i){return a("div",{key:i,staticClass:"setItem flex"},[a("div",{staticClass:"title",on:{click:function(a){return t.goTask(e.name)}}},[a("i",{staticClass:"el-icon-guide flexTaskName"}),t._v("\n                "+t._s(e.name)),a("small",[a("span",[t._v(t._s(e.tag))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.develop,expression:"develop"}],staticClass:"rightIcon"},[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return t.deleteTask(e.name)}}})])])})],2):t._e()])},staticRenderFns:[]};var ht=a("VU/8")(ft,vt,!1,function(t){a("C3lt")},"data-v-3591450f",null).exports,gt={name:"wsTopicConfig",data:function(){return{dialogTableVisible:!1,topicList:[{name:"/map_ostream",type:"scheduling_msgs/MapStream",subFlag:"Nan"},{name:"/map_ostream_path",type:"scheduling_msgs/MapStream",subFlag:"Nan"},{name:"/map_ostream_display",type:"scheduling_msgs/MapStream",subFlag:"Nan"},{name:"/map_ostream_reflection",type:"scheduling_msgs/MapStream",subFlag:"Nan"},{name:"/map_istream",type:"scheduling_msgs/MapStream",subFlag:"Nan"},{name:"/map_istream_path",type:"scheduling_msgs/MapStream",subFlag:"Nan"},{name:"/map_istream_display",type:"scheduling_msgs/MapStream",subFlag:"Nan"},{name:"/map_istream_reflection",type:"scheduling_msgs/MapStream",subFlag:"Nan"},{name:"/robot_pose",type:"geometry_msgs/Pose",subFlag:"sub"},{name:"/initialpose",type:"geometry_msgs/PoseWithCovarianceStamped",subFlag:"pub"},{name:"/move_base/GlobalPlanner/plan",type:"nav_msgs/Path",subFlag:"sub"},{name:"/task_state",type:"diagnostic_msgs/DiagnosticStatus",subFlag:"sub"},{name:"/battery",type:"sensor_msgs/BatteryState",subFlag:"sub"},{name:"/scan_rectified",type:"sensor_msgs/LaserScan",subFlag:"sub"},{name:"/move_base/global_costmap/footprint",type:"geometry_msgs/PolygonStamped",subFlag:"sub"},{name:"/task_switch",type:"std_msgs/Header",subFlag:"sub"},{name:"/diagnostics_agg",type:"diagnostic_msgs/DiagnosticArray",subFlag:"sub"},{name:"/cmd_vel",type:"geometry_msgs/Twist",subFlag:"sub"},{name:"/cmd_string",type:"std_msgs/String",subFlag:"sub"},{name:"/shell_string",type:"std_msgs/String",subFlag:"Nan"},{name:"/move_base/goal",type:"move_base_msgs/MoveBaseActionGoal",subFlag:"pub"},{name:"/move_base_simple/goal",type:"geometry_msgs/PoseStamped",subFlag:"pub"},{name:"/move_base/result",type:"move_base_msgs/MoveBaseActionResult",subFlag:"sub"},{name:"/amcl_pose",type:"geometry_msgs/PoseWithCovarianceStamped",subFlag:"sub"},{name:"/flexbe/behavior_updated_hz",type:"std_msgs/String",subFlag:"sub"},{name:"/flexbe/behavior_updated",type:"std_msgs/String",subFlag:"sub"},{name:"/flexbe/behavior_list",type:"std_msgs/String",subFlag:"Nan"},{name:"/flexbe/execute_behavior/goal",type:"flexbe_msgs/BehaviorExecutionActionGoal",subFlag:"pub"},{name:"/flexbe/command/preempt",type:"std_msgs/Empty",subFlag:"pub"},{name:"/flexbe/command/pause",type:"std_msgs/Bool",subFlag:"pub"},{name:"/map",type:"nav_msgs/OccupancyGrid",subFlag:"Nan"}]}},mounted:function(){var t=window.localStorage.getItem("wsTopicConfig");t?this.topicList=JSON.parse(t):window.localStorage.setItem("wsTopicConfig",L()(this.topicList))},methods:{radioChange:function(t,e){this.topicList[e].subFlag=t},renderHeader:function(t,e){var a=this;return t("div",[t("span",e.column.label),t("el-button",{props:{size:"small",type:"primary"},style:"margin-left:33px;",on:{click:function(){window.localStorage.setItem("wsTopicConfig",L()(a.topicList)),a.dialogTableVisible=!1}}},"save")])}}},wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ws_topic_config"},[a("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("配置topic")]),t._v(" "),a("el-dialog",{attrs:{title:"服务器 Topic 订阅/发布",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.topicList,height:"500"}},[a("el-table-column",{attrs:{property:"name",label:"TopicName"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"Operation","render-header":t.renderHeader},scopedSlots:t._u([{key:"default",fn:function(e){return["/robot_pose"==e.row.name||"/task_state"==e.row.name||"/battery"==e.row.name||"/task_switch"==e.row.name||"/diagnostics_agg"==e.row.name||"/behavior_list"==e.row.name||"/behavior_updated"==e.row.name?a("el-radio-group",{attrs:{size:"small"},on:{change:function(a){t.radioChange(a,e.$index)}},model:{value:e.row.subFlag,callback:function(a){t.$set(e.row,"subFlag",a)},expression:"scope.row.subFlag"}},[a("el-radio-button",{attrs:{disabled:"",label:"sub"}}),t._v(" "),a("el-radio-button",{attrs:{disabled:"",label:"pub"}}),t._v(" "),a("el-radio-button",{attrs:{disabled:"",label:"Nan"}})],1):a("el-radio-group",{attrs:{size:"small"},on:{change:function(a){t.radioChange(a,e.$index)}},model:{value:e.row.subFlag,callback:function(a){t.$set(e.row,"subFlag",a)},expression:"scope.row.subFlag"}},[a("el-radio-button",{attrs:{label:"sub"}}),t._v(" "),a("el-radio-button",{attrs:{label:"pub"}}),t._v(" "),a("el-radio-button",{attrs:{label:"Nan"}})],1)]}}])})],1)],1)],1)},staticRenderFns:[]};var bt=a("VU/8")(gt,wt,!1,function(t){a("jG+7")},null,null).exports;var yt=a("kqvs"),_t={name:"setting",components:{wsTopicConfig:bt},data:function(){return{voice:0,slamSwitcn:!1,cacheDialog:!1,develop:!1,ipText:"",WebSocketSwitcn:!1,mapNameList:[{value:"mapTopic",label:"map"},{value:"mapOstreamPathTopic",label:"map_path"},{value:"mapOstreamDisplayTopic",label:"map_display"},{value:"mapOstreamReflectionTopic",label:"map_reflection"}]}},watch:{"$store.state.userRole":function(t){this.develop="developer"===t},"$store.state.serverContented":function(t){""===t&&(this.WebSocketSwitcn=!1)}},mounted:function(){window.localStorage.getItem("serIp")||window.localStorage.setItem("serIp","10.63.155.13:9090"),this.ipText=window.localStorage.getItem("serIp")},methods:{setAuthorization:function(){Object(l.k)(!0)},chooseMap:function(t){Object(o.b)(t.value,t.label)},chooseBranch:function(t){Object(p.d)(t)},delBranch:function(t){this.$confirm("是否永久删除"+t+"分支?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0,customClass:"delBranchCustom"}).then(function(){Object(p.a)(t)}).catch(function(){})},newBranchBtn:function(){this.$store.commit("switchBranch",!0)},wifiSetting:function(){P(!0)},initialPose:function(){this.$emit("transferSetting","initialPose")},sendGoal:function(){this.$emit("transferSetting","goal")},joystick:function(){this.$emit("transferSetting","joystick")},changeSlam:function(t){Object(l.e)(t)},changeWebSocket:function(){if(!this.ipText)return this.WebSocketSwitcn=!1,void Object(T.Notification)({title:"错误",message:"请输入需要连接的IP地址和端口号",type:"error",position:"top-left",offset:100});window.localStorage.setItem("serIp",this.ipText),Object(yt.b)()},updateSystem:function(){W(!0)},clearCache:function(){this.cacheDialog=!0},clearCacheBtn:function(){var t=this,e=t.$loading({lock:!0,text:"清除中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});window.localStorage.clear(),t.cacheDialog=!1,setTimeout(function(){t.$notify({message:"清除成功",position:"top-left",type:"success",offset:100}),e.close()},500)},helpBtn:function(){window.location.href="http://hitrobotgroup.github.io/"},formatTooltip:function(t){return 2*t},changeVoice:function(t){var e,a;e={seq:2*t,frame_id:"system_volume"},a=new ROSLIB.Message(e),N.a.topic["/task_switch"].publish(a)}}},xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[a("div",{staticClass:"setItem flex heardTop",on:{click:t.setAuthorization}},[t._m(0),t._v(" "),t._m(1)]),t._v(" "),a("div",{staticClass:"collpaseBox"},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-sort setIcon branchIcon"}),t._v("切换分支\n                ")]),t._v(" "),a("div",{staticClass:"branchSelectBox flex"},[a("el-select",{staticClass:"WebSocketInput",attrs:{disabled:!t.develop,size:"medium ",placeholder:"请选择","popper-class":"branchSelect"},model:{value:t.$store.state.nowMapName,callback:function(e){t.$set(t.$store.state,"nowMapName",e)},expression:"$store.state.nowMapName"}},t._l(t.$store.state.mapList,function(e,i){return a("el-option",{key:i,attrs:{label:e,value:e,disabled:e===t.$store.state.nowMapName}},[a("span",{staticClass:"leftName",staticStyle:{float:"left"},on:{click:function(a){return t.chooseBranch(e)}}},[t._v(t._s(e))]),t._v(" "),"master"!==e?a("span",{staticClass:"rightDel",staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},on:{click:function(a){return t.delBranch(e)}}},[a("i",{staticClass:"el-icon-delete"})]):a("span",{staticClass:"rightDel",staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}})])}),1),t._v(" "),a("div",{staticClass:"addBranch addWebSocket"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新建分支",placement:"bottom"}},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:t.newBranchBtn}})],1)],1)],1)],2)],1)],1),t._v(" "),a("div",{staticClass:"setItem flex",on:{click:t.joystick}},[t._m(2),t._v(" "),t._m(3)]),t._v(" "),a("div",{staticClass:"setItem flex",on:{click:t.wifiSetting}},[t._m(4),t._v(" "),t._m(5)]),t._v(" "),a("div",{staticClass:"setItem flex",on:{click:t.initialPose}},[t._m(6),t._v(" "),t._m(7)]),t._v(" "),a("div",{staticClass:"setItem flex",on:{click:t.sendGoal}},[t._m(8),t._v(" "),t._m(9)]),t._v(" "),a("div",{staticClass:"setItem flex"},[t._m(10),t._v(" "),a("div",{staticClass:"rightIcon"},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#C0CCDA"},on:{change:t.changeSlam},model:{value:t.slamSwitcn,callback:function(e){t.slamSwitcn=e},expression:"slamSwitcn"}})],1)]),t._v(" "),a("div",{staticClass:"collpaseBox"},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-guide setIcon slamIcon"}),t._v("WebSocket\n                ")]),t._v(" "),a("div",{staticClass:"branchSelectBox flex"},[a("wsTopicConfig"),t._v(" "),a("el-input",{staticClass:"WebSocketInput",attrs:{placeholder:"请输入需要连接的IP和端口号",clearable:""},model:{value:t.ipText,callback:function(e){t.ipText=e},expression:"ipText"}}),t._v(" "),a("div",{staticClass:"addWebSocket"},[a("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#C0CCDA"},on:{change:t.changeWebSocket},model:{value:t.WebSocketSwitcn,callback:function(e){t.WebSocketSwitcn=e},expression:"WebSocketSwitcn"}})],1)],1)],2)],1)],1),t._v(" "),a("div",{staticClass:"collpaseBox"},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("i",{staticClass:"header-icon el-icon-bell setIcon volumeIcon"}),t._v("音量调节\n                ")]),t._v(" "),a("div",{staticClass:"flex volumeBox"},[a("div",{staticClass:"modulContent"},[a("el-slider",{attrs:{"format-tooltip":t.formatTooltip},on:{change:t.changeVoice},model:{value:t.voice,callback:function(e){t.voice=e},expression:"voice"}})],1)])],2)],1)],1),t._v(" "),a("div",{staticClass:"setItem flex",on:{click:t.updateSystem}},[t._m(11),t._v(" "),t._m(12)]),t._v(" "),a("div",{staticClass:"setItem flex",on:{click:t.clearCache}},[t._m(13),t._v(" "),t._m(14)]),t._v(" "),a("div",{staticClass:"setItem flex helpBot",on:{click:t.helpBtn}},[t._m(15),t._v(" "),t._m(16)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.cacheDialog,width:"79%",top:"30vh",center:""},on:{"update:visible":function(e){t.cacheDialog=e}}},[a("span",[t._v("是否清除浏览器缓存?")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cacheDialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.clearCacheBtn}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-user setIcon authorIcon"}),this._v("设置权限")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rightIcon"},[e("i",{staticClass:"el-icon-arrow-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-coordinate setIcon joystickIcon"}),this._v("操纵杆")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rightIcon"},[e("i",{staticClass:"el-icon-arrow-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-s-data setIcon wifiIcon"}),this._v("WIFI设置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rightIcon"},[e("i",{staticClass:"el-icon-arrow-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-thumb setIcon initialIcon"}),this._v("手动定位")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rightIcon"},[e("i",{staticClass:"el-icon-arrow-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-thumb setIcon initialIcon"}),this._v("发送目标位置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rightIcon"},[e("i",{staticClass:"el-icon-arrow-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-magic-stick setIcon slamIcon"}),this._v("激光显示")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-refresh setIcon updateIcon"}),this._v("系统更新")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rightIcon"},[e("i",{staticClass:"el-icon-arrow-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-odometer setIcon cacheIcon"}),this._v("清除缓存")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rightIcon"},[e("i",{staticClass:"el-icon-arrow-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"el-icon-headset setIcon helpIcon"}),this._v("帮助")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rightIcon"},[e("i",{staticClass:"el-icon-arrow-right"})])}]};var Ct=a("VU/8")(_t,xt,!1,function(t){a("QFh+")},"data-v-63308bc6",null).exports,Ft=a("pDaU"),St={name:"home",components:{electricity:i.a,mapping:r,joystickComponent:_,waypointAdd:S,trajectoryAdd:O,wifiSetting:D,authorization:m,addBranch:v,update:U,uploadMap:J,waypoints:ot,trajectorys:dt,fblists:ht,setting:Ct},data:function(){return{tabModel:"map",statusTable:[],statusDialog:!1,mapLayer:!1,radio:"1",develop:"developer"===this.$store.state.userRole,iconData:"el-icon-video-pause",isClickPause:!1,data:[],expandedList:[],base:"base",other:"other"}},watch:{"$store.state.wayPointMsg":function(t){this.tabModel="waypoint"},"$store.state.userRole":function(t){this.develop="developer"===t},"$store.state.statusArray":function(t){this.statusTable=Object(l.n)(t)},"$store.state.amclOriginFLag":function(t){1==t?($(".amclOriginSvg .useIcon").attr("fill","LightGrey"),$(".amclOriginSvg .useIcon2").attr("fill","black")):0==t?($(".amclOriginSvg .useIcon").attr("fill","black"),$(".amclOriginSvg .useIcon2").attr("fill","black")):($(".amclOriginSvg .useIcon").attr("fill","LightGrey"),$(".amclOriginSvg .useIcon2").attr("fill","LightGrey"))},"$store.state.amclReflectionFLag":function(t){1==t?($(".amclReflectionSvg .useIcon").attr("fill","LightGrey"),$(".amclReflectionSvg .useIcon2").attr("fill","black")):0==t?($(".amclReflectionSvg .useIcon").attr("fill","black"),$(".amclReflectionSvg .useIcon2").attr("fill","black")):($(".amclReflectionSvg .useIcon").attr("fill","LightGrey"),$(".amclReflectionSvg .useIcon2").attr("fill","LightGrey"))}},mounted:function(){var t=this;localStorage.getItem("ip")||localStorage.setItem("ip","localhost:8181"),window.addEventListener("beforeunload",function(e){return t.beforeunloadFn(e)})},methods:{beforeunloadFn:function(t){alert()},nodeExpand:function(t){this.expandedList.push(t.label)},nodeCollapse:function(t){this.expandedList.splice(this.expandedList.indexOf(t.code),1)},flexBePauseBtn:function(){!function(){var t=window.localStorage.getItem("pauseState");t?"true"==t?(t=!1,window.localStorage.setItem("pauseState","false")):(t=!0,window.localStorage.setItem("pauseState","true")):(window.localStorage.setItem("pauseState","true"),t=!0);var e=new ROSLIB.Message({data:t});return N.a.topic["/flexbe/command/pause"].publish(e),t?Object(T.Notification)({title:"成功",message:"任务已暂停",type:"success",position:"top-left",offset:100}):Object(T.Notification)({title:"成功",message:"任务已恢复",type:"success",position:"top-left",offset:100}),t}()?(this.iconData="el-icon-video-pause",this.isClickPause=!1):(this.iconData="el-icon-video-play",this.isClickPause=!0)},flexBePreemptBtn:function(){var t;t=new ROSLIB.Message({}),N.a.topic["/flexbe/command/preempt"].publish(t),Object(T.Notification)({title:"成功",message:"终止任务成功",type:"success",position:"top-left",offset:100})},chooseMap:function(t,e){Object(o.b)(t,e)},downloadMap:function(){Object(o.c)()},mappingBtn:function(){this.$emit("transferSetting","mapping"),Object(o.e)(!0)},uploadMap:function(){Object(o.f)(!0)},mapZoom:function(t){"max"==t?(this.$store.commit("zoomDisabled",0),setTimeout(function(){Object(o.j)("zoomIn")},300)):(this.$store.commit("zoomDisabled",1),setTimeout(function(){Object(o.j)("zoomOut")},300))},settingVal:function(t){switch(this.tabModel="map",t){case"joystick":w(!0);break;case"initialPose":Object(Ft.a)("initPose");break;case"goal":Object(Ft.a)("goal")}},flexbeVueVal:function(t){this.tabModel="map"},waypointVal:function(t){this.tabModel="map"},renderContent:function(t,e){var a,i=e.node,o=e.data;e.store;switch(o.levelnum){case 0:a=t("span",{class:"custom-tree-node tree-node-ok"},[t("span",[i.label]),t("span",[o.levelnum])]);break;case 1:a=t("span",{class:"custom-tree-node tree-node-warring"},[t("span",[i.label]),t("span",[o.levelnum])]);break;case 2:a=t("span",{class:"custom-tree-node tree-node-error"},[t("span",[i.label]),t("span",[o.levelnum])]);break;default:a=t("span",{class:"custom-tree-node tree-node-null"},[t("span",[i.label]),t("span",[o.levelnum])])}return a}}},jt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"amclOrigin"},[t._v("定位："),a("svg-icon",{staticClass:"amclOriginSvg",attrs:{"icon-class":"signal"}})],1),t._v(" "),a("div",{staticClass:"amclReflection"},[t._v("反光板："),a("svg-icon",{staticClass:"amclReflectionSvg",attrs:{"icon-class":"signal"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.showBattery,expression:"this.$store.state.showBattery"}]},[a("electricity")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("mapping")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("authorization")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("add-branch")],1),t._v(" "),a("transition",{attrs:{name:"el-fade-in-center"}},[a("joystick-component")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("waypoint-add")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("trajectory-add")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("wifi-setting")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("update")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}},[a("upload-map")],1),t._v(" "),a("transition",{attrs:{name:"el-zoom-in-bottom"}}),t._v(" "),a("el-tabs",{staticClass:"tabs",attrs:{"tab-position":"bottom",stretch:""},model:{value:t.tabModel,callback:function(e){t.tabModel=e},expression:"tabModel"}},[a("el-tab-pane",{attrs:{name:"map"}},[a("div",{staticClass:"tabItem flex",attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-position"}),t._v(" "),a("span",[t._v("地图")])]),t._v(" "),a("div",[a("div",{attrs:{id:"mapNavDiv"}}),t._v(" "),a("div",{staticClass:"boxShadow flexBePauseBtn",class:{clickPause:t.isClickPause}},[a("el-button",{attrs:{icon:t.iconData},on:{click:t.flexBePauseBtn}})],1),t._v(" "),a("div",{staticClass:"boxShadow flexBePreemptBtn"},[a("el-button",{attrs:{icon:"el-icon-remove-outline"},on:{click:t.flexBePreemptBtn}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.develop,expression:"develop"}],staticClass:"boxShadow mapLayer"},[a("el-button",{attrs:{icon:"el-icon-copy-document"},on:{click:function(e){t.mapLayer=!0}}})],1),t._v(" "),a("div",{staticClass:"boxShadow flex mapSizeBtn"},[a("el-button",{staticClass:"zoomBtn",attrs:{icon:"el-icon-plus",disabled:0===this.$store.state.zoomDisabled},on:{click:function(e){return t.mapZoom("max")}}}),t._v(" "),a("el-button",{staticClass:"zoomBtn",attrs:{icon:"el-icon-minus",disabled:1===this.$store.state.zoomDisabled},on:{click:function(e){return t.mapZoom("min")}}})],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"诊断信息显示",visible:t.statusDialog,"custom-class":"statusDialog"},on:{"update:visible":function(e){t.statusDialog=e}}},[a("el-tree",{attrs:{data:t.statusTable,"default-expanded-keys":t.expandedList,"node-key":"label",draggable:"","render-content":t.renderContent},on:{"node-expand":t.nodeExpand,"node-collapse":t.nodeCollapse}})],1),t._v(" "),a("el-tab-pane",{attrs:{name:"oftenFlexbeList"}},[a("div",{staticClass:"tabItem flex",attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-location-information"}),t._v(" "),a("span",[t._v("常用功能")])]),t._v(" "),a("div",[a("fblists",{attrs:{flexTag:t.base},on:{transferSetting:t.flexbeVueVal}})],1)]),t._v(" "),a("el-tab-pane",{attrs:{name:"flexbelist"}},[a("div",{staticClass:"tabItem flex",attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-guide"}),t._v(" "),a("span",[t._v("任务列表")])]),t._v(" "),a("fblists",{attrs:{flexTag:t.other},on:{transferSetting:t.flexbeVueVal}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"设置",name:"setting"}},[a("div",{staticClass:"tabItem flex",attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",[t._v("设置")])]),t._v(" "),a("setting",{on:{transferSetting:t.settingVal}})],1)],1),t._v(" "),a("el-drawer",{attrs:{title:"地图",visible:t.mapLayer,size:"50%","with-header":!1,"custom-class":"mapRight"},on:{"update:visible":function(e){t.mapLayer=e}}},[[a("div",{staticClass:"dividingLine"},[a("p",[t._v("地图")])]),t._v(" "),a("div",{staticClass:"flex mapBox"},[a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.chooseMap("/map_ostream","map")}}},[a("div",{staticClass:"icon boxShadow map"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("地图")])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.chooseMap("/map_ostream_path","map_path")}}},[a("div",{staticClass:"icon boxShadow mapPath"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("路线地图")])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.chooseMap("/map_ostream_display","map_display")}}},[a("div",{staticClass:"icon boxShadow mapDisplay"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("显示地图")])]),t._v(" "),a("div",{staticClass:"moreItem flex",on:{click:function(e){return t.chooseMap("/map_ostream_reflection","map_reflection")}}},[a("div",{staticClass:"icon boxShadow mapReflection"}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("反光板地图")])])]),t._v(" "),a("div",{staticClass:"dividingLine"},[a("p",[t._v("选项")])]),t._v(" "),a("div",{staticClass:"flex moreBox"},[a("div",{staticClass:"moreItem flex"},[a("div",{staticClass:"icon boxShadow mapNor",on:{click:t.mappingBtn}}),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("建图")])]),t._v(" "),a("div",{staticClass:"moreItem flex"},[a("div",{staticClass:"icon flex boxShadow",on:{click:t.downloadMap}},[a("i",{staticClass:"el-icon-download"})]),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("导出")])]),t._v(" "),a("div",{staticClass:"moreItem flex"},[a("div",{staticClass:"icon flex boxShadow",on:{click:t.uploadMap}},[a("i",{staticClass:"el-icon-upload2"})]),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("导入")])])]),t._v(" "),a("div",{staticClass:"dividingLine"},[a("p",[t._v("其他")])]),t._v(" "),a("div",{staticClass:"flex moreBox"},[a("div",{staticClass:"moreItem flex"},[a("div",{staticClass:"icon flex boxShadow"},[a("el-button",{attrs:{icon:"el-icon-warning"},on:{click:function(e){t.statusDialog=!0}}})],1),t._v(" "),a("p",{staticClass:"itemTitle"},[t._v("诊断信息")])])])]],2)],1)},staticRenderFns:[]};var kt=a("VU/8")(St,jt,!1,function(t){a("utPf")},"data-v-2055cbb4",null);e.default=kt.exports},xrs3:function(t,e,a){"use strict";e.h=function(t){t?l.a.commit("switchWaypointList",!0):l.a.commit("switchWaypointList",!1)},e.b=function(){if(0!==n()(u.a.robotPoseMsg).length){var t=Object(p.j)(u.a.robotPoseMsg.orientation),e=(180*t/Math.PI).toFixed(8),a={positionX:u.a.robotPoseMsg.position.x.toFixed(5),positionY:u.a.robotPoseMsg.position.y.toFixed(5),positionZ:u.a.robotPoseMsg.position.z.toFixed(5),orientationX:u.a.robotPoseMsg.orientation.x.toFixed(5),orientationY:u.a.robotPoseMsg.orientation.y.toFixed(5),orientationZ:u.a.robotPoseMsg.orientation.z.toFixed(5),orientationW:u.a.robotPoseMsg.orientation.w.toFixed(5),yaw:e};return l.a.commit("setRobotPosition",a),!0}return Object(c.Notification)({title:"错误",message:"无法获取当前机器人姿态，建议重启系统",type:"error",position:"top-left",offset:100}),!1},e.f=d,e.a=f,e.g=v,e.c=h,e.i=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.stationName,s=t.type,n=t.frameId,r=t.mode;if(!Object(p.c)(i))return void Object(c.Notification)({title:"警告",message:"站点名称不合法",type:"warning",position:"top-left",offset:100});if(!a&&w(i))return void Object(c.Notification)({title:"警告",message:"该站点名称已存在",type:"warning",position:"top-left",offset:100});if(Object(m.b)(i))return void Object(c.Notification)({title:"警告",message:"该名称与轨迹名称重复",type:"warning",position:"top-left",offset:100});if(!n&&("initial_pose"===s||"goal"===s))return void Object(c.Notification)({title:"警告",message:"请输入frame_id",type:"warning",position:"top-left",offset:100});"sound_play"===s&&(r=t.voiceMode);"call"==r&&(r=t.callMode);"goto"==r&&(r=t.gotoMode);if(!Object(p.c)(r))return void Object(c.Notification)({title:"错误",message:"站点模式不合法",type:"error",position:"top-left",offset:100});var l={position:u.a.robotPoseMsg.position,orientation:u.a.robotPoseMsg.orientation},v={stationName:i,stationType:s,stationMode:r,frameId:n,pose:l},h={frame_id:v.frameId,type:v.stationType,close_enough:0,goal_timeout:0,failure_mode:v.stationMode},g=new ROSLIB.Message({header:{frame_id:o()(h)},name:v.stationName,pose:v.pose});a?(f(e,!0),setTimeout(function(){u.a.topic.addWaypointTopic.publish(g)},1e3)):(u.a.topic.addWaypointTopic.publish(g),Object(c.Notification)({title:"成功",message:"站点添加成功",type:"success",position:"top-left",offset:100}));d(!1)},e.e=function(){var t=!1;if(u.a.waypointsStage&&u.a.waypointsStage){for(var e in u.a.waypointsStage)for(var a=u.a.waypointsStage[e],i=0;i<a.length;i++)u.d.scene.removeChild(a[i]),t=!0;setTimeout(function(){if(t)for(var e={goal:[]},a=0;a<u.a.waypointsMessage.waypoints.length;a++){var i=u.a.waypointsMessage.waypoints[a],o=JSON.parse(i.header.frame_id),s=o.type;if("goal"===s){var n=new ROS2D.NavigationArrow({size:10,strokeSize:1,fillColor:createjs.Graphics.getRGB(63,134,254,.9),pulse:!1});n.x=i.pose.position.x,n.y=-i.pose.position.y,n.scaleX=1/u.d.scene.scaleX,n.scaleY=1/u.d.scene.scaleY,n.rotation=u.d.scene.rosQuaternionToGlobalTheta(i.pose.orientation),n.name=i.name,e[s].push(n),n.on("click",g),u.d.scene.addChild(n),u.a.waypointsStage=e,l.a.commit("stationList",e.goal)}}},200)}},e.d=w;var i=a("mvHQ"),o=a.n(i),s=a("fZjL"),n=a.n(s),r=a("//Fk"),l=(a.n(r),a("NHnr"),a("IcnI")),c=a("zL8q"),u=(a.n(c),a("dmop")),m=a("Lf+Q"),p=a("RjI4");function d(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=window.localStorage.getItem("guide");t?(l.a.commit("switchAddStation",!0),e||l.a.commit("guideIndex",2)):l.a.commit("switchAddStation",!1)}function f(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=h(t),i=new ROSLIB.Message(a);console.log("delete Waypoint Name:"+t),u.a.topic.delWaypointTopic.publish(i),u.d.scene.removeChild(a),e||Object(c.Notification)({title:"成功",message:"站点删除成功",type:"success",position:"top-left",offset:100})}function v(t){var e=h(t);console.log(e);var a=JSON.parse(e.header.frame_id);e?(l.a.commit("wayPointMsg",e),console.log("[INFO]waypoint:\n-type: "+a.type+";\n-name: "+e.name+".")):(Object(c.Notification)({title:"错误",message:"没有找到站点"+t,type:"error",position:"top-left",offset:100}),console.warn("[WARN]Can not find waypoint "+t))}function h(t){for(var e=0;e<u.a.wayPointsMsg.waypoints.length;e++){var a=u.a.wayPointsMsg.waypoints[e];if(a.name===t)return a}}function g(t){v(t.currentTarget.name)}function w(t){if(u.a.wayPointsMsg)for(var e=0;e<u.a.wayPointsMsg.waypoints.length;e++)if(u.a.wayPointsMsg.waypoints[e].name===t)return!0;return!1}}},["NHnr"]);
//# sourceMappingURL=app.a9119b4b8fb658152d6f.js.map